(function(e){function t(t){for(var c,r,i=t[0],l=t[1],u=t[2],b=0,d=[];b<i.length;b++)r=i[b],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(c=!1)}c&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var c={},o={index:0},a=[];function r(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"007f":function(e,t,n){"use strict";n("8684")},"0c69":function(e,t,n){},"2a86":function(e,t,n){"use strict";n("b0c3")},5869:function(e,t,n){"use strict";n("0c69")},"594d":function(e,t,n){},6208:function(e,t,n){},8684:function(e,t,n){},"8cb1":function(e,t,n){},"9ba2":function(e,t,n){"use strict";n("c920")},a46c:function(e,t,n){"use strict";n("594d")},b0c3:function(e,t,n){},b7e3:function(e,t,n){},c920:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c,o,a,r=n("7a23"),i=n("be92"),l=9,u=10,s=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];(function(e){e[e["DEFAULT"]=0]="DEFAULT",e[e["PLAY"]=1]="PLAY",e[e["WIN"]=2]="WIN",e[e["LOSE"]=3]="LOSE"})(c||(c={})),function(e){e["DARK"]="dark",e["LIGHT"]="light"}(o||(o={})),function(e){e["WIN"]="Congratulations! You win ðŸŽ‰!",e["LOSE"]="Oops, you stepped on a mine ðŸ¤•!"}(a||(a={}));var b=function(){return{theme:o.LIGHT,currentToast:null}},d=Object(i["b"])("general",{state:b,actions:{setThemeAttr:function(){document.body.setAttribute("data-theme",this.theme)},toggleTheme:function(){this.theme===o.DARK?this.theme=o.LIGHT:this.theme=o.DARK,this.setThemeAttr()},addToast:function(e){this.currentToast=e},removeToast:function(){this.currentToast=null}}}),f=n("3835"),O=n("b85c");n("d81d"),n("fb6a"),n("d3b7"),n("a9e3"),n("0481"),n("4069"),n("4de4"),n("ac1f"),n("00b4");function m(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),c=[e[n],e[t]];e[t]=c[0],e[n]=c[1]}return e}function j(e,t,n,c){return e+n>=0&&t+c>=0&&e+n<l&&t+c<l}function p(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"mobile":"desktop"}function v(){var e=window.navigator.userAgent,t=window.navigator.platform,n=["Macintosh","MacIntel","MacPPC","Mac68K"],c=["Win32","Win64","Windows","WinCE"],o=["iPhone","iPad","iPod"],a="";return-1!==n.indexOf(t)?a="Mac OS":-1!==o.indexOf(t)?a="iOS":-1!==c.indexOf(t)?a="Windows":/Android/.test(e)?a="Android":!a&&/Linux/.test(t)&&(a="Linux"),a}var h=n("ad75"),g=n.n(h),k=function(){return{userDevice:"",userOS:"",board:[],startFirstStep:!1,gameStatus:c.DEFAULT}},E=Object(i["b"])("game",{state:k,actions:{checkDeviceInfo:function(){this.userDevice=p(),this.userOS=v()},initBoard:function(){for(var e=m(Array.apply([],Array(l*l)).map((function(e,t){return{isMine:t<u,isFlagged:!1,isRevealed:!1,count:0}}))),t=0;t<l;t++)this.board[t]=e.slice(t*l,(t+1)*l)},handleReset:function(){this.startFirstStep=!1,this.updateGameStatus(c.DEFAULT),this.initBoard();var e=d();e.currentToast&&e.removeToast()},handleStart:function(){this.gameStatus===c.DEFAULT&&this.updateGameStatus(c.PLAY)},handleCellClick:function(e,t){if(this.handleStart(),this.gameStatus===c.PLAY){var n=this.board[e][t],o=n.isFlagged,a=n.isRevealed;o||a||(this.checkFirstStep(e,t),this.board[e][t].isMine?this.updateGameStatus(c.LOSE):this.revealCell(e,t))}},revealCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=new g.a([{row:e,col:t}]);while(c.length){var o=c.shift(),a=n&&o.row===e&&o.col===t;if(!this.board[o.row][o.col].isRevealed||a){this.board[o.row][o.col].isRevealed=!0;var r,i=[],l=Object(O["a"])(s);try{for(l.s();!(r=l.n()).done;){var u=Object(f["a"])(r.value,2),b=u[0],d=u[1];if(j(o.row,o.col,b,d)){var m=this.board[o.row+b][o.col+d],p=m.isMine,v=m.isFlagged,h=m.isRevealed;a||(this.board[o.row][o.col].count+=Number(p)),h||v||p||i.push({row:o.row+b,col:o.col+d})}}}catch(k){l.e(k)}finally{l.f()}this.board[o.row][o.col].count&&!a||i.forEach((function(e){return c.push(e)}))}}this.checkWinStatus()},checkFirstStep:function(e,t){if(!this.startFirstStep&&(this.startFirstStep=!0,this.board[e][t].isMine))for(var n=0;n<this.flatBoard.length;n++)if(!this.flatBoard[n].isMine){var c=Math.floor(n/l),o=n%l;this.board[e][t].isMine=!1,this.board[c][o].isMine=!0;break}},handleCellFlag:function(e,t){this.handleStart(),this.gameStatus===c.PLAY&&(this.board[e][t].isRevealed||(this.board[e][t].isFlagged=!this.board[e][t].isFlagged,this.checkWinStatus()))},checkWinStatus:function(){if(this.gameStatus===c.PLAY&&0===this.remainMines){var e,t=Object(O["a"])(this.flatBoard);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!n.isRevealed&&!n.isFlagged)return;if(n.isMine&&!n.isFlagged)return}}catch(o){t.e(o)}finally{t.f()}this.updateGameStatus(c.WIN)}},expandFromCell:function(e,t){if(this.gameStatus===c.PLAY){var n=this.board[e][t],o=n.isRevealed,a=n.count;if(o&&a){var r,i=0,l=!1,u=Object(O["a"])(s);try{for(u.s();!(r=u.n()).done;){var b=Object(f["a"])(r.value,2),d=b[0],m=b[1];if(j(e,t,d,m)){var p=this.board[e+d][t+m],v=p.isFlagged,h=p.isMine;i+=Number(v),v&&!h&&(l=!0)}}}catch(g){u.e(g)}finally{u.f()}i===a&&(l?this.updateGameStatus(c.LOSE):this.revealCell(e,t,!0))}}},updateGameStatus:function(e){this.gameStatus=e;var t=d(),n=t.addToast;switch(e){case c.WIN:n(a.WIN);break;case c.LOSE:n(a.LOSE);break}}},getters:{flatBoard:function(e){return e.board.flat()},remainMines:function(){return u-this.flatBoard.filter((function(e){return e.isFlagged})).length},isMobile:function(e){return"mobile"===e.userDevice},isIOS:function(e){return"iOS"===e.userOS}}}),y={key:0,class:"toast-wrapper"},B=Object(r["createElementVNode"])("ion-icon",{name:"close"},null,-1),S=[B],N=Object(r["defineComponent"])({__name:"Toast",setup:function(e){var t=d(),n=d(),c=n.removeToast,o=Object(i["c"])(t),a=o.currentToast,l=Object(r["ref"])(null),u=function(){clearInterval(l.value)},s=function(){u(),c()};return Object(r["watch"])((function(){return a.value}),(function(e){e&&(u(),l.value=setTimeout((function(){s()}),5e3))})),Object(r["onUnmounted"])((function(){u()})),function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Transition"],{name:"fadein-top"},{default:Object(r["withCtx"])((function(){return[Object(r["unref"])(a)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",y,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(a))+" ",1),Object(r["createElementVNode"])("button",{class:"btn--close",onClick:s},S)])):Object(r["createCommentVNode"])("",!0)]})),_:1})}}});n("5869");const V=N;var w=V,_={class:"board-wrapper"},T={class:"board-list"},C=["data-count","onClick","onContextmenu","onDblclick","onTouchstart"],F={key:0},M={key:0,name:"skull"},A={key:1,name:"flag"},L={key:1},x={key:1,name:"flag"},D=Object(r["defineComponent"])({__name:"Playground",setup:function(e){var t=E(),n=Object(i["c"])(t),o=n.board,a=n.gameStatus,l=n.isMobile,u=n.isIOS,s=Object(r["computed"])((function(){return a.value===c.LOSE})),b=function(e,n,c){e.preventDefault(),t.handleCellFlag(n,c)},d=function(e,n){l.value||t.expandFromCell(e,n)},f=Object(r["ref"])(null),O=Object(r["ref"])(!1),m=function(){clearInterval(f.value)},j=function(e,n,c){u.value&&l.value&&(m(),e.touches.length>1||(O.value=!1,f.value=setTimeout((function(){t.handleCellFlag(n,c),O.value=!0,m()}),500),o.value[n][c].isFlagged&&e.preventDefault()))},p=function(e){u.value&&l.value&&(O.value?(e.preventDefault(),O.value=!1):m())};return function(e,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",_,[Object(r["createElementVNode"])("div",T,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(o),(function(e,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"board-list__row",key:"row_".concat(n)},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e,(function(e,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:"cell_".concat(c),class:Object(r["normalizeClass"])(["board-list__cell",{"board-list__cell--clickable":!Object(r["unref"])(s)&&!e.isRevealed&&!e.isFlagged,"board-list__cell--revealed":e.isRevealed||Object(r["unref"])(s)&&e.isMine,"board-list__cell--error":Object(r["unref"])(s)&&e.isFlagged&&!e.isMine}]),"data-count":e.count||null,onClick:function(e){return Object(r["unref"])(t).handleCellClick(n,c)},onContextmenu:function(e){return b(e,n,c)},onDblclick:function(e){return d(n,c)},onTouchstart:function(e){return j(e,n,c)},onTouchend:p},[Object(r["unref"])(s)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",F,[e.isMine?(Object(r["openBlock"])(),Object(r["createElementBlock"])("ion-icon",M)):e.isFlagged?(Object(r["openBlock"])(),Object(r["createElementBlock"])("ion-icon",A)):e.count?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:2},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.count),1)],64)):Object(r["createCommentVNode"])("",!0)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",L,[e.isRevealed?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.count||""),1)],64)):e.isFlagged?(Object(r["openBlock"])(),Object(r["createElementBlock"])("ion-icon",x)):Object(r["createCommentVNode"])("",!0)]))],42,C)})),128))])})),128))]),Object(r["createVNode"])(w)])}}});n("d7b2");const P=D;var R=P,I={class:"info-wrapper"},W={class:"info__item"},Y=Object(r["createElementVNode"])("div",{class:"title"},[Object(r["createElementVNode"])("ion-icon",{name:"time-outline"}),Object(r["createTextVNode"])("time")],-1),G={class:"content"},U={class:"info__item"},K=Object(r["createElementVNode"])("div",{class:"title"},[Object(r["createElementVNode"])("ion-icon",{name:"fitness-outline"}),Object(r["createTextVNode"])("mines")],-1),H={class:"content"},z=["disabled"],J=Object(r["createElementVNode"])("ion-icon",{name:"game-controller"},null,-1),q=Object(r["defineComponent"])({__name:"PlayInfo",setup:function(e){var t=E(),n=Object(i["c"])(t),o=n.remainMines,a=n.gameStatus,l=Object(r["ref"])(null),u=Object(r["ref"])(0),s=function(){clearInterval(l.value)};return Object(r["watch"])((function(){return a.value}),(function(e){e===c.DEFAULT?u.value=0:e===c.PLAY?(s(),l.value=setInterval((function(){u.value++}),1e3)):s()})),Object(r["onUnmounted"])((function(){s()})),function(e,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",I,[Object(r["createElementVNode"])("div",W,[Y,Object(r["createElementVNode"])("div",G,Object(r["toDisplayString"])(u.value),1)]),Object(r["createElementVNode"])("div",U,[K,Object(r["createElementVNode"])("div",H,Object(r["toDisplayString"])(Object(r["unref"])(o)),1)]),Object(r["createElementVNode"])("button",{disabled:Object(r["unref"])(a)===Object(r["unref"])(c).DEFAULT||Object(r["unref"])(a)===Object(r["unref"])(c).PLAY,onClick:n[0]||(n[0]=function(){var e;return Object(r["unref"])(t).handleReset&&(e=Object(r["unref"])(t)).handleReset.apply(e,arguments)}),class:"info__item btn--reset"},[J,Object(r["createTextVNode"])("reset ")],8,z)])}}});n("9ba2");const $=q;var Q=$,X={class:"theme-btn-wrapper"},Z=Object(r["createElementVNode"])("div",{class:"dot"},null,-1),ee=Object(r["createElementVNode"])("ion-icon",{name:"sunny"},null,-1),te=Object(r["createElementVNode"])("ion-icon",{name:"moon"},null,-1),ne=[Z,ee,te],ce=Object(r["defineComponent"])({__name:"ThemeBtn",setup:function(e){var t=d(),n=d(),c=n.toggleTheme,a=Object(i["c"])(t),l=a.theme;return function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",X,[Object(r["createElementVNode"])("button",{class:Object(r["normalizeClass"])(["btn--theme",{dark:Object(r["unref"])(l)===Object(r["unref"])(o).DARK}]),onClick:t[0]||(t[0]=function(){return Object(r["unref"])(c)&&Object(r["unref"])(c).apply(void 0,arguments)})},ne,2)])}}});n("007f");const oe=ce;var ae=oe,re={key:0,class:"rule-wrapper"},ie=["name"],le={key:0},ue=Object(r["createElementVNode"])("ion-icon",{name:"close"},null,-1),se=[ue],be=Object(r["defineComponent"])({__name:"Rule",props:{isOpen:{type:Boolean,default:!1}},setup:function(e){var t=e,n=E(),c=Object(i["c"])(n),o=c.isMobile,a=Object(r["computed"])((function(){return{icon:o.value?"phone-portrait-outline":"laptop-outline",device:o.value?"mobile":"computer",list:[{kbd:o.value?"click":"left-click",text:"to reveal a grid",display:!0},{kbd:o.value?"long press":"right-click",text:"to add/remove a flag",display:!0},{kbd:"double-click",text:"on an opened grid to reveal non-flagged adjacent grids if the number on the grid equal to the number of adjacent flagged cells",display:!o.value}]}}));return function(e,n){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Transition"],{name:"fadein"},{default:Object(r["withCtx"])((function(){return[t.isOpen?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",re,[Object(r["createElementVNode"])("h3",null,[Object(r["createElementVNode"])("ion-icon",{name:Object(r["unref"])(a).icon},null,8,ie),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(Object(r["unref"])(a).device)+" device ",1)]),Object(r["createElementVNode"])("ol",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(a).list,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:t},[e.display?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",le,[Object(r["createElementVNode"])("kbd",null,Object(r["toDisplayString"])(e.kbd),1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.text),1)])):Object(r["createCommentVNode"])("",!0)],64)})),128))]),Object(r["createElementVNode"])("button",{class:"btn--close",onClick:n[0]||(n[0]=function(t){return e.$emit("closeRule")})},se)])):Object(r["createCommentVNode"])("",!0)]})),_:1})}}});n("a46c");const de=be;var fe=de,Oe={class:"navbar"},me={class:"rule-btn-wrapper"},je=Object(r["createElementVNode"])("ion-icon",{name:"information-circle-outline"},null,-1),pe=[je],ve=Object(r["createElementVNode"])("a",{href:"https://github.com/alekstar79/minesweeper",class:"navbar__btn",target:"_blank"},[Object(r["createElementVNode"])("ion-icon",{name:"logo-github"})],-1),he=Object(r["defineComponent"])({__name:"Navbar",setup:function(e){var t=E(),n=Object(r["ref"])(!1);return Object(r["watch"])((function(){return t.isMobile}),(function(e){e&&(n.value=!0)}),{immediate:!0}),function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("nav",Oe,[Object(r["createElementVNode"])("div",me,[Object(r["createElementVNode"])("button",{class:"navbar__btn btn--rule",onClick:t[0]||(t[0]=function(e){return n.value=!n.value})},pe),Object(r["createVNode"])(fe,{"is-open":n.value,onCloseRule:t[1]||(t[1]=function(e){return n.value=!1})},null,8,["is-open"])]),ve,Object(r["createVNode"])(ae)])}}});n("f942");const ge=he;var ke=ge,Ee={class:"main"},ye=Object(r["defineComponent"])({__name:"App",setup:function(e){var t=E(),n=t.initBoard,c=t.checkDeviceInfo,o=d(),a=o.setThemeAttr;return Object(r["onMounted"])((function(){a(),c(),n()})),function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ee,[Object(r["createVNode"])(ke),Object(r["createVNode"])(Q),Object(r["createVNode"])(R)])}}});n("2a86");const Be=ye;var Se=Be;n("b7e3");Object(r["createApp"])(Se).use(Object(i["a"])()).mount("#app")},d7b2:function(e,t,n){"use strict";n("6208")},f942:function(e,t,n){"use strict";n("8cb1")}});
//# sourceMappingURL=index.57cd30c2.js.map