(window.webpackJsonp=window.webpackJsonp||[]).push([[263,257],{1139:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return k})),n.d(e,"b",(function(){return _})),n.d(e,"f",(function(){return P})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return S}));var i=n(1),o=n(0),r=n.n(o),s=(n(51),n(43),n(57),n(256),n(3),n(14),n(15),n(1145),n(87),n(367),n(32),n(29),n(52),n(24),n(16),n(62),n(66),n(1182),n(1177)),c=n(2),a=n(33);n(488),n(58),n(25),n(34),n(19),n(12),n(26),n(9),n(27);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var l=Object(s.b)((function(t){t.intro.options.showBullets=!1;var e=Object(s.c)(".side-nav"),n=0;return[new s.a({step:++n,element:"#app",intro:"intro.app_01",action:function(){return new Promise((function(e){t.$bus.$emit("sidebar:restore"),"/chatbot"!==t.route&&(t.route="/chatbot"),setTimeout(e,250)}))}}),new s.a({step:++n,element:".app-toolbar",position:"bottom-middle-aligned",intro:"intro.app_02"}),new s.a({step:++n,element:".sidebar-toggler",intro:"intro.app_03"}),new s.a({step:++n,element:".dots-nav",position:"bottom-middle-aligned",intro:"intro.app_04"}),new s.a({step:++n,element:".tools",position:"bottom-right-aligned",intro:"intro.app_05"}),new s.a({step:++n,element:".calculator",position:"bottom-middle-aligned",intro:"intro.app_06",cleanup:function(){return Object(s.e)((function(){return t.intro.target.classList.remove(t.intro.target.getAttribute("data-rem"))})),t.combo="calculator",t.calculator=!0,!0},onchange:s.f.debounce((function(){var t=Object(s.c)(".v-application--wrap .wrapper .calculator"),e=Object(s.c)(".introjs-tooltipReferenceLayer");e&&t&&Object.assign(e.style,{left:"".concat(t.clientX-5,"px"),top:"".concat(t.clientY-5,"px"),height:"355px",width:"265px"})}),500),action:function(){var e=this;return new Promise((function(n){var i,o=e.step-1;t.combo="calculator",t.calculator=!0,Object(s.d)((function(e,n){if((i=Object(s.c)(".v-application--wrap .wrapper .calculator"))||n>120)return t.intro.instance._introItems[o].element=i,!0})).then((function(){setTimeout(n,500)}))}))}}),new s.a({step:++n,element:".calendar",position:"bottom-middle-aligned",intro:"intro.app_07",cleanup:function(){return Object(s.e)((function(){return t.intro.target.classList.remove(t.intro.target.getAttribute("data-rem"))})),t.combo="calendar",t.calculator=!0,!0},onchange:s.f.debounce((function(){var t=Object(s.c)(".v-application--wrap .wrapper .calendar"),e=Object(s.c)(".introjs-tooltipReferenceLayer");e&&t&&Object.assign(e.style,{left:"".concat(t.clientX-5,"px"),top:"".concat(t.clientY-5,"px"),height:"355px",width:"265px"})}),500),action:function(){var e=this;return new Promise((function(n){var i,o=e.step-1;t.$bus.$emit("sidebar:restore"),t.combo="calendar",t.calculator=!0,Object(s.d)((function(e,n){if((i=Object(s.c)(".v-application--wrap .wrapper .calendar"))||n>120)return t.intro.instance._introItems[o].element=i,!0})).then((function(){setTimeout(n,500)}))}))}}),new s.a({step:++n,element:e,intro:"intro.app_08",onchange:s.f.debounce((function(e){t.activateItem(e,"v-navigation-drawer--open"),Object(s.c)(".introjs-tooltipReferenceLayer .introjs-tooltip").style.top="10%"}),250),action:function(){return new Promise((function(e){t.$bus.$emit("sidebar:pullout"),setTimeout(e,250)}))}})].concat(Object(a.a)([].slice.call(e.querySelectorAll(".v-list > a.v-list-item")).filter((function(t){return!t.hasAttribute("skip-intro")})).map((function(e,i,o){var r,a=o.length;return new s.a(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({intro:"intro.app_".concat((r=n+1,r.toString().padStart(2,"0"))),step:++n,element:e,onchange:function(){return t.$vuetify.theme.dark||Object.assign(Object(s.c)(".introjs-disableInteraction").style,{boxShadow:"rgba(255,255,255,.7) 0 0 15px 7px",border:"2px solid black",borderRadius:"4px",opacity:"0.1"})}},i===a-1&&{action:function(){return new Promise((function(e){t.$bus.$emit("sidebar:pullout"),setTimeout(e,250)}))}}))}))),[new s.a({step:++n,element:".chatbot-module.dialogs",position:"bottom-middle-aligned",intro:"intro.app_14",action:function(){var e,n=this.step-1;return t.$bus.$emit("sidebar:restore"),new Promise((function(e){"/chatbot"===t.route||(t.route="/chatbot"),setTimeout(e)})).then((function(){return"dialogs"!==t.entity("chatbot")?t.swipe("chatbot","dialogs"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".chatbot-module.dialogs"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".connection-module.connections",position:"bottom-middle-aligned",intro:"intro.app_15",action:function(){var e,n=this.step-1;return new Promise((function(e){"/chatbot"===t.route||(t.route="/chatbot"),setTimeout(e)})).then((function(){return"connections"!==t.entity("chatbot")?t.swipe("chatbot","connections"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".connection-module.connections"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".chatbot-module.mailing",position:"bottom-middle-aligned",intro:"intro.app_16",action:function(){var e,n=this.step-1;return new Promise((function(e){"/chatbot"===t.route||(t.route="/chatbot"),setTimeout(e)})).then((function(){return"mailing"!==t.entity("chatbot")?t.swipe("chatbot","mailing"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".chatbot-module.mailing"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".stream-module.stream",position:"bottom-middle-aligned",intro:"intro.app_17",action:function(){var e,n=this.step-1;return new Promise((function(e){"/stream"===t.route||(t.route="/stream"),setTimeout(e)})).then((function(){return"stream"!==t.entity("socket")?t.swipe("socket","stream"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".stream-module.stream"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".stream-module.history",position:"bottom-middle-aligned",intro:"intro.app_18",action:function(){var e,n=this.step-1;return new Promise((function(e){"/stream"===t.route||(t.route="/stream"),setTimeout(e)})).then((function(){return"history"!==t.entity("socket")?t.swipe("socket","history"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".stream-module.history"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".stream-module.chart",position:"bottom-middle-aligned",intro:"intro.app_19",action:function(){var e,n=this.step-1;return new Promise((function(e){"/stream"===t.route||(t.route="/stream"),setTimeout(e)})).then((function(){return"chart"!==t.entity("socket")?t.swipe("socket","chart"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".stream-module.chart"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".module.widget-text",position:"bottom-middle-aligned",intro:"intro.app_20",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"text"!==t.entity("widget")?t.swipe("widget","text"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-text"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".module.widget-list",position:"bottom-middle-aligned",intro:"intro.app_21",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"list"!==t.entity("widget")?t.swipe("widget","list"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-list"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".module.widget-table",position:"bottom-middle-aligned",intro:"intro.app_22",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"table"!==t.entity("widget")?t.swipe("widget","table"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-table"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".module.widget-tiles",position:"bottom-middle-aligned",intro:"intro.app_23",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"tiles"!==t.entity("widget")?t.swipe("widget","tiles"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-tiles"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".module.widget-covers",position:"bottom-middle-aligned",intro:"intro.app_24",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"cover_list"!==t.entity("widget")?t.swipe("widget","cover_list"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-covers"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".module.widget-match",position:"bottom-middle-aligned",intro:"intro.app_25",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"match"!==t.entity("widget")?t.swipe("widget","match"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-match"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".module.widget-donation",position:"bottom-middle-aligned",intro:"intro.app_26",action:function(){var e,n=this.step-1;return new Promise((function(e){"/widget"===t.route||(t.route="/widget"),setTimeout(e)})).then((function(){return"donation"!==t.entity("widget")?t.swipe("widget","donation"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.widget-donation"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".cover-module.covers-list",position:"bottom-middle-aligned",intro:"intro.app_27",action:function(){var e,n=this.step-1;return new Promise((function(e){"/cover"===t.route||(t.route="/cover"),setTimeout(e)})).then((function(){return"list"!==t.entity("cover")?t.swipe("cover","list"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".cover-module.covers-list"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),100)}),new s.a({step:++n,element:".module.connection-module",position:"bottom-middle-aligned",intro:"intro.app_28",action:function(){var e,n=this.step-1;return new Promise((function(e){"/cover"===t.route||(t.route="/cover"),setTimeout(e)})).then((function(){return"connections"!==t.entity("cover")?t.swipe("cover","connections"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="bottom-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".module.connection-module"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:".cover-module.templates",position:"top-middle-aligned",intro:"intro.app_29",scrollTo:"tooltip",action:function(){var e,n=this.step-1;return new Promise((function(e){"/cover"===t.route||(t.route="/cover"),setTimeout(e)})).then((function(){return"templates"!==t.entity("cover")?t.swipe("cover","templates"):Promise.resolve()})).then((function(){return new Promise((function(i){t.intro.instance._introItems[n].position="top-middle-aligned",Object(s.d)((function(i,o){if((e=Object(s.c)(".cover-module.templates"))||o>120)return t.intro.instance._introItems[n].element=e,!0})).then((function(){setTimeout(i,250)}))}))}))}}),new s.a({step:++n,element:"#canvas-context-menu",intro:"intro.app_30",action:function(e){var n=this;return new Promise((function(i){t.intro.instance._introItems[n.step-1].position="bottom",t.intro.target=e,t.context={clientY:.4*t.$screen.height,clientX:.55*t.$screen.width,presentation:!0},setTimeout(i,300)}))},onchange:s.f.debounce((function(){t.intro.instance.refresh(!0)}),200)}),new s.a({step:++n,element:null,intro:"intro.app_31"})])}),{cleanup:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(t){Object(s.e)((function(){return n.intro.target.classList.remove(n.intro.target.getAttribute("data-rem"))})),Object(s.e)((function(){return i&&n.$bus.$emit("sidebar:restore")})),Object(s.e)((function(){return n.calculator=null})),Object(s.e)((function(){return n.context=null})),t()}))},activateItem:function(t,e){"string"==typeof e&&(t.classList.add(e),t.setAttribute("data-rem",e)),this.intro.target=t}}),h=(n(83),n(1203)),d=n.n(h),f=n(1898),p=n(158);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}d()(f.a),Object(p.debounce)((function(){this.swiper.off("slideNextTransitionStart",this.next),this.swiper.off("slidePrevTransitionStart",this.prev),this.$bus.$off("context:on-change",this.changeEntity),this.options.allowTouchMove?(this.swiper.on("slideNextTransitionStart",this.next),this.swiper.on("slidePrevTransitionStart",this.prev)):this.$bus.$on("context:on-change",this.changeEntity)}),10),Object(p.debounce)((function(t){var e=t.icon;this.entity=e}),10),n(181);var b=n(260),g=n(1216),w=n(1186),O=function(){},k={data:function(){return{reload:!1}},computed:{fail:{get:function(){var t=this.$store.state.app.error;return t&&(5===t.error_code||"server_side_auth"in t)},set:function(t){this.$store.commit("app/set",{error:t})}},presence:function(){return!this.vkapp||(this.fail||this.reload)},action:function(){return!this.fail&&this.user?"logout":"login"},vkapp:function(){return this.$store.state.app.vkapp},user:function(){return this.$store.state.app.user}},methods:{getHost:function(){return"/"},close:function(){this.$emit("close"),this.reload&&this.requestSettings({})},popup:function(t,e,n){var i,o=this;window.addEventListener("message",(function t(r){r.origin===o.getHost()&&(window.removeEventListener("message",t),i&&i.close(),o.requestSettings({resolve:e,timeout:n}))})),i=Object(g.a)({url:t,width:780,height:560})},auth:function(t){var e=this,n="".concat(this.getHost(),"/").concat(this.action,"/vk");return new Promise((function(i){switch(!0){case e.reload:e.requestSettings({resolve:i,timeout:t});break;case e.$BROWSER.NATIVE_APP:Object(b.b)(n,"_parent"),Object(w.a)(1e3).then((function(){e.reload=!0,i()}));break;default:e.popup(n,i,t)}}))},requestSettings:function(){var t=Object(i.a)(r.a.mark((function t(e){var n,i,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.timeout,i=e.resolve,o=void 0===i?O:i,"number"==typeof n||(n=0),s=this.action,this.reload=!1,this.close(),t.prev=5,t.t0=s,t.next="login"===t.t0?9:"logout"===t.t0?14:19;break;case 9:return t.next=11,this.$store.dispatch("app/settingsLoad");case 11:return t.next=13,Promise.all([this.$store.dispatch("chatbot/chatsLoad",{}),this.$store.dispatch("cover/coversLoad",{})]);case 13:return t.abrupt("break",19);case 14:return this.$store.commit("chatbot/set",{list:[]}),this.$store.commit("cover/set",{list:[]}),this.$store.commit("app/setSettings",{}),this.$cookies.remove("NetXBot"),t.abrupt("break",19);case 19:this.$bus.$emit("settings:reload",s),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(5);case 24:setTimeout(o,n);case 25:case"end":return t.stop()}}),t,this,[[5,22]])})));return function(e){return t.apply(this,arguments)}}()}};function j(t){function e(){window.removeEventListener("popstate",e),clearTimeout(t)}return window.addEventListener("popstate",e),e}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;return j(window.setTimeout((function(){try{t()}catch(e){}}),e))}var _={methods:{goBack:function(){var t=arguments,e=this;return Object(i.a)(r.a.mark((function n(){var i,o,s,c,a,u,l,h,d;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:null,o=t.length>1&&void 0!==t[1]?t[1]:"/chatbot",n.prev=2,n.next=5,e.$router.push(i);case 5:return n.abrupt("return",n.sent);case 8:n.prev=8,n.t0=n.catch(2);case 10:return c=document.referrer.includes(window.location.host),e.$routerHistory.hasPrevious()&&(h=((null===(d=e.$routerHistory.previous())||void 0===d?void 0:d.path)||"").split("?",2)[0])===window.location.pathname&&(h=void 0),!h&&(a=e.$routerHistory.getHistory()).length>1&&(u=e.$routerHistory.getCurrent(),l=u>0?u-1:a.length-1),l&&a[l]&&(h=a[l].split("?",2)[0])===window.location.pathname&&(h=void 0),h||(h=o),s=y((function(){return e.$router.push(o)})),n.prev=16,n.next=19,c&&window.history.length>2?e.$router.go(-1):e.$router.push(h);case 19:s(),n.next=24;break;case 22:n.prev=22,n.t1=n.catch(16);case 24:case"end":return n.stop()}}),n,null,[[2,8],[16,22]])})))()}}},P={watch:{"$store.state.app.window":"calcScreen",$screen:{handler:"setWrapper",deep:!0}},methods:{calcScreen:function(t){var e=t.width,n=t.height,i=1e9/Math.pow(e,3);i<1.1&&(i=0),document.documentElement.style.setProperty("--screen-height",n),document.documentElement.style.setProperty("--screen-width",e),document.documentElement.style.setProperty("--swp","".concat(i,"%"))},setWrapper:function(){var t=this.$el,e=t.clientHeight,n=t.clientWidth,i=this.$screen,o={window:{diagonal:Math.ceil(Math.hypot(i.height,i.width)),height:i.height,width:i.width},wrapper:{height:e,width:n}};this.$store.commit("app/set",o),this.$bus.$emit("window:changed")}},mounted:function(){this.$nextTick().then(this.setWrapper)}},x={methods:{setContext:function(t){this.$store.commit("context/set",{event:t})}}},S={computed:{color:function(){return this.$vuetify.theme.dark?"grey":this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE}},data:function(){return{smooth:null}},methods:{initScroll:function(){var t=this;this.smooth||(this.mobile?(n.e(319).then(n.t.bind(null,1871,7)),n.e(319).then(n.t.bind(null,1872,7)).then((function(t){return t.default||t})).then((function(e){t.smooth=e(t.$el,{scrollbars:{visibility:t.mobile?"hidden":"auto"},overflowBehavior:{x:"hidden",y:"scroll"}})}))):n.e(322).then(n.bind(null,1880)).then((function(t){return t.default||t})).then((function(e){t.smooth=e.init(t.$el,{damping:t.mobile?.5:1,continuousScrolling:!1}),t.smooth.updatePluginOptions("overscroll",{enable:!1})})))}},mounted:function(){this.$nextTick().then(this.initScroll)}}},1177:function(t,e,n){"use strict";n.d(e,"f",(function(){return b})),n.d(e,"c",(function(){return y})),n.d(e,"e",(function(){return _})),n.d(e,"a",(function(){return P}));n(32),n(29),n(52),n(16),n(62),n(66),n(26),n(27);var i=n(2),o=n(33),r=n(1),s=n(0),c=n.n(s),a=(n(1148),n(34),n(19),n(3),n(24),n(53),n(51),n(9),n(12),n(14),n(15),n(685),n(158)),u=n(1186),l=n(68);n.d(e,"d",(function(){return l.running}));var h=n(1238),d=n(1215);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var b={debounce:a.debounce,delay:u.a};function g(t){return{steps:t,corrections:Object.fromEntries(t.filter((function(t){return"correction"in t})).map((function(t){return[t.step,t.correction]})))}}function w(t){var e,n;return t.cleanup="cleanup"in t?(e=t.cleanup,n=this.cleanup,function(t){e(t)||n(t)}):this.cleanup,t}function O(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.replace(/{(\d+)}/g,(function(t,e){return void 0!==n[e]?n[e]:t}))}function k(t){var e=t.callbacks,n=t.args,i=void 0===n?[]:n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new h.a(function(){var t=Object(r.a)(c.a.mark((function t(n,r){var a,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=m(e),t.prev=1,a.s();case 3:if((u=a.n()).done){t.next=16;break}if(l=u.value,t.prev=5,"function"!=typeof l){t.next=9;break}return t.next=9,l.apply(void 0,Object(o.a)(i));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),r(t.t0);case 14:t.next=3;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),a.e(t.t1);case 21:return t.prev=21,a.f(),t.finish(21);case 24:setTimeout(n,s);case 25:case"end":return t.stop()}}),t,null,[[1,18,21,24],[5,11]])})));return function(e,n){return t.apply(this,arguments)}}())}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){return k({callbacks:[t,function(){return Object(u.a)(n)}],args:e})}}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return e.querySelector(t)}function _(t){try{t()}catch(e){}}function P(t){var e=this;Object.keys(t).forEach((function(n){e[n]="function"==typeof t[n]?t[n].bind(e):t[n]}))}function x(){}e.b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{data:function(){return{presentation:!1,intro:p({bindings:d.a.instance,instance:null,step:new h.a,allowChangeRoute:!1,autoRefresh:!0,autoPlay:!1,options:{keyboardNavigation:!1,disableInteraction:!0,showStepNumbers:!0},corrections:[],unbind:[],steps:[],target:null,hold:null,tip:null,tid:null},i)}},watch:{$route:function(){this.intro.allowChangeRoute||this.presentation&&this.intro.instance.exit(null,!0),this.intro.allowChangeRoute=!1}},computed:{route:{set:function(t){this.intro.allowChangeRoute=!0,this.$router.replace({path:t}).catch(x)},get:function(){return this.$route.path}}},methods:p({cleanup:x,initIntro:function(){return Promise.resolve().then((function(){return n.e(253).then(n.t.bind(null,1442,7))})).then((function(){return n.e(318).then(n.t.bind(null,1443,7))})).then((function(t){return t.default||t})).then(this.setIntro)},setIntro:function(e){var n=g(t(this)),i=n.corrections,o=n.steps;this.setHooks(e),this.$set(this.intro,"instance",e()),this.intro.corrections=i,this.intro.steps=o,this.intro.instance.onafterchange(this.afterChangeHandler),this.intro.instance.onbeforeexit(this.exitHandler),this.intro.instance.setOptions(Object.assign(this.intro.options,{steps:o.map(w.bind(this))}))},setHooks:function(t){var e,n,i,o,s,a,u=this;t.fn.original||(t.fn.original={}),t.fn.translate=u.translate.bind(u),t.fn.previousStep=(e=t.fn.original.previousStep||t.fn.previousStep,t.fn.original.previousStep=e,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.cleanup,i=t.action,o=t.onchange,r=t.element,s=[r,u.intro.tip],c=[n,i];u.intro.step.cancel(),u.intro.step=k({callbacks:c,args:s}),u.intro.step.then(j(e.bind(this))).then(j(o,s)).then(u.afterStep).catch(x)}),t.fn.nextStep=(n=t.fn.original.nextStep||t.fn.nextStep,t.fn.original.nextStep=n,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cleanup,i=t.action,o=t.onchange,r=t.element,s=[r,u.intro.tip],c=[e,i];u.intro.step.cancel(),u.intro.step=k({callbacks:c,args:s}),u.intro.step.then(j(n.bind(this))).then(j(o,s)).then(u.afterStep).catch(x)}),t.fn.goToStep=(i=t.fn.original.goToStep||t.fn.goToStep,t.fn.original.goToStep=i,function(t){var e=this._introItems[t-1],n=e.cleanup,o=e.action,r=e.onchange,s=[e.element,u.intro.tip],c=[n,o];u.intro.step.cancel(),u.intro.step=k({callbacks:c,args:s}),u.intro.step.then(j(i.bind(this,t))).then(j(r,s)).then(u.afterStep).catch(x)}),t.fn.refresh=(o=t.fn.original.refresh||t.fn.refresh,t.fn.original.refresh=o,function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o.call(this,t)}),t.fn.exit=(s=t.fn.original.exit||t.fn.exit,t.fn.original.exit=s,function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&t.classList.remove("fixed-presentation"),u.cleanup(),s.call(this,e)}),t.fn.start=(a=t.fn.original.start||t.fn.start,t.fn.original.start=a,Object(r.a)(c.a.mark((function t(){var e,n,i,o,r,s,h,d,f,p,m=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.length>0&&void 0!==m[0]?m[0]:{},n=e.fixed,i=void 0!==n&&n,this._options.steps=[].map.call(u.intro.steps,this.translate,this),"function"!=typeof(o=a.call(this))._introBeforeExitCallback&&(o._introBeforeExitCallback=x),"function"!=typeof o._introCompleteCallback&&(o._introCompleteCallback=x),"function"!=typeof o._introSkipCallback&&(o._introSkipCallback=x),t.prev=6,t.next=9,Object(l.running)((function(t,e){if(r=y(".introjs-bullets"),s=y(".introjs-skipbutton"),h=y(".introjs-prevbutton"),d=y(".introjs-nextbutton"),f=y(".v-main"),u.intro.tip=y(".introjs-helperLayer"),r&&s&&h&&d||e>10)return!0}));case 9:if(d.onclick=function(){void 0!==o._introItems&&o._introItems.length-1!==o._currentStep?o.nextStep(o._introItems[o._currentStep+1]):(o._introCompleteCallback(),o._introBeforeExitCallback(),o.exit(f))},h.onclick=function(){void 0!==o._introItems&&0!==o._currentStep&&o.previousStep(o._introItems[o._currentStep-1])},s.onclick=function(){void 0!==o._introItems&&o._introItems.length-1===o._currentStep&&o._introCompleteCallback(),o._introSkipCallback(),o._introBeforeExitCallback(),o.exit(f)},r.querySelectorAll("ul > li > a").forEach((function(t){t.onclick=function(){return o.goToStep(t.getAttribute("data-stepnumber"))}})),u.intro.unbind=u.intro.bindings.bind([{keys:"ArrowRight",handler:d.onclick.bind(d)},{keys:"ArrowLeft",handler:h.onclick.bind(h)},{keys:"Escape",handler:s.onclick.bind(s)}]),u.intro.bindings.track(),u.intro.next=d,u.intro.prev=h,u.intro.skip=s,i&&f.classList.add("fixed-presentation"),void 0===o._introItems){t.next=25;break}return p=o._introItems[o._currentStep],t.next=23,k({callbacks:[p.cleanup,p.action],args:[p.element,u.intro.tip]});case 23:o.refresh(!0),u.afterStep();case 25:t.next=29;break;case 27:t.prev=27,t.t0=t.catch(6);case 29:case"end":return t.stop()}}),t,this,[[6,27]])}))))},translate:function(t){return p(p({},t),{},{intro:/^intro\.\w+$/.test(t.intro)?this.$t(t.intro):t.intro})},afterChangeHandler:function(){var t=this.intro,e=t.tip,n=t.corrections[t.instance._currentStep+1];this.intro.autoRefresh&&this.intro.instance.refresh(!0),e&&(this.applyTheme(),n&&Object.keys(n).forEach((function(t){e.style[t]=O(n[t],e.style[t])})))},exitHandler:function(){this.intro.bindings.unbind(this.intro.unbind),this.tid&&clearTimeout(this.tid),this.presentation=!1,this.cleanup(null,null,!0)},afterStep:function(){var t=this.intro.instance,e=t._direction,n=t._introItems,i=t._currentStep;this.intro.autoPlay&&"backward"!==e&&n.length-1>i&&(this.tid&&clearTimeout(this.tid),this.tid=setTimeout(this.intro.next.onclick,1500))},goToStep:function(t){this.intro.instance&&this.intro.instance.goToStep(t)},applyTheme:function(){this.intro.tip.classList[this.$vuetify.theme.dark?"add":"remove"]("theme--dark")},startIntro:function(){var t=arguments,e=this;return Object(r.a)(c.a.mark((function n(){var i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.prev=1,e.presentation=i.presentation||!0,n.next=5,e.intro.instance.start();case 5:e.applyTheme(),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},e),mounted:function(){var t=this;this.initIntro().catch((function(e){return t.$bus.$emit("snack",{content:e.message,color:"warning",raw:!0})}))},beforeRouteLeave:function(t,e,n){this.intro.allowChangeRoute||this.presentation&&this.intro.instance.exit(null,!0),n()}}}},1182:function(t,e,n){"use strict";(function(t){n(16),n(26),n(9),n(27);var e=n(2),i=(n(101),n(3),n(29),n(34),n(19),n(12),n(43),n(14),n(15),n(25),n(1219),n(1131),n(202));function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?o(Object(i),!0).forEach((function(n){Object(e.a)(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var s=["amount","uid","_id"],c=function(t){return r(r({},t),{},{value:t.id,text:t.name})};r(r({},Object(i.b)("app",["user","utoken","vkapp","color"])),{},{groups:{get:function(){var t=this.$store.state.app,n=t.subscribe,i=void 0===n?{}:n,o=t.groups,a=void 0===o?[]:o,u=Date.now()/1e3|0;return(a||[]).map(c).map((function(t){return r(r({},t),{},{paid:Object.keys(i||{}).filter((function(t){return!s.includes(t)})).reduce((function(n,o){return r(r({},n),{},Object(e.a)({},o,i[o]&&i[o][t.id]&&i[o][t.id]>u))}),{})})}))},set:function(t){this.$store.commit("app/set",{groups:t})}},authorized:function(){return!(!this.user&&!this.vkapp)}})}).call(this,n(38))},1412:function(t,e,n){"use strict";var i=n(13),o=(n(3),n(14),n(1242),n(1310),n(15),n(9),n(25),n(68)),r=(n(1413),new WeakMap),s=[],c=0;function a(t){for(;(t.timeRemaining()>0||t.didTimeout)&&s.length;){var e=s.shift();e.handler(e.data)}c=s.length?Object(o.requestIdleCallback)(a,{timeout:1e3}):0}function u(t){r.has(t)&&(!function(t){t&&t.disconnect()}(r.get(t).observer),r.delete(t))}function l(t,e,n){var l=e.value,h=e.modifiers,d=e.arg;u(t);var f,p=d,m=l,v=!0;if("object"===Object(i.a)(l)&&(v=!("intersect"in l)||l.intersect,p||(p=l.rootMargin),m=l.handler,f=l.root),"function"==typeof m){var b=new IntersectionObserver((function(e){e.forEach((function(e){var i=e.isIntersecting,r=e.target;v&&!i||(!function(t,e){s.push({handler:t,data:e}),c||(c=Object(o.requestIdleCallback)(a,{timeout:1e3}))}(m,{el:r,vnode:n,isIntersecting:i}),h.once&&u(t))}))}),{threshold:0,rootMargin:p?"".concat(p,"px ").concat(p,"px ").concat(p,"px ").concat(p,"px"):"0px",root:f});r.set(t,{observer:b}),b.observe(t)}}e.a={update:function(t,e,n){var i=e.value,o=e.oldValue,r=e.modifiers,s=e.arg;i!==o&&l(t,{value:i,modifiers:r,arg:s},n)},unbind:u,bind:l}},1469:function(t,e,n){"use strict";n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"a",(function(){return y.a})),n.d(e,"b",(function(){return E}));var i,o=n(1),r=n(0),s=n.n(r),c=(n(256),n(3),n(9),n(19),n(43),n(57),n(84),n(182),n(87),n(24),n(158)),a=n(68),u={keyCode:16,diff:null},l=Math.hypot,h=Math.floor,d=Math.round,f=function(t,e){return new i.Point(0,0).add(t).subtract(e)},p=function(t){return new i.Point(t.width/2,t.height/2)},m=function(t){return d(100*t)/100};function v(t,e){return{height:t.height*e,width:t.width*e,scale:e}}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=i.util.findScaleToFit(t,e);return v(t,m(o-n))}function g(t,e){return f(p(t),p(e))}Array.prototype.bypass=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"event";(t.length?this.filter((function(e){return t.includes(e[n])})):this).forEach((function(t){return e(t)}))};var w,O={data:function(){return{drawerOptions:this.$store.state.canvas.drawerOptions,emap:[{event:"selection:cleared",handler:this.cleared},{event:"object:selected",handler:this.selected},{event:"mouse:over",handler:this.mouseOver},{event:"mouse:down",handler:this.mouseDown},{event:"mouse:move",handler:this.mouseMove},{event:"mouse:out",handler:this.mouseOut},{event:"mouse:up",handler:this.mouseUp},{event:"restore:events",handler:this.restoreEvents},{event:"stack:changed",handler:this.restoreActiveObjects},{event:"leave:events",handler:this.leaveEvents},{event:"image:remove-bg",handler:this.popupRemBg},{event:"widget:settings",handler:this.popupWidget},{event:"curved:settings",handler:this.popupCurved},{event:"drawingtool:history",handler:this.stateTools},{event:"frame:composite",handler:this.composite},{event:"shape:settings",handler:this.popupShape},{event:"ctext:settings",handler:this.popupText},{event:"merge:settings",handler:this.popupMerge},{event:"qrcode:settings",handler:this.popupQRCode},{event:"path:colorize",handler:this.colorize},{event:"canvas:distort",handler:this.distort},{event:"canvas:snack",handler:this.snack},{event:"canvas:flash",handler:this.flash}],onCanvas:!1,freedraw:!1,isDown:!1,corner:!1,cursorMode:1,object:null,global:null,active:[],offmap:[]}},computed:{client:{set:function(t){this.$store.commit("canvas/set",{client:t})},get:function(){return this.$store.state.canvas.client}},origin:{set:function(t){this.$store.commit("canvas/set",{origin:t})},get:function(){return this.$store.state.canvas.origin}},scaled:{set:function(t){this.$store.commit("canvas/set",{scaled:t})},get:function(){return this.$store.state.canvas.scaled}},track:{set:function(t){this.$store.commit("canvas/set",{track:t})},get:function(){return this.$store.state.canvas.track}},diagonal:{set:function(t){this.$store.commit("canvas/set",{diagonal:t})},get:function(){return this.$store.state.canvas.diagonal}},shiftKey:{set:function(t){this.$store.commit("canvas/set",{shiftKey:t})},get:function(){return this.$store.state.canvas.shiftKey}},point:{set:function(t){this.$store.commit("canvas/set",{point:t})},get:function(){return this.$store.state.canvas.point}},isDraw:function(){return this.freedraw&&0===this.cursorMode},isFree:function(){return!(this.isDown||this.active.length)}},methods:{set:function(t){this.$store.commit("canvas/set",t)},setClient:function(){var t=this;return Object(o.a)(s.a.mark((function e(){var n,i,o,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:n=window.innerHeight,i=window.innerWidth,.95,.91,r=(o={}).height=h(.91*n),c=o.width=h(.95*i),o.left=h((i-c)/2),o.top=h((n-r)/2),t.diagonal=l(c,r),t.client=o;case 7:case"end":return e.stop()}}),e)})))()},correction:function(t){t.x+=20,t.y+=15},fitToWindow:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){var i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$nextTick();case 2:try{i=b(t,e.client,.1),o=g(e.client,i),e.correction(o),e.set({scaled:i,track:o})}catch(r){}case 3:case"end":return n.stop()}}),n)})))()},fitToOrigin:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){var i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$nextTick();case 2:try{i=g(e.client,t),o=v(t,1),e.correction(i),e.set({scaled:o,track:i})}catch(r){}case 3:case"end":return n.stop()}}),n)})))()},zoom:function(t){var e=v(this.origin,this.scaled.scale+t);if(t>0&&this.increase(e)||t<0&&this.decrease(e)){var n=g(this.client,e);this.correction(n),this.track=this.track.lerp(n,.1),this.scaled=e}},setOrigin:function(t,e){var n=this,i={width:t,height:e};return this.setClient().then((function(){return n.fitToWindow(i)})).then((function(){return n.set({origin:i})}))},setScaled:function(t,e,n){var i=this,o=function(t){var e=t.height,n=t.width,i=t.scale;return{height:e/i,width:n/i}}({width:t,height:e,scale:n});return this.setClient().then((function(){return i.fitToWindow(o)})).then((function(){return i.set({origin:o})}))},createContext:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){var i,o,r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.width,o=t.height,r=t.scale,n.next=3,"number"==typeof r?e.setScaled(i,o,r):e.setOrigin(i,o);case 3:case"end":return n.stop()}}),n)})))()},keyDownTrack:function(t){var e=t.which,n=t.code;(e||n)&&(e===u.keyCode||n.startsWith("Shift"))&&(this.shiftKey=!0,this.isDraw||(this.canvas.defaultCursor="move",this.canvas.selection=!1))},keyUpTrack:function(t){!t.repeat&&this.canvas&&(this.canvas.selection=!this.freedraw,this.canvas.defaultCursor=this.freedraw?"crosshair":"default",this.shiftKey=!1)},preInsert:function(){switch(this.canvas.hoverCursor=this.canvas.defaultCursor="crosshair",this.leaveEvents(),this.drawer.type){case"polyline":case"triangle":case"ellipse":case"rect":case"line":this.drawerOptions=this.$store.state.canvas.drawerOptions;break;case"c-text":this.drawerOptions=this.$store.state.canvas.textOptions}},postInsert:function(t){if(t||(t=this.object),"c-text"===t.type)t.on("editing:entered",this.bindings.untrack),t.on("editing:exited",this.bindings.track)},mouseDown:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){var o,r,c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.canvas.getPointer(t.e),r=o.x,c=o.y,e.isDown=!e.cursorMode,n.t0=!0,n.next=n.t0===(e.isDraw&&e.isDown)?5:n.t0===e.shiftKey?13:15;break;case 5:return e.preInsert(),n.next=8,e.drawer.make({x:r,y:c},e.drawerOptions);case 8:return e.object=n.sent,e.canvas.add(e.object),e.canvas.renderAll(),e.postInsert(),n.abrupt("break",15);case 13:u.diff=e.track.subtract(i.util.getPointer(t.e)),t.target&&(e.corner=e.findCorner(t),e.corner||(t.target.lockMovementX=!0,t.target.lockMovementY=!0));case 15:case"end":return n.stop()}}),n)})))()},mouseMove:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){var o,r,c,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.e,n.prev=1,r=e.point=e.canvas.getPointer(o),c=r.x,a=r.y,n.t0=!0,n.next=n.t0===(e.isDraw&&e.isDown)?6:n.t0===(!e.corner&&!!u.diff)?11:13;break;case 6:return e.canvas.hoverCursor=e.canvas.defaultCursor="crosshair",n.next=9,e.drawer.resize(e.object,{x:c,y:a},e.shiftKey);case 9:return e.canvas.renderAll(),n.abrupt("break",13);case 11:return e.set({track:(s=i.util.getPointer(o),l=u.diff,new i.Point(0,0).add(s).add(l))}),n.abrupt("break",13);case 13:n.next=17;break;case 15:n.prev=15,n.t1=n.catch(1);case 17:case"end":return n.stop()}var s,l}),n,null,[[1,15]])})))()},mouseUp:function(t){var e=this;return Object(o.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.isDown=e.corner=!1,u.diff=null,t.target&&(t.target.lockMovementX=!1,t.target.lockMovementY=!1),e.leaveEventsSet&&e.restoreEvents(),n.t0=e.cursorMode,n.next=0===n.t0?7:1===n.t0?11:12;break;case 7:if(!e.isDraw||e.clear()){n.next=10;break}return n.next=10,e.stack("update");case 10:case 11:return n.abrupt("break",12);case 12:e.selectedObjects(),e.object=null;case 14:case"end":return n.stop()}}),n)})))()},mouseOver:function(t){var e=t.target;this.cursorMode=Number(!!e&&!this.isDown),e&&(e.onHover=!0,(this.isFree||"curved-controls"===e.type)&&(this.canvas.hoverCursor=this.canvas.defaultCursor="move",this.setActive(e)))},mouseOut:function(t){(t.target||{}).onHover=!1,this.canvas.defaultCursor="default",this.active.length||this.discardActive()},selected:function(){this.isDraw||(this.cursorMode=1)},cleared:function(){this.cursorMode=Number(!this.freedraw)},increase:function(t){var e=t.width,n=t.height;return!(t.scale>1.5)||l(n,e)<2*this.diagonal},decrease:function(t){var e=t.width,n=t.height;return!(t.scale<.5)||l(n,e)>.25*this.diagonal},wheelTrack:function(t){if(this.origin&&this.scaled&&/upper-canvas|editzone|ruler|track/.test(t.target.className)){var e=t.deltaY||t.wheelDelta,n=this.scaled.scale+(e>0?.01:-.01),o=v(this.origin,n);(e>0&&this.increase(o)||e<0&&this.decrease(o))&&(this.track=this.track.lerp(f(i.util.getPointer(t),p(o)),.05),this.scaled=o),t.preventDefault()}},findCorner:function(t){var e=t.target,n=void 0!==e&&e,i=t.e;return n&&n._findTargetCorner(this.canvas.getPointer(i,!0))},moveTrack:function(t){try{this.global=i.util.getPointer(t),this.onCanvas=(e=t.target,n=e.tagName,o=e.classList,"CANVAS"===n&&o.contains("upper-canvas"))}catch(t){}var e,n,o},bindMoveTracker:function(){var t=!!this.$BROWSER.PASSIVE_SUPPORTED&&{passive:!0};document.addEventListener("mousemove",this.moveTrack,t)},unbindMoveTracker:function(){var t=!!this.$BROWSER.PASSIVE_SUPPORTED&&{passive:!0};document.removeEventListener("mousemove",this.moveTrack,t)},initializeShortCutEvents:function(){var t=this.copier.copy.bind(this.copier),e=this.copier.cut.bind(this.copier);this.offmap=this.bindings.bind([{keys:"shift+f",handler:this.autoAdjust},{keys:"Delete",handler:this.deleteSelected},{keys:"ctrl+a",handler:this.selectAll},{keys:"ctrl+z",handler:this.undo},{keys:"ctrl+y",handler:this.redo},{keys:"ctrl+c",handler:t},{keys:"ctrl+x",handler:e}]),this.bindings.track()},distort:Object(c.debounce)((function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.reload,i=void 0!==n&&n,o=e.resolve;if("function"!=typeof o&&(o=function(){}),!this.origin||!this.scaled||this.leaveEventsSet)return o();var r=this.origin,s=this.scaled.scale,c=function(t){return Object(a.running)(t)},u=i?.03:.01,l=s+u,h=s-u,d=s,f=function(e){return function(){return(t.scaled=v(r,t.scaled.scale+u)).scale>=e}},p=function(e){return function(){return(t.scaled=v(r,t.scaled.scale-u)).scale<=e}},m=function(){t.canvas.trigger("canvas:shaken")},b=function(){t.canvas.requestRenderAll()},g=this.canvasFinalize.bind(this);Promise.resolve().then((function(){return c(f(l))})).then((function(){return c(p(i?h:d))})).then((function(){return i?c(f(d)):Promise.resolve()})).then(g).then(m).then(b).then(o)}),7),keyEventsOff:function(){var t=!this.$BROWSER.PASSIVE_SUPPORTED||{passive:!1};document.removeEventListener("keydown",this.keyDownTrack,t),document.removeEventListener("keyup",this.keyUpTrack,t),document.removeEventListener("wheel",this.wheelTrack,t)},keyEventsOn:function(){var t=!this.$BROWSER.PASSIVE_SUPPORTED||{passive:!1};document.addEventListener("keydown",this.keyDownTrack,t),document.addEventListener("keyup",this.keyUpTrack,t),document.addEventListener("wheel",this.wheelTrack,t)},switcher:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.emap.bypass(n,(function(n){var i=n.event,o=n.handler;e.canvas[t](i,o)}))},trackerEventsOff:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.keyEventsOff(),this.canvas&&this.switcher("off",t)},trackerEventsOn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.keyEventsOn(),this.canvas&&this.switcher("on",t)},passFabricInstanceToTrack:function(t){i=t}}},k=(n(51),n(1177)),j=Object(k.b)((function(t){t.intro.options.showBullets=!1,t.intro.autoRefresh=!1;var e=0;return[new k.a({step:++e,element:".image-editor",title:"Welcome!",intro:"intro.designer_01",action:function(){return new Promise((function(e){t.intro.hold&&t.intro.hold.classList.remove("down"),setTimeout(e,250)}))}}),new k.a({step:++e,element:".image-editor__topbar",intro:"intro.designer_02",action:function(e){return new Promise((function(n){t.presentation=!0,t.$refs.menu.hideBlock(0),t.activateItem(e,"down"),setTimeout(n,250)}))}}),new k.a({step:++e,element:null,intro:"intro.designer_03",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(0).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.file"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_04",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(1).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.edit"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_05",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(2).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.image"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_06",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(3).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.layer"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_07",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(4).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.tools"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_08",action:function(e){var n=this.step-1;return t.$refs.menu.viewBlock(5).then((function(){return new Promise((function(i){e=Object(k.c)(".top-menu.help"),t.intro.hold&&t.intro.hold.classList.remove("visible"),t.intro.instance._introItems[n].element=e,t.intro.instance._introItems[n].position="left",t.intro.hold=Object(k.c)(".image-editor__topbar"),t.intro.hold.classList.add("down"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:".image-list",intro:"intro.designer_09",position:"top",action:function(e){return new Promise((function(n){t.intro.hold&&t.intro.hold.classList.remove("down"),t.$refs.sticker.hideBlock(0),t.$refs.menu.hideBlock(5),t.activateItem(e,"visible"),setTimeout(n,250)}))}}),new k.a({step:++e,element:null,intro:"intro.designer_10",action:function(e){var n=this.step-1;return t.$refs.sticker.viewBlock(0).then((function(){return new Promise((function(i){e=Object(k.c)(".bottom-menu.wdg"),t.intro.instance._introItems[n].position="right",t.intro.instance._introItems[n].element=e,t.intro.hold=Object(k.c)(".image-list"),t.intro.hold.classList.add("visible"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_11",action:function(e){var n=this.step-1;return t.$refs.sticker.viewBlock(1).then((function(){return new Promise((function(i){e=Object(k.c)(".bottom-menu.png"),t.intro.instance._introItems[n].position="right",t.intro.instance._introItems[n].element=e,t.intro.hold=Object(k.c)(".image-list"),t.intro.hold.classList.add("visible"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_12",action:function(e){var n=this.step-1;return t.$refs.sticker.viewBlock(2).then((function(){return new Promise((function(i){e=Object(k.c)(".bottom-menu.svg"),t.intro.instance._introItems[n].position="left",t.intro.instance._introItems[n].element=e,t.intro.hold=Object(k.c)(".image-list"),t.intro.hold.classList.add("visible"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_13",action:function(e){var n=this.step-1;return t.$refs.sticker.viewBlock(3).then((function(){return new Promise((function(i){e=Object(k.c)(".bottom-menu.set"),t.intro.instance._introItems[n].position="left",t.intro.instance._introItems[n].element=e,t.intro.hold=Object(k.c)(".image-list"),t.intro.hold.classList.add("visible"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:null,intro:"intro.designer_14",action:function(e){var n=this.step-1;return t.$refs.sticker.viewBlock(4).then((function(){return new Promise((function(i){e=Object(k.c)(".bottom-menu.bgd"),t.intro.instance._introItems[n].position="left",t.intro.instance._introItems[n].element=e,t.intro.hold=Object(k.c)(".image-list"),t.intro.hold.classList.add("visible"),setTimeout(i,250)}))}))}}),new k.a({step:++e,element:".tool-wrapper.left",intro:"intro.designer_15",position:"right",correction:{height:"calc({0} + 2%)",top:"calc({0} - 1.5%)"},action:function(e){return new Promise((function(n){t.intro.hold&&t.intro.hold.classList.remove("visible"),t.$refs.sticker.hideBlock(4),t.activateItem(e,"visible"),setTimeout(n,250)}))}}),new k.a({step:++e,element:".tool-wrapper.right",intro:"intro.designer_16",position:"left",correction:{height:"calc({0} + 2%)",top:"calc({0} - 1.5%)"},action:function(e){return new Promise((function(n){t.activateItem(e,"visible"),setTimeout(n,250)}))}}),new k.a({step:++e,element:"#canvas-context-menu",intro:"intro.designer_17",action:function(e){var n=this;return new Promise((function(i){t.intro.instance._introItems[n.step-1].position="bottom",t.intro.target=e,t.$refs.context.show({clientY:.4*t.$screen.height,clientX:.55*t.$screen.width,presentation:!0}),setTimeout(i,250)}))},onchange:k.f.debounce((function(){t.intro.instance.refresh(!0)}),10)}),new k.a({step:++e,element:null,intro:"intro.designer_18",action:function(){var e=this;return t.setCanvas({width:480,height:360}).then((function(){return new Promise((function(n){var i=Object(k.c)(".rg-overlay");t.zoom(-.5),t.intro.instance._introItems[e.step-1].element=i,t.intro.target=i,setTimeout(n,250)}))}))}})]}),{cleanup:function(){var t=this;return new Promise((function(e){Object(k.e)((function(){return t.intro.target.classList.remove(t.intro.target.getAttribute("data-rem"))})),Object(k.e)((function(){return t.$refs.context.hide()})),Object(k.e)((function(){return t.discharge(4)})),e()}))},activateItem:function(t,e){"string"==typeof e&&(t.classList.add(e),t.setAttribute("data-rem",e)),this.intro.target=t}}),y=n(497),_=n(163),P=n(4),x=Math.max,S=Math.min,T=Math.abs;function $(){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.Fabric.resolve();case 2:return e=t.sent,w||(w=e.util.createClass(e.Rect,P.cropzone)),t.abrupt("return",new w({fill:"rgba(255,255,255,.3)",hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,strokeWidth:0,left:-10,top:-10,width:1,height:1}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E={computed:{withShiftKey:function(){return this.$store.state.canvas.shiftKey}},data:function(){return{cropedObject:null,cropzone:null,startX:null,startY:null,ratio:null}},methods:{setCropControls:function(){this.cropzone.customiseControls({mtr:{action:null,cursor:null},mb:{action:null,cursor:null},mr:{action:null,cursor:null},mt:{action:null,cursor:null},bl:{action:null,cursor:null},br:{action:null,cursor:null},tr:{action:this.cropEnd.bind(this),cursor:"pointer"},tl:{action:this.cropCancel.bind(this),cursor:"pointer"}}),this.cropzone.customiseCornerIcons({settings:{borderColor:"#0094dd",cornerBackgroundColor:"#0094dd",cornerShape:"rect",cornerPadding:5,cornerSize:15},mtr:{icon:_.blank},mt:{icon:_.blank},mb:{icon:_.blank},mr:{icon:_.blank},bl:{icon:_.blank},br:{icon:_.blank},tl:{icon:_.close},tr:{icon:_.check}})},releaseCrop:function(){var t=this.cropedObject.setCoords();if(!this.cropzone||!this.cropzone.isValid()||!this.cropzone.intersectsWithObject(t))return Promise.reject();var e=t.getBoundingRect(!0),n=e.left,i=e.top,o=e.width,r=e.height,s=this.cropzone.getScaledHeight(),c=this.cropzone.getScaledWidth(),a=this.cropzone.get("left"),u=this.cropzone.get("top"),l=x(a-n,0),h=x(u-i,0),d=S(i>u?u+s-i:s,r-h),f=S(n>a?a+c-n:c,o-l),p=d/2,m=f/2;return new Promise((function(e){return e({src:t.toDataURL({left:l,top:h,width:f,height:d}),originX:"center",originY:"center",left:x(a,n)+m,top:x(u,i)+p,height:d,width:f})}))},calcRectDimensionFromPoint:function(t,e){var n=this.canvas.getZoom(),i=this.canvas.getHeight()/n,o=this.canvas.getWidth()/n,r=this.startX,s=this.startY,c=x(0,S(t,r)),a=x(0,S(e,s)),u=x(r,S(t,o))-c,l=x(s,S(e,i))-a;return this.withShiftKey?(u=l/this.ratio,r>=t&&(c=r-u),s>=e&&(a=s-l)):this.ratio=l/u,{left:c,top:a,width:u,height:l}},setZone:function(t){var e=t.left,n=t.top,i=t.width,o=t.height;this.cropzone.set({left:e,top:n,height:o,width:i}).setCoords(),this.canvas.calcOffset().renderAll()},setEvented:function(t){this.canvas.forEachObject((function(e){e.evented=t}))},checkObject:function(t){var e=null;switch(!0){case!t:e="select_croped_object";break;case"activeSelection"===t.type:case"image"!==t.type:e="select_single_object"}return e},cropInset:function(){var t=this;return Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.fixedCursor="crosshair",t.canvas.defaultCursor="crosshair",t.canvas.selection=!1,e.next=5,$();case 5:t.cropzone=e.sent,t.canvas.add(t.cropzone),t.setCropControls(),t.canvas.on({"object:scaling":t.onObjectScaling,"object:moving":t.onObjectMoving,"mouse:down":t.onMouseDown});case 9:case"end":return e.stop()}}),e)})))()},cropReset:function(){this.fixedCursor=null,this.canvas.defaultCursor="default",this.canvas.selection=!0,this.canvas.off({"object:scaling":this.onObjectScaling,"object:moving":this.onObjectMoving,"mouse:down":this.onMouseDown}),this.canvas.remove(this.cropzone),this.cropzone=null},cropStart:function(){var t=this;return Object(o.a)(s.a.mark((function e(){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cropzone){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=t.canvas.getActiveObject(),!(n=t.checkObject(i))){e.next=6;break}return t.$bus.$emit("snack",{content:"graph.".concat(n),color:"warning"}),e.abrupt("return",!1);case 6:return t.unbindStateHandler(),t.setEvented(!1),e.next=10,t.cropInset();case 10:return t.cropedObject=i,e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})))()},cropEnd:function(){var t=this;this.releaseCrop().then((function(e){t.canvas.remove(t.cropedObject),t.cropReset(),t.bindStateHandler(),t.createImage(e,!1,(function(e){t.setActive(e),t.selectedObjects()}))})).catch((function(){t.cropReset(),t.bindStateHandler()})).finally((function(){t.setEvented(!0),t.$emit("crop:end")}))},cropCancel:function(){var t=this;return this.$nextTick().then((function(){t.cropReset(),t.bindStateHandler(),t.toActive(t.cropedObject),t.selectedObjects()})).finally((function(){t.setEvented(!0),t.$emit("crop:reset")}))},onObjectScaling:function(t){var e=t.target;if(e===this.cropzone){var n=this.canvas.getZoom(),i=this.canvas.getHeight()/n,o=this.canvas.getWidth()/n,r=e.left,s=e.top,c=e.left+e.getScaledWidth(),a=e.top+e.getScaledHeight();(r<0||c>o||s<0||a>i)&&(e.scaleX=this.lastScaleX||1,e.scaleY=this.lastScaleY||1,r<0&&(e.left=0),s<0&&(e.top=0)),e.getScaledWidth()<1&&e.scaleToWidth(1,!0),e.getScaledHeight()<1&&e.scaleToHeight(1,!0),this.lastScaleX=e.scaleX,this.lastScaleY=e.scaleY}},onObjectMoving:function(t){var e=t.target;if(e===this.cropzone){var n=this.canvas.getZoom(),i=this.canvas.getHeight(),o=this.canvas.getWidth(),r=e.getScaledHeight(),s=e.getScaledWidth(),c=e.left,a=e.top,u=i/n-r,l=o/n-s;e.left=x(0,S(c,l)),e.top=x(0,S(a,u))}},onMouseDown:function(t){var e=t.target,n=t.e;if(!n.shiftKey&&e!==this.cropzone){var i=this.canvas.getPointer(n),o=i.x,r=i.y;this.startX=o,this.startY=r,this.canvas.discardActiveObject(n),this.canvas.setActiveObject(this.cropzone).bringToFront(this.cropzone),this.canvas.on({"mouse:move":this.onMouseMove,"mouse:up":this.onMouseUp})}},onMouseMove:function(t){var e=t.e;if(null!==this.startX){var n=this.canvas.getPointer(e),i=n.x,o=n.y;T(i-this.startX)+T(o-this.startY)>10&&this.setZone(this.calcRectDimensionFromPoint(i,o))}},onMouseUp:function(){this.canvas.off({"mouse:move":this.onMouseMove,"mouse:up":this.onMouseUp}),this.startX=null,this.startY=null}}}}}]);