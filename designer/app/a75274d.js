(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{107:function(t,e,n){"use strict";n.r(e);var r=n(314);n.d(e,"brushesUtils",(function(){return r.brushesUtils}));var i=n(315);n.d(e,"patternBrush",(function(){return i.createBrush}));var s=n(316);n.d(e,"circleBrush",(function(){return s.createBrush}));var o=n(317);n.d(e,"pencilBrush",(function(){return o.createBrush}));var a=n(318);n.d(e,"sprayBrush",(function(){return a.createBrush}))},149:function(t,e,n){"use strict";n.r(e),n.d(e,"rgbToHex",(function(){return i})),n.d(e,"rgb2hex",(function(){return s})),n.d(e,"hex2rgb",(function(){return o})),n.d(e,"rgbToHsl",(function(){return a})),n.d(e,"hslToRgb",(function(){return c}));n(32),n(3),n(58),n(488),n(24),n(67);var r=function(t){return("0"+parseInt(t).toString(16)).slice(-2)};function i(t,e,n){if(t>255||e>255||n>255)throw new Error("Invalid color component");return"#"+(t<<16|e<<8|n).toString(16).padStart(6,"0")}function s(t){return t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i),"#"+r(t[1])+r(t[2])+r(t[3])}function o(t){if("#"===t[0]&&(t=t.substr(1)),3===t.length){var e=/^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(t).slice(1);t="";for(var n=0;n<3;n++)t+=e[n]+e[n]}var r=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(t).slice(1);return{r:parseInt(r[0],16),g:parseInt(r[1],16),b:parseInt(r[2],16),a:255}}function a(t,e,n){t/=255,e/=255,n/=255;var r=Math.max(t,e,n),i=Math.min(t,e,n),s=r-i,o=(i+r)/2,a=0,c=0;return 0!==s&&(a=t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4,a/=6,c=o>.5?s/(2-r-i):s/(r+i)),[a,c,o]}function c(t,e,n){var r,i,s=[];if(0===e)s=[r=i=255*n+.5|0,r,i];else for(var o,a=n<=.5?n*(e+1):n+e-n*e,c=2*n-a,u=t+1/3,h=0;h<3;h++)u<0?u+=1:u>1&&(u-=1),o=u<1/6?c+(a-c)*u*6:u<.5?a:u<2/3?c+(a-c)*(2/3-u)*6:c,s[h]=255*o+.5|0,u-=1/3;return s}},188:function(t,e,n){"use strict";n.r(e),n.d(e,"drawers",(function(){return l}));var r=n(235);n.d(e,"DRectangle",(function(){return r.DRectangle}));var i=n(236);n.d(e,"DTriangle",(function(){return i.DTriangle}));var s=n(237);n.d(e,"DPolyline",(function(){return s.DPolyline}));var o=n(238);n.d(e,"DEllipse",(function(){return o.DEllipse}));var a=n(239);n.d(e,"DImage",(function(){return a.DImage}));var c=n(65);n.d(e,"Shape",(function(){return c.Shape}));var u=n(240);n.d(e,"DLine",(function(){return u.DLine}));var h=n(241);n.d(e,"DText",(function(){return h.DText}));var l=[a.DImage,s.DPolyline,u.DLine,r.DRectangle,i.DTriangle,o.DEllipse,h.DText]},234:function(t,e,n){"use strict";n.r(e),n.d(e,"_distort",(function(){return i})),n.d(e,"distort",(function(){return s})),n.d(e,"toBlob",(function(){return o}));n(51),n(3);var r=n(158),i=Object(r.debounce)((function(t){var e=t.canvas,n=t.resolve,r=function(t){return{width:1590*t,height:530*t}},i=function(t){return function(){return new Promise(function(t){return function(e){t(),setTimeout(e,4)}}(t))}};Promise.resolve().then(i((function(){return e.setZoom(1.1).setDimensions(r(1.1))}))).then(i((function(){return e.setZoom(.9).setDimensions(r(.9))}))).then((function(){e.setZoom(1).setDimensions(r(1))})).then((function(){e.requestRenderAll()})).then(n)}),0);function s(t){return new Promise((function(e){return i({canvas:t,resolve:e})}))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise((function(r){return t.toBlob(r,e,n)}))}},235:function(t,e,n){"use strict";n.r(e),n.d(e,"DRectangle",(function(){return h}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(3),n(37));function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(s.a)(n,t);var e=u(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"rect"})}return Object(i.a)(n,[{key:"make",value:function(t,e,n,r){var i=t.x,s=t.y;this.origX=i,this.origY=s;var o={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0};return c.Fabric.resolve().then((function(t){return new t.Rect(Object.assign({shadow:new t.Shadow(o),fill:"transparent",left:i,top:s,height:r,width:n},e))}))}},{key:"resize",value:function(t,e,n){var r=e.x,i=e.y;return this.equal(t,{x:r,y:i},n)}}],[{key:"fromObject",value:function(t){return c.Fabric.resolve().then((function(e){return new Promise((function(n){e.Rect.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},236:function(t,e,n){"use strict";n.r(e),n.d(e,"DTriangle",(function(){return h}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(3),n(37));function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(s.a)(n,t);var e=u(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"triangle"})}return Object(i.a)(n,[{key:"make",value:function(t,e,n,r){var i=t.x,s=t.y;this.origX=i,this.origY=s;var o={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0};return c.Fabric.resolve().then((function(t){return new t.Triangle(Object.assign({shadow:new t.Shadow(o),fill:"transparent",left:i,top:s,height:r,width:n},e))}))}},{key:"resize",value:function(t,e,n){var r=e.x,i=e.y;return this.equal(t,{x:r,y:i},n)}}],[{key:"fromObject",value:function(t){return c.Fabric.resolve().then((function(e){return new Promise((function(n){e.Triangle.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},237:function(t,e,n){"use strict";n.r(e),n.d(e,"DPolyline",(function(){return h}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(3),n(37));function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(s.a)(n,t);var e=u(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"polyline"})}return Object(i.a)(n,[{key:"make",value:function(t,e){var n=t.x,r=t.y,i={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0};return c.Fabric.resolve().then((function(t){return new t.Polyline([{x:n,y:r}],Object.assign({shadow:new t.Shadow(i),fill:"transparent"},e))}))}},{key:"resize",value:function(t,e){var n=e.x,r=e.y;return c.Fabric.resolve().then((function(e){t.points.push(new e.Point(n,r));var i=t._calcDimensions(),s=i.left,o=i.top,a=i.width,c=i.height,u=new e.Point(s+a/2,o+c/2);return t.set({left:s,top:o,height:c,width:a,dirty:!0,pathOffset:u}).setCoords()}))}}],[{key:"fromObject",value:function(t){return c.Fabric.resolve().then((function(e){return new Promise((function(n){e.Polyline.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},238:function(t,e,n){"use strict";n.r(e),n.d(e,"DEllipse",(function(){return h}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(3),n(37));function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(s.a)(n,t);var e=u(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"ellipse"})}return Object(i.a)(n,[{key:"make",value:function(t,e,n,r){var i=t.x,s=t.y;this.origX=i,this.origY=s;var o={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0};return c.Fabric.resolve().then((function(t){return new t.Ellipse(Object.assign({shadow:new t.Shadow(o),fill:"transparent",left:i,top:s,rx:n,ry:r},e))}))}},{key:"resize",value:function(t,e,n){var r,i,s,o,a=e.x,c=e.y;return r=this.origX>a?"right":"left",i=this.origY>c?"bottom":"top",s=Math.abs(a-t.left)/2,o=Math.abs(c-t.top)/2,n&&(s=o=Math.max(s,o)),new Promise((function(e){return e(t.set({originX:r,originY:i,rx:s,ry:o}).setCoords())}))}}],[{key:"fromObject",value:function(t){return c.Fabric.resolve().then((function(e){return new Promise((function(n){e.Ellipse.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},239:function(t,e,n){"use strict";n.r(e),n.d(e,"DImage",(function(){return l}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(256),n(3),n(24),n(67),n(597)),u=n(37);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var l=function(t){Object(s.a)(n,t);var e=h(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"image"})}return Object(i.a)(n,[{key:"make",value:function(t,e){var n=this,r=t.x,i=t.y,s=e.img,o=s.src,a=s.width,c=s.height;return this.origX=r,this.origY=i,this.hypot=Math.hypot(a,c),u.Fabric.resolve().then((function(t){return new Promise((function(e){var s=new t.Shadow({color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0}),u=10/n.hypot,h=u,l=u;t.Image.fromURL(o,(function(t){e(t.set({scaleX:h,scaleY:l,shadow:s,left:r,top:i,height:c,width:a}))}))}))}))}},{key:"resize",value:function(t,e){var n=e.x,r=e.y,i=this.origin(n,r),s=i.originX,o=i.originY,a=this.scale(n,r),c=a.scaleX,u=a.scaleY;return new Promise((function(e){return e(t.set({originX:s,originY:o,scaleX:c,scaleY:u}).setCoords())}))}},{key:"apply",value:function(){return new Promise((function(t,e){var n=document.createElement("input");n.accept="image/*",n.multiple=!1,n.onerror=e,n.type="file",n.onchange=function(n){var r=n.target.files[0];if(r.type.match("image/*"))return Object(c.a)(r).then((function(n){var r=n.target.result,i=new Image;i.onload=function(e){var n=e.target;t(n)},i.onerror=e,i.src=r}));e()},n.click()}))}}],[{key:"fromObject",value:function(t){return u.Fabric.resolve().then((function(e){return new Promise((function(n){e.Image.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},240:function(t,e,n){"use strict";n.r(e),n.d(e,"DLine",(function(){return d}));n(77);var r=n(1),i=n(10),s=n(11),o=n(46),a=n(39),c=n(28),u=(n(3),n(0)),h=n.n(u),l=n(37);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}var d=function(t){Object(o.a)(c,t);var e,n,a=f(c);function c(t){return Object(i.a)(this,c),a.call(this,{drawingMode:t,type:"line"})}return Object(s.a)(c,[{key:"make",value:(n=Object(r.a)(h.a.mark((function t(e,n){var r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.x,i=e.y,this.origX=r,this.origY=i,s={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0},t.abrupt("return",l.Fabric.resolve().then((function(t){return new t.Line([r,i],Object.assign({shadow:new t.Shadow(s)},n))})));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"adjust",value:function(t,e,n){if(!n)return{x2:t,y2:e};var r,i,s,o;switch(s=t-this.origX,o=e-this.origY,i=(i=180*Math.atan2(o,s)/Math.PI)<0?360+i:i,!0){case i>0&&i<22.5||i>337.5:case i>157.5&&i<202.5:t=this.origX+s,e=this.origY;break;case i>22.5&&i<67.5:case i>205.5&&i<247.5:r=Math.max(s,o),t=this.origX+r,e=this.origY+r;break;case i>112.5&&i<157.5:r=Math.max(s,o),t=this.origX-r,e=this.origY+r;break;case i>292.5&&i<337.5:r=Math.max(s,o),t=this.origX+r,e=this.origY-r;break;case i>67.5&&i<112.5:case i>247.5&&i<292.5:e=this.origY+o,t=this.origX}return{x2:t,y2:e}}},{key:"resize",value:function(t,e){var n=this,r=e.x,i=e.y,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(e){return e(t.set(n.adjust(r,i,s)).setCoords())}))}}],[{key:"fromObject",value:(e=Object(r.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.Fabric.resolve().then((function(t){return new Promise((function(n){t.Line.fromObject(e,n)}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),c}(n(65).Shape)},241:function(t,e,n){"use strict";n.r(e),n.d(e,"DText",(function(){return h}));n(77);var r=n(10),i=n(11),s=n(46),o=n(39),a=n(28),c=(n(3),n(88),n(256),n(37));function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(a.a)(t);if(e){var i=Object(a.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(s.a)(n,t);var e=u(n);function n(t){return Object(r.a)(this,n),e.call(this,{drawingMode:t,type:"c-text"})}return Object(i.a)(n,[{key:"make",value:function(t,e){var n=this,r=t.x,i=t.y,s={color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0};return c.Fabric.resolve().then((function(t){return new Promise((function(o){(e=Object.assign({shadow:new t.Shadow(s),fontFamily:n.fontFamily,textFill:"rgba(0,0,0,1)",text:"Tap and type",textAlign:"left",fontSize:40,left:r,top:i},e)).shadow.color=e.fill;var a=new t.CText(e),c=Math.hypot(a.width,a.height),u=10/c,h=u,l=u;n.hypot=c,n.origX=r,n.origY=i,o(a.set({scaleX:h,scaleY:l}))}))}))}},{key:"resize",value:function(t,e){var n=e.x,r=e.y,i=this.origin(n,r),s=i.originX,o=i.originY,a=this.scale(n,r),c=a.scaleX,u=a.scaleY;return new Promise((function(e,n){t?e(t.set({originX:s,originY:o,scaleX:c,scaleY:u}).setCoords()):n()}))}},{key:"apply",value:function(t){return this.fontFamily=t.family,Promise.resolve({})}}],[{key:"fromObject",value:function(t){return c.Fabric.resolve().then((function(e){return new Promise((function(n){e.CText.fromObject(t,n)}))}))}}]),n}(n(65).Shape)},304:function(t,e,n){"use strict";function r(t,e){for(var n=0,r=0;r<t.length;r+=4)0!==t[r+3]&&(t[r]+t[r+1]+t[r+2])/3>e&&n++;return n}function i(t,e){for(var n=0,r=0;r<t.length;r+=4)0!==t[r+3]&&(t[r]+t[r+1]+t[r+2])/3<e&&n++;return n}function s(t){var e,n,s,o,a=t.getImageData(0,0,t.canvas.width,t.canvas.height),c=a.data,u=c.length/4;e=r(c,240),n=1,s=!1;for(var h=0;h<10&&(100*e/u>=n&&(s=!0),!0!==s);h++){for(var l=0;l<c.length;l+=4)if(0!==c[l+3])for(var f=0;f<3;f++)c[o=l+f]<10||(c[o]*=1.1,c[o]=Math.round(c[o]),c[o]>255&&(c[o]=255));e=r(c,240)}e=i(c,30),n=.5,s=!1;for(var d=0;d<10&&(100*e/u>=n&&(s=!0),!0!==s);d++){for(var p=0;p<c.length;p+=4)if(0!==c[p+3])for(var v=0;v<3;v++)c[o=p+v]>240||(c[o]-=1.1*(255-c[o])-(255-c[o]),c[o]=Math.round(c[o]));e=i(c,30)}return a}n.r(e),n.d(e,"getAdjustData",(function(){return s}))},305:function(t,e,n){"use strict";n.r(e),n.d(e,"brightnessContrast",(function(){return o})),n.d(e,"colorTransformFilter",(function(){return a})),n.d(e,"hslAdjustment",(function(){return c})),n.d(e,"doCorrections",(function(){return u}));var r=n(4),i=n(80),s=function(t){var e=t.width,n=t.height;return new ImageData(e,n)};function o(t,e,n){var r=s(t);return e=(e+100)/100,n=(n+100)/100,Object(i.mapRGB)(t,r,(function(t){return(t=((t*=e)-127.5)*n+127.5)+.5|0})),r}function a(t,e,n,r){for(var i,o=s(t),a=0;a<t.data.length;a+=4)o.data[a]=(i=t.data[a]+e)>255?255:i<0?0:i,o.data[a+1]=(i=t.data[a+1]+n)>255?255:i<0?0:i,o.data[a+2]=(i=t.data[a+2]+r)>255?255:i<0?0:i,o.data[a+3]=(i=t.data[a+3]+1)>255?255:i<0?0:i;return o}function c(t,e,n,i){e/=360,n/=100,i/=100;for(var o,a,c,u,h,l=s(t),f=0;f<t.data.length;f+=4){for(o=(u=Object(r.rgbToHsl)(t.data[f],t.data[f+1],t.data[f+2]))[0]+e;o<0;)o+=1;for(;o>1;)o-=1;(a=u[1]+u[1]*n)<0?a=0:a>1&&(a=1),c=u[2],i>0?c+=(1-c)*i:i<0&&(c+=c*i),h=Object(r.hslToRgb)(o,a,c),l.data[f]=h[0],l.data[f+1]=h[1],l.data[f+2]=h[2],l.data[f+3]=t.data[f+3]}return l}function u(t,e){var n=e.brightness,r=e.contrast,i=e.r,s=e.g,u=e.b,h=e.h,l=e.s,f=e.l,d=t.getImageData(0,0,t.canvas.width,t.canvas.height),p=n||r?o(d,n,r):d;return p=i||s||u?a(p,i,s,u):p,h||l||f?c(p,h,l,f):p}},306:function(t,e,n){"use strict";n.r(e),n.d(e,"getDecreaseData",(function(){return i}));n(94),n(32);var r=function(t,e){return Math.round(.2126*t[e]+.7152*t[e+1]+.0722*t[e+2])};function i(t,e){var n=e.colors,i=e.greyscale,s=void 0!==i&&i,o=t.canvas,a=o.width,c=o.height,u=document.createElement("canvas"),h=u.getContext("2d"),l=t.getImageData(0,0,a,c),f=l.data,d=[],p=Math.ceil(a/10),v=Math.ceil(c/10);u.height=c,u.width=a,h.drawImage(t.canvas,0,0,p,v);var m=h.getImageData(0,0,p,v).data;h.clearRect(0,0,a,c);for(var g=0;g<m.length;g+=4)0!==m[g+3]&&d.push([m[g],m[g+1],m[g+2],r(m,g)]);for(var b=[],w=0;w<256;w++)b[w]=0;for(var x=0;x<d.length;x++)b[d[x][3]]++;for(var y=30;y<300&&!(d.length<=n);y+=30)for(var j=0;j<d.length&&!(d.length<=n);j++){for(var _=!0,k=0;k<d.length&&!(d.length<=n);k++)if(j!==k&&Math.abs(d[j][0]-d[k][0])+Math.abs(d[j][1]-d[k][1])+Math.abs(d[j][2]-d[k][2])<y){if(!(b[d[j][3]]>b[d[k][3]])){_=!1;break}d.splice(k,1),k--}!1===_&&(d.splice(j,1),j--)}for(var O,C=(d=d.slice(0,n)).length,P=0;P<c;P++)for(var T,B,M,D=0;D<a;D++)if(0!==f[(O=P*a*4+4*D)+3]){T=999999,M=0;for(var S=0;S<C;S++){var I=Math.abs(d[S][0]-f[O])+Math.abs(d[S][1]-f[O+1])+Math.abs(d[S][2]-f[O+2]);I<T&&(T=I,M=S)}f[O]=d[M][0],f[O+1]=d[M][1],f[O+2]=d[M][2],!0===s&&(B=r(f,O),f[O]=B,f[O+1]=B,f[O+2]=B)}return l}},307:function(t,e,n){"use strict";n.r(e),n.d(e,"replaceColor",(function(){return i}));var r=n(4);function i(t,e){for(var n=e.target,i=e.replacement,s=e.power,o=e.alpha,a=e.mode,c=t.getImageData(0,0,t.canvas.width,t.canvas.height),u=Object(r.hex2rgb)(n),h=Object(r.rgbToHsl)(u.r,u.g,u.b),l=Object(r.hslToRgb)(h[0],h[1],.5),f=Object(r.hex2rgb)(i),d=Object(r.rgbToHsl)(f.r,f.g,f.b),p=0;p<c.data.length;p+=4)if(0!==c.data[p+3])if("Simple"===a){if((Math.abs(c.data[p]-u.r)+Math.abs(c.data[p+1]-u.g)+Math.abs(c.data[p+2]-u.b))/3>s)continue;c.data[p]=f.r,c.data[p+1]=f.g,c.data[p+2]=f.b,o<255&&(c.data[p+3]=o)}else{var v=Object(r.rgbToHsl)(c.data[p],c.data[p+1],c.data[p+2]),m=Object(r.hslToRgb)(v[0],v[1],.5);if((Math.abs(m[0]-l[0])+Math.abs(m[1]-l[1])+Math.abs(m[2]-l[2]))/3>s)continue;var g=Object(r.hslToRgb)(d[0],d[1],v[2]*d[2]);c.data[p]=g[0],c.data[p+1]=g[1],c.data[p+2]=g[2],o<255&&(c.data[p+3]=o)}return c}},308:function(t,e,n){"use strict";n.r(e),n.d(e,"colorToAlpha",(function(){return i}));var r=n(4);function i(t,e){var n=e.color;n=Object(r.hex2rgb)(n);for(var i=t.getImageData(0,0,t.canvas.width,t.canvas.height),s=0;s<i.data.length;s+=4)if(0!==i.data[s+3]){var o=Math.abs(i.data[s]-n.r)+Math.abs(i.data[s+1]-n.g)+Math.abs(i.data[s+2]-n.b)/3;i.data[s]=Math.ceil((i.data[s]-n.r*(1-i.data[s+3]/255))/(i.data[s+3]/255)),i.data[s+1]=Math.ceil((i.data[s+1]-n.g*(1-i.data[s+3]/255))/(i.data[s+3]/255)),i.data[s+2]=Math.ceil((i.data[s+2]-n.b*(1-i.data[s+3]/255))/(i.data[s+3]/255)),i.data[s+3]=Math.round(o)}return i}},309:function(t,e,n){"use strict";n.r(e),n.d(e,"colorZoom",(function(){return i}));var r=n(35);function i(t,e){for(var n,i=e.zoom,s=e.center,o=t.getImageData(0,0,t.canvas.width,t.canvas.height),a=0;a<o.data.length;a+=4)if(0!==o.data[a+3]){n=Math.round(.2126*o.data[a]+.7152*o.data[a+1]+.0722*o.data[a+2]);for(var c,u=0;u<3;u++)c=a+u,n>s?o.data[c]+=(o.data[c]-s)*i:n<s&&(o.data[c]-=(s-o.data[c])*i),o.data[c]=Object(r.rclamp)(o.data[c])}return o}},314:function(t,e,n){"use strict";n.r(e),n.d(e,"fabric",(function(){return r})),n.d(e,"brushesUtils",(function(){return i}));n(3),n(14),n(15);var r=Promise.all([n.e(317),n.e(250)]).then(n.t.bind(null,741,7)).then((function(t){return t.default||t})).then(i);function i(t){var e=t.fabric;return e.Point.prototype.normalize=function(t){null==t&&(t=1);var e=this.distanceFrom({x:0,y:0});return e>0&&(this.x=this.x/e*t,this.y=this.y/e*t),this},e.Point.prototype.angleBetween=function(t){return Math.atan2(this.x-t.x,this.y-t.y)},e.util.getRandom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.random()*(t-e)+e},e.util.clamp=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>e?e:t<n?n:t},e}},315:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrush",(function(){return r}));n(88),n(3);function r(t){var e=t.fabric;return e.PatternBrush=e.util.createClass(e.BaseBrush,{color:"#000000",width:30,blank:null,_points:[],_min:null,_max:null,initialize:function(t){var e=this;t.canvas&&(this.canvas=t.canvas,this.context=t,t.canvas.on("before:render",(function(){e._max&&e._render()})),this.newBlank())},extremum:function(){var t=this._points[this._points.length-1],e=t.scalarSubtract(this.width/2),n=t.scalarAdd(this.width/2);this._min||(this._min=e),this._max||(this._max=n),this._min=this._min.min(e),this._max=this._max.max(n)},drawBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.cnv;r.clearRect(0,0,e,n),r.drawImage(a,0,0,o,s,0,0,e,n)},toBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.ctx;r.closePath(),a.clearRect(0,0,o,s),a.drawImage(r.canvas,0,0,e,n,0,0,o,s)},newBlank:function(){var t,e,n=document.createElement("canvas"),r=n.getContext("2d"),i=this.canvas.getZoom();n.height=e=this.canvas.height/i,n.width=t=this.canvas.width/i,r.lineJoin=r.lineCap="round",this.blank={clear:function(){return r.clearRect(0,0,t,e)},height:e,width:t,cnv:n,ctx:r}},getPattern:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n=this.canvas.contextTop;return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),n.createPattern(t,"repeat")},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render(this.canvas.contextTop),this.extremum())},onMouseMove:function(t,e){this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&this._points.length>1&&(this.canvas.clearContext(this.canvas.contextTop),this._render(this.canvas.contextTop),this.extremum())},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.toBlank(),!1)},_prepareForDrawing:function(t){var n=new e.Point(t.x,t.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){var t=this.canvas.contextTop;t.strokeStyle=this.getPattern(),t.lineCap=this.strokeLineCap,t.lineWidth=this.width,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this._points=[]},_captureDrawingPath:function(t){return this._addPoint(new e.Point(t.x,t.y))},_render:function(t){if(this.drawBlank(),t){var e=this._points[0],n=this._points[1];if(2===this._points.length&&e.eq(n)){var r=this.width/1e3;e.x-=r,n.x+=r}this._saveAndTransform(t),t.beginPath(),t.moveTo(e.x,e.y);for(var i,s=1;s<this._points.length;s++)i=e.midPointFrom(n),t.quadraticCurveTo(e.x,e.y,i.x,i.y),e=this._points[s],n=this._points[s+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}},finalize:function(t){t&&this.canvas.insertTo(t),this.canvas.renderAll(),this.blank.clear(),this._points=[],this._min=null,this._max=null},perform:function(){var t=this;return new Promise((function(n){if(t._min&&t._max){var r=t._min.x,i=t._min.y,s=t._max.y-i,o=t._max.x-r,a={left:r,top:i,width:o,height:s,scaleX:1,scaleY:1,angle:0},c=document.createElement("canvas"),u=c.getContext("2d");c.height=s,c.width=o,u.drawImage(t.blank.cnv,r,i,o,s,0,0,o,s),a.src=c.toDataURL("image/png",1),e.Image.fromObject(a,n)}}))},onError:function(){try{this.context.$bus.$emit("snack",{content:"Internal error",color:"error"})}catch(t){}},apply:function(t){(t?this.perform():Promise.resolve()).then(this.finalize.bind(this)).catch(this.onError.bind(this))}}),e}},316:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrush",(function(){return r}));n(88),n(3);function r(t){var e=t.fabric;return e.CircleBrush=e.util.createClass(e.BaseBrush,{color:"#000000",width:30,blank:null,_point:null,_min:null,_max:null,initialize:function(t){var e=this;t.canvas&&(this.canvas=t.canvas,this.context=t,t.canvas.on("before:render",(function(){e._point&&e._render()})),this.newBlank())},onMouseDown:function(t,n){var r=n.e;this.canvas._isMainEvent(r)&&(this._point=new e.Point(t.x,t.y),this._render(this.canvas.contextTop),this.extremum())},onMouseMove:function(t,n){var r=n.e;this.canvas._isMainEvent(r)&&(this._point=new e.Point(t.x,t.y),this._render(this.canvas.contextTop),this.extremum())},onMouseUp:function(t){t.e},extremum:function(){var t=this._point.scalarSubtract(this.width),e=this._point.scalarAdd(this.width);this._min||(this._min=t),this._max||(this._max=e),this._min=this._min.min(t),this._max=this._max.max(e)},drawBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.cnv;r.clearRect(0,0,e,n),r.drawImage(a,0,0,o,s,0,0,e,n)},newBlank:function(){var t,e,n=document.createElement("canvas"),r=n.getContext("2d"),i=this.canvas.getZoom();n.height=e=this.canvas.height/i,n.width=t=this.canvas.width/i,r.lineJoin="round",r.lineCap="round",this.blank={clear:function(){return r.clearRect(0,0,t,e)},height:e,width:t,cnv:n,ctx:r}},_render:function(t){if(!t)return this.drawBlank();this.blank.ctx.globalAlpha=Math.random(),this.blank.ctx.fillStyle=this.color,this.blank.ctx.beginPath(),this.blank.ctx.arc(this._point.x,this._point.y,e.util.getRandomInt(5,this.width),0,2*Math.PI,!1),this.blank.ctx.fill(),this.drawBlank()},finalize:function(t){t&&this.canvas.insertTo(t),this.canvas.renderAll(),this.blank.clear(),this._point=null,this._min=null,this._max=null},perform:function(){var t=this;return new Promise((function(n){if(t._min&&t._max){var r=t._min.x,i=t._min.y,s=t._max.y-i,o=t._max.x-r,a={left:r,top:i,width:o,height:s,scaleX:1,scaleY:1,angle:0},c=document.createElement("canvas"),u=c.getContext("2d");c.height=s,c.width=o,u.drawImage(t.blank.cnv,r,i,o,s,0,0,o,s),a.src=c.toDataURL("image/png",1),e.Image.fromObject(a,n)}}))},onError:function(){try{this.context.$bus.$emit("snack",{content:"Internal error",color:"error"})}catch(t){}},apply:function(t){(t?this.perform():Promise.resolve()).then(this.finalize.bind(this)).catch(this.onError.bind(this))}}),e}},317:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrush",(function(){return r}));n(3);function r(t){var e=t.fabric;return e.PencilBrushMod=e.util.createClass(e.BaseBrush,{color:"#000000",width:30,blank:null,_points:[],_min:null,_max:null,initialize:function(t){var e=this;t.canvas&&(this.canvas=t.canvas,this.context=t,t.canvas.on("before:render",(function(){e._max&&e._render()})),this.newBlank())},extremum:function(){var t=this._points[this._points.length-1],e=t.scalarSubtract(this.width/2),n=t.scalarAdd(this.width/2);this._min||(this._min=e),this._max||(this._max=n),this._min=this._min.min(e),this._max=this._max.max(n)},drawBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.cnv;r.clearRect(0,0,e,n),r.drawImage(a,0,0,o,s,0,0,e,n)},toBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.ctx;r.closePath(),a.clearRect(0,0,o,s),a.drawImage(r.canvas,0,0,e,n,0,0,o,s)},newBlank:function(){var t,e,n=document.createElement("canvas"),r=n.getContext("2d"),i=this.canvas.getZoom();n.height=e=this.canvas.height/i,n.width=t=this.canvas.width/i,this.blank={clear:function(){return r.clearRect(0,0,t,e)},height:e,width:t,cnv:n,ctx:r}},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render(this.canvas.contextTop),this.extremum())},onMouseMove:function(t,e){this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&this._points.length>1&&(this.canvas.clearContext(this.canvas.contextTop),this._render(this.canvas.contextTop),this.extremum())},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.toBlank(),!1)},_prepareForDrawing:function(t){var n=new e.Point(t.x,t.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){this._setBrushStyles(),this._points=[]},_captureDrawingPath:function(t){return this._addPoint(new e.Point(t.x,t.y))},_render:function(t){if(this.drawBlank(),t){var e=this._points[0],n=this._points[1];if(2===this._points.length&&e.eq(n)){var r=this.width/1e3;e.x-=r,n.x+=r}this._saveAndTransform(t),t.beginPath(),t.moveTo(e.x,e.y);for(var i,s=1;s<this._points.length;s++)i=e.midPointFrom(n),t.quadraticCurveTo(e.x,e.y,i.x,i.y),e=this._points[s],n=this._points[s+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}},finalize:function(t){t&&this.canvas.insertTo(t),this.canvas.renderAll(),this.blank.clear(),this._points=[],this._min=null,this._max=null},perform:function(){var t=this;return new Promise((function(n){if(t._min&&t._max){var r=t._min.x,i=t._min.y,s=t._max.y-i,o=t._max.x-r,a={left:r,top:i,width:o,height:s,scaleX:1,scaleY:1,angle:0},c=document.createElement("canvas"),u=c.getContext("2d");c.height=s,c.width=o,u.drawImage(t.blank.cnv,r,i,o,s,0,0,o,s),a.src=c.toDataURL("image/png",1),e.Image.fromObject(a,n)}}))},onError:function(){try{this.context.$bus.$emit("snack",{content:"Internal error",color:"error"})}catch(t){}},apply:function(t){(t?this.perform():Promise.resolve()).then(this.finalize.bind(this)).catch(this.onError.bind(this))}}),e}},318:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrush",(function(){return r}));n(3);function r(t){var e=t.fabric;return e.SprayBrush=e.util.createClass(e.BaseBrush,{color:"#000000",width:30,blank:null,_point:null,_min:null,_max:null,initialize:function(t){var e=this;if(t.canvas){var n=t.canvas;this.width=n.freeDrawingBrush.width,this.color=n.freeDrawingBrush.color,this.context=t,this.canvas=n,n.on("before:render",(function(){e._point&&e._render()})),this.newBlank()}},onMouseDown:function(t,n){var r=n.e;this.canvas._isMainEvent(r)&&(this._point=new e.Point(t.x,t.y),this._render(this.canvas.contextTop),this.extremum())},onMouseMove:function(t,n){var r=n.e;this.canvas._isMainEvent(r)&&(this._point=new e.Point(t.x,t.y),this._render(this.canvas.contextTop),this.extremum())},onMouseUp:function(t){t.e},extremum:function(){var t=this._point.scalarSubtract(this.width),e=this._point.scalarAdd(this.width);this._min||(this._min=t),this._max||(this._max=e),this._min=this._min.min(t),this._max=this._max.max(e)},drawBlank:function(){var t=this.canvas,e=t.width,n=t.height,r=t.contextTop,i=this.blank,s=i.height,o=i.width,a=i.cnv;r.clearRect(0,0,e,n),r.drawImage(a,0,0,o,s,0,0,e,n)},newBlank:function(){var t,e,n=document.createElement("canvas"),r=n.getContext("2d"),i=this.canvas.getZoom();n.height=e=this.canvas.height/i,n.width=t=this.canvas.width/i,this.blank={clear:function(){return r.clearRect(0,0,t,e)},height:e,width:t,cnv:n,ctx:r}},_render:function(t){if(!t)return this.drawBlank();for(var n=this.width;n--;){var r=e.util.getRandom(0,2*Math.PI),i=e.util.getRandom(0,this.width);this.blank.ctx.fillStyle=this.color,this.blank.ctx.fillRect(this._point.x+i*Math.cos(r),this._point.y+i*Math.sin(r),1,1)}this.drawBlank()},finalize:function(t){t&&this.canvas.insertTo(t),this.canvas.renderAll(),this.blank.clear(),this._point=null,this._min=null,this._max=null},perform:function(){var t=this;return new Promise((function(n){if(t._min&&t._max){var r=t._min.x,i=t._min.y,s=t._max.y-i,o=t._max.x-r,a={left:r,top:i,width:o,height:s,scaleX:1,scaleY:1,angle:0},c=document.createElement("canvas"),u=c.getContext("2d");c.height=s,c.width=o,u.drawImage(t.blank.cnv,r,i,o,s,0,0,o,s),a.src=c.toDataURL("image/png",1),e.Image.fromObject(a,n)}}))},onError:function(){try{this.context.$bus.$emit("snack",{content:"Internal error",color:"error"})}catch(t){}},apply:function(t){(t?this.perform():Promise.resolve()).then(this.finalize.bind(this)).catch(this.onError.bind(this))}}),e}},319:function(t,e,n){"use strict";n.r(e),n.d(e,"Copier",(function(){return s}));var r=n(10),i=n(11),s=(n(3),n(51),n(9),function(){function t(e){Object(r.a)(this,t),this.memorized=null,this.editor=e}return Object(i.a)(t,[{key:"empty",get:function(){return null===this.memorized}},{key:"clone",value:function(t){var e=this;return new Promise((function(n){(t=t.originalTarget||t).clone((function(t){e.memorized=t,n()}))}))}},{key:"clear",value:function(){var t=this;return new Promise((function(e){return setTimeout((function(){t.memorized=null,e()}))}))}},{key:"copy",value:function(t,e){return this.editor.canvas?(this.memorized=null,e||(e=this.editor.canvas.getActiveObject()),e?("function"!=typeof t&&(t=function(){}),this.clone(e).then(t)):Promise.resolve()):Promise.resolve()}},{key:"cut",value:function(){var t=this;return this.editor.leaveEvents(),this.copy((function(){t.editor.deleteSelected((function(){t.editor.canvas.renderAll(),t.editor.restoreEvents(),t.editor.stack("update")}))}))}},{key:"paste",value:function(t){var e=this;return this.memorized?this.clone(this.memorized).then((function(){e.editor.discardActive((function(){e.editor.active=[]})),e.memorized.set({left:e.memorized.left+20,top:e.memorized.top+20}),e.memorized.setCoords(),"function"==typeof e.memorized.setUnique&&(e.memorized=e.memorized.setUnique()),e.memorized._objects&&e.memorized._objects.forEach((function(t){return t.setUnique()})),"number"==typeof t?e.editor.canvas.insertAt(e.memorized,t):e.editor.canvas.insertTo(e.memorized),e.editor.postInsert(e.memorized),e.editor.toActive(e.memorized),e.editor.selectedObjects(),e.editor.canvas.requestRenderAll()})):Promise.resolve()}}]),t}())},320:function(t,e,n){"use strict";n.r(e),n.d(e,"Brush",(function(){return p}));var r,i,s,o,a,c=n(2),u=n(10),h=n(11),l=(n(88),n(34),n(24),n(67),n(82)),f=n(399),d=n(37),p=function(){function t(e){var n;Object(u.a)(this,t),this.defaultBrush=void 0,this.circleBrush=void 0,this.sprayBrush=void 0,this.editor=e,this.resolved=(n={},Object(c.a)(n,t.CIRCLE,!0),Object(c.a)(n,t.PENCIL,!0),Object(c.a)(n,t.PATTERN,!0),Object(c.a)(n,t.SPRAY,!0),Object(c.a)(n,t.ERASE,!0),Object(c.a)(n,t.DESATURATE,!0),Object(c.a)(n,t.SHARPEN,!0),Object(c.a)(n,t.MAGIC,!0),Object(c.a)(n,t.CLONE,!0),Object(c.a)(n,t.BULGE,!0),Object(c.a)(n,t.BLUR,!0),Object(c.a)(n,t.FILL,!0),n),this.state={mode:t.PENCIL,options:{}},this.getOptions()}return Object(h.a)(t,[{key:"on",get:function(){return this.editor.canvas&&this.editor.canvas.isDrawingMode},set:function(t){this.getOptions(),this.onMode(t)}},{key:"mode",get:function(){return this.state.mode},set:function(t){t in this.resolved&&(this.state.mode=t,this.on&&this.onMode(!0))}},{key:"optionsAssign",value:function(t){Object.assign(this.state.options,t)}},{key:"toolsInit",value:function(t){var e=t.blurring,n=t.sharpen,r=e.setFactor.bind(e),i=n.setFactor.bind(n);this.blurFactor=f.a.create(),this.blurFactor.set(r),this.sharpenFactor=f.a.create(),this.sharpenFactor.set(i)}},{key:"getOptions",value:function(){var t=this.editor.$store.state.canvas,e=t.drawerOptions,n=t.scaled,r=e.alpha,i=e.blur,s=e.bulge,o=e.sharp,a=e.soft,c=e.magicThreshold,u=e.fill,h=e.strokeWidth,l=n?n.scale:1;this.state.options={alpha:r,bulge:s,color:u,magic:c,width:h,sharp:o,scale:l,blur:i,soft:a}}},{key:"getDefaultBrush",value:function(){var t=this;return o||(o=function(){return new r.PencilBrushMod(t.editor)}),!this.defaultBrush&&this.editor.canvas&&(this.defaultBrush=o()),this.defaultBrush}},{key:"getCircle",value:function(){var t=this;return s||(s=function(){return new r.CircleBrush(t.editor)}),!this.circleBrush&&this.editor.canvas&&(this.circleBrush=s()),this.circleBrush}},{key:"getSpray",value:function(){var t=this;return a||(a=function(){return new r.SprayBrush(t.editor)}),!this.sprayBrush&&this.editor.canvas&&(this.sprayBrush=a()),this.sprayBrush}},{key:"getPattern",value:function(){var t=this;return i||(i=function(){return new r.PatternBrush(t.editor)}),!this.patternBrush&&this.editor.canvas&&(this.patternBrush=i()),this.patternBrush}},{key:"getCloneBrush",value:function(t,e,n){return{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.clone,width:e,on:t}}},{key:"getBlurBrush",value:function(t,e,n,r){return this.editor.blurring.factor!==r&&this.blurFactor.run(r),{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.blurring,width:e,on:t}}},{key:"getBulgeBrush",value:function(t,e,n,r){return this.editor.bulge.factor=r,{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.bulge,width:e,on:t}}},{key:"getSharpenBrush",value:function(t,e,n,r){return this.editor.sharpen.factor!==r&&this.sharpenFactor.run(r),{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.sharpen,width:e,on:t}}},{key:"getDesaturateBrush",value:function(t,e,n){return{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.desaturator,width:e,on:t}}},{key:"getMagicWandBrush",value:function(t,e,n){return this.editor.magic.currentThreshold=n,{cursor:"default",brush:this.editor.magic,width:e,on:t}}},{key:"getFillBrush",value:function(t,e,n){return(n=n.match(/rgba?\((.*)\)/)[1].split(",").map(parseFloat))[3]=Math.round(255*n[3]),this.editor.filler.color=n,{cursor:Object(l.fillCursor)(),brush:this.editor.filler,width:e,color:n,on:t}}},{key:"getEraserBrush",value:function(t,e,n,r,i){return this.editor.eraser.alpha=r,this.editor.eraser.soft=i,e<5&&(e=5),{cursor:Object(l.circleCursor)(e,n,"rgba(255,255,255,.5)"),brush:this.editor.eraser,width:e,on:t}}},{key:"setOptions",value:function(t){var e=t.strokeWidth,n=t.fill,r=t.magicThreshold,i=t.alpha,s=t.blur,o=t.bulge,a=t.sharp,c=t.soft;this.optionsAssign({sharp:a,width:e,color:n,alpha:i,magic:r,bulge:o,blur:s,soft:c}),this.on&&this.onMode(!0)}},{key:"setScale",value:function(t){var e=t.scale,n=void 0===e?1:e;this.state.options.scale=n,this.on&&this.onMode(!0)}},{key:"onMode",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.editor.canvas){var i=this.state.options,s=i.alpha,o=i.blur,a=i.bulge,c=i.magic,u=i.sharp,h=i.soft,l=i.color,f=i.scale,p=i.width,v={cursor:"crosshair",color:l||"rgb(0,0,0)",width:p||1,on:n};d.Fabric.resolve().then((function(i){switch(r=i,v.brush=e.getDefaultBrush(),e.state.mode){case t.DESATURATE:v=e.getDesaturateBrush(n,p,f);break;case t.SHARPEN:v=e.getSharpenBrush(n,p,f,u);break;case t.MAGIC:v=e.getMagicWandBrush(n,p,c);break;case t.CLONE:v=e.getCloneBrush(n,p,f);break;case t.BULGE:v=e.getBulgeBrush(n,p,f,a);break;case t.BLUR:v=e.getBlurBrush(n,p,f,o);break;case t.FILL:v=e.getFillBrush(n,p,l);break;case t.ERASE:v=e.getEraserBrush(n,p,f,s,h);break;case t.PATTERN:v.brush=e.getPattern(n,p,f);break;case t.CIRCLE:v.brush=e.getCircle(n,p,f);break;case t.SPRAY:v.brush=e.getSpray(n,p,f);break;case t.PENCIL:break;default:v.on=!1}e.setBrush(v)}))}}},{key:"setBrush",value:function(t){var e=t.on,n=t.color,r=t.width,i=t.brush,s=t.cursor;this.editor.canvas.freeDrawingCursor=s,this.editor.canvas.freeDrawingBrush=i,this.editor.canvas.freeDrawingBrush.color=n,this.editor.canvas.freeDrawingBrush.width=r,this.editor.canvas.isDrawingMode=e}}]),t}();p.CIRCLE=0,p.PENCIL=1,p.PATTERN=2,p.SPRAY=3,p.ERASE=4,p.DESATURATE=5,p.SHARPEN=7,p.MAGIC=8,p.CLONE=9,p.BULGE=10,p.BLUR=11,p.FILL=12},321:function(t,e,n){"use strict";n.r(e),n.d(e,"Crop",(function(){return f}));var r=n(10),i=n(11),s=n(1),o=n(0),a=n.n(o);function c(){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.crop){t.next=4;break}return t.next=3,this.ctx.disableTools(["crop","fit"]);case 3:this.crop=!0;case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function h(){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.crop){t.next=4;break}return t.next=3,this.ctx.enableTools();case 3:this.crop=!1;case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var f=function(){function t(e){Object(r.a)(this,t),e.$on("crop:init",c.bind(this)),e.$on("crop:reset",h.bind(this)),e.$on("crop:end",h.bind(this)),this.crop=!1,this.ctx=e}var e,n,o;return Object(i.a)(t,[{key:"onCrop",value:(o=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ctx.cropStart();case 2:if(!t.sent){t.next=5;break}return t.next=5,c.call(this);case 5:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"offCrop",value:(n=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ctx.cropCancel();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"toggle",value:(e=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.crop){t.next=5;break}return t.next=3,this.offCrop();case 3:t.next=7;break;case 5:return t.next=7,this.onCrop();case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},322:function(t,e,n){"use strict";n.r(e),n.d(e,"Clip",(function(){return u}));var r=n(1),i=n(10),s=n(11),o=(n(3),n(51),n(0)),a=n.n(o),c=n(37),u=function(){function t(e){Object(i.a)(this,t),Object.assign(this,{currentCursor:"crosshair",defaultCursor:null,object:null,clip:!1,ctx:e}),this.performClip=this.performClip.bind(this),this.offClip=this.offClip.bind(this),this.onClip=this.onClip.bind(this),this.toggle=this.toggle.bind(this)}var e,n,o,u;return Object(s.a)(t,[{key:"performClip",value:(u=Object(r.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.path,t.prev=1,t.next=4,this.ctx.toolApply({payload:{path:n,object:this.object},tool:"clipto"});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.next=10,this.offClip();case 10:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(t){return u.apply(this,arguments)})},{key:"toggle",value:(o=Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.clip){t.next=5;break}return t.next=3,this.offClip();case 3:t.next=7;break;case 5:return t.next=7,this.onClip();case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onClip",value:(n=Object(r.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.object=this.ctx.canvas.getActiveObject()){t.next=2;break}return t.abrupt("return",this.ctx.$bus.$emit("snack",{content:"graph.select_image",color:"warning"}));case 2:return t.next=4,c.Fabric.resolve();case 4:e=t.sent,this.ctx.canvas.on("path:created",this.performClip),this.defaultCursor=this.ctx.canvas.freeDrawingCursor,this.ctx.canvas.freeDrawingCursor=this.currentCursor,this.ctx.canvas.freeDrawingBrush=new e.PencilBrush(this.ctx.canvas),this.ctx.canvas.freeDrawingBrush.color="black",this.ctx.canvas.freeDrawingBrush.width=1,this.ctx.canvas.isDrawingMode=!0,this.ctx.canvas.selection=!1,this.ctx.leaveEvents([]),this.ctx.lockEventsSet=!0,this.clip=!0;case 16:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"offClip",value:(e=Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t)}));case 2:this.ctx.canvas.off("path:created",this.performClip),this.ctx.canvas.defaultCursor=this.defaultCursor,this.ctx.canvas.isDrawingMode=!1,this.ctx.canvas.selection=!0,this.object=null,this.clip=!1;case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},323:function(t,e,n){"use strict";n.r(e),n.d(e,"cropzone",(function(){return r}));n(34),n(88);var r={type:"cropzone",isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_render:function(t){this.callSuper("_render",t);var e=this.flipX?-1:1,n=this.flipY?-1:1,r=e/this.scaleX,i=n/this.scaleY;t.scale(r,i),this._fillInnerRect(t,"rgb(0,0,0)",{lineDashWidth:7}),this._fillInnerRect(t,"rgb(255,255,255)",{lineDashOffset:7,lineDashWidth:7}),this._strokeBorder(t,"rgb(0,0,0)",{lineDashWidth:7}),this._strokeBorder(t,"rgb(255,255,255)",{lineDashOffset:7,lineDashWidth:7}),t.scale(1/r,1/i)},_getCoordinates:function(t){var e=this.getScaledWidth(),n=this.getScaledHeight(),r=e/2,i=n/2,s=this.left,o=this.top,a=t.canvas;return{x:[-(r+s),-r,r,r+(a.width-s-e)].map(Math.ceil),y:[-(i+o),-i,i,i+(a.height-o-n)].map(Math.ceil)}},_calculateInnerPosition:function(t,e){var n=[];return n[0]=t[1],n[1]=t[1]+e,n[2]=t[1]+2*e,n[3]=t[2],n},_fillOuterRect:function(t,e){var n=this._getCoordinates(t),r=n.x,i=n.y;t.save(),t.fillStyle=e,t.beginPath(),t.moveTo(r[0]-1,i[0]-1),t.lineTo(r[3]+1,i[0]-1),t.lineTo(r[3]+1,i[3]+1),t.lineTo(r[0]-1,i[3]+1),t.lineTo(r[0]-1,i[0]-1),t.closePath(),t.moveTo(r[1],i[1]),t.lineTo(r[1],i[2]),t.lineTo(r[2],i[2]),t.lineTo(r[2],i[1]),t.lineTo(r[1],i[1]),t.closePath(),t.fill(),t.restore()},_setDashedLineStyle:function(t,e,n,r,i){t.setLineDash&&t.setLineDash([n,n]),r&&(t.lineDashOffset=r),t.lineWidth=i||.5,t.strokeStyle=e},_fillInnerRect:function(t,e,n){var r=n.lineDashWidth,i=n.lineDashOffset,s=n.lineWidth,o=this._getCoordinates(t),a=o.x,c=o.y,u=this._calculateInnerPosition(a,(a[2]-a[1])/3),h=this._calculateInnerPosition(c,(c[2]-c[1])/3);t.save(),this._setDashedLineStyle(t,e,r,i,s),t.beginPath(),t.moveTo(u[0],h[1]),t.lineTo(u[3],h[1]),t.moveTo(u[0],h[2]),t.lineTo(u[3],h[2]),t.moveTo(u[1],h[0]),t.lineTo(u[1],h[3]),t.moveTo(u[2],h[0]),t.lineTo(u[2],h[3]),t.stroke(),t.closePath(),t.restore()},_strokeBorder:function(t,e,n){var r=n.lineDashWidth,i=n.lineDashOffset,s=n.lineWidth,o=this.getScaledWidth()/2,a=this.getScaledHeight()/2;t.save(),this._setDashedLineStyle(t,e,r,i,s),t.beginPath(),t.moveTo(-o,-a),t.lineTo(o,-a),t.lineTo(o,a),t.lineTo(-o,a),t.lineTo(-o,-a),t.stroke(),t.restore()},_onMoving:function(){var t=this.top,e=this.left,n=this.getScaledHeight(),r=this.getScaledWidth(),i=this.canvas.getHeight()-n,s=this.canvas.getWidth()-r,o=Math.min,a=Math.max;this.left=a(0,o(e,s)),this.top=a(0,o(t,i))}}},324:function(t,e,n){"use strict";n.r(e),n.d(e,"compress",(function(){return r}));n(3),n(14),n(15);function r(t,e){var r=e.minHeight,i=e.minWidth,s=e.quality;return n.e(316).then(n.t.bind(null,1063,7)).then((function(t){return t.default||t})).then((function(e){return new Promise((function(n,o){return new e(t,{minHeight:r,minWidth:i,quality:s,success:function(t){n(t)},error:function(){o()}})}))}))}},342:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"createTool",(function(){return h}));n(12),n(16),n(25),n(26);var r=n(151),i=n(2),s=n(1),o=n(0),a=n.n(o);n(3),n(14),n(15),n(9),n(43),n(27),n(51),n(18),n(52);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t){return l.apply(this,arguments)}function l(){return l=Object(s.a)(a.a.mark((function e(s){var o,c,h,l,f,d,p,v,m,g,b,w,x,y,j,_,k,O,C,P,T,B,M;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.fabric,c=["text","fillStyle","fontWeight","fontStyle","fontSize","fontFamily","charSpacing","lineWidth","underline","control1","control2","start","end","cH","cW"],h=function(){return["lockRotation","lockScalingX","lockScalingY","lockUniScaling","lockScalingFlip","lockSkewingX","lockSkewingY"].reduce((function(t,e){return u(u({},t),{},Object(i.a)({},e,!0))}),{})},l=function(){return["hasControls","hasBorders","hasRotatingPoint"].reduce((function(t,e){return u(u({},t),{},Object(i.a)({},e,!1))}),{})},f=function(){return["tl","tr","br","bl","ml","mt","mr","mb","mtr"].reduce((function(t,e){return u(u({},t),{},Object(i.a)({},e,!1))}),{})},p=(d=void 0===t||!0)?"./index.mjs":"./empty.mjs",e.next=9,n(431)("".concat(p)).then((function(t){return t.default||t}));case 9:return v=e.sent,m=v.setControls,e.next=13,Promise.resolve().then(n.bind(null,68));case 13:return g=e.sent,b=g.nextFrame,e.next=17,Promise.resolve().then(n.bind(null,158));case 17:return w=e.sent,x=w.debounce,e.next=21,n.e(30).then(n.bind(null,510));case 21:return y=e.sent,j=y.Curved,_=y.options,e.next=26,Promise.resolve().then(n.bind(null,136));case 26:return k=e.sent,O=k.loadFont,e.next=30,Promise.resolve().then(n.bind(null,4));case 30:return C=e.sent,P=C.promisify,T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{emit:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t[e]||[]).forEach((function(t){return t.apply(void 0,r)}))},on:function(e,n){return(t[e]=t[e]||[]).push(n)}}},B=function(){return d?O(_()):Promise.resolve()},M=function(){},o.CurvedControls=o.util.createClass(o.Rect,{type:"curved-controls",excludeFromExport:!0,control:"start",context:null,parent:null,onHover:!1,visible:!1,stroke:"rgb(0,148,221)",strokeWidth:2,fill:"",originX:"center",originY:"center",height:15,width:15,initialize:function(t,e){var n=this,r=e.e,i=e.left,s=e.top,o=e.parent,a=e.context,c=void 0===a?{}:a,d=this._onStoping.bind(this),p=this._onMoving.bind(this);if("number"==typeof t)switch(t){case 0:t="start";break;case 1:t="control1";break;case 2:t="control2";break;case 3:t="end"}this.on("removed",(function(){n.off("moving",p),n.off("moved",d)})),this.on("added",(function(){n.on("moving",p),n.on("moved",d)})),this.callSuper("initialize",u(u({fill:["start","end"].includes(t)?this.stroke:"",left:i||c[t].x,top:s||c[t].y,emitter:r,control:t,context:c,parent:o},l()),h())),this.setControlsVisibility(f())},_drawControl:function(t,e,n,r,i,s){},_render:function(t){var e=15/(this.canvas?this.canvas.getZoom():1);this.height=e,this.width=e,this.callSuper("_render",t)},_onMoving:function(t){var e=t.pointer;this.context[this.control]=e,this.emitter.emit("moving")},_onStoping:function(t){Object(r.a)(t),this.canvas.trigger("programmatic"),this.emitter.emit("stoped")},correction:function(t){var e=t.x,n=t.y;this.left+=e,this.top+=n},toObject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.callSuper("toObject",["parent","control"].concat(t))},drawControls:function(t,e){},onDeselect:function(t){},onSelect:function(t){}}),o.CurvedText=o.util.createClass(o.Object,u(u({type:"curved-text",prev:{width:0,height:0,left:0,top:0},lockScalingFlip:!0,lockUniScaling:!0,lockSkewingX:!0,lockSkewingY:!0,controls:[]},_()),{},{initialize:function(t){var e=this;this.callSuper("initialize",t),this.on("removed",this._uninstall),this.on("added",this._install),d&&m(this,{tr:{cursor:"pointer",action:function(){e.stopFix=!0,e.canvas.trigger("curved:settings",e),setTimeout((function(){e.stopFix=!1}),100)}}})},_install:function(){var t=this;this.canvas.stackManagerStop=!0,this.canvas._objects=this.canvas._objects.filter((function(e){return e.parent!==t.custom.unique}));var e=T();e.on("moving",(function(){return t.resize(t.visible)})),e.on("stoped",(function(){return t.update(t.visible)})),this.controls=Array.from({length:4},(function(n,r){var i=new o.CurvedControls(r,{parent:t.custom.unique,context:t.context,e:e});return t.canvas.insertTo(i),i})),this.canvas.stackManagerStop=!1,this.on("scaling",this._onMoving),this.on("scaled",this._onStoping),this.on("moving",this._onMoving),this.on("moved",this._onStoping),this.update()},_uninstall:function(){var t=this;this.canvas.stackManagerStop=!0,this.controls.forEach((function(e){e.parent===t.custom.unique&&(t.canvas.remove(e),e.fire("removed"))})),this.canvas.stackManagerStop=!1,this.controls=[],this.off("scaling",this._onMoving),this.off("scaled",this._onStoping),this.off("moving",this._onMoving),this.off("moved",this._onStoping)},_onMoving:function(t){var e=this;Object(r.a)(t),this.context.moving=!0;var n=this.left,i=this.top,s=this.prev,o={x:n-s.left,y:i-s.top};this.controls.forEach((function(t){t.parent===e.custom.unique&&t.correction(o)})),this.setPrev()},_render:function(t){t.drawImage(this.context.canvas,-this.width/2,-this.height/2)},onDeselect:function(){var t=this,e=this.controls.some((function(t){return t.onHover}));this.canvas._objects.filter((function(e){return e.parent===t.custom.unique})).length||this.controls.forEach(this.canvas.insertTo.bind(this.canvas)),this.controls.forEach((function(n){n.parent===t.custom.unique&&(n.visible=e)})),this.context.underline=e},onSelect:function(){var t=this;this.context.underline=!0,this.canvas._objects.filter((function(e){return e.parent===t.custom.unique})).length||this.controls.forEach(this.canvas.insertTo.bind(this.canvas)),this.controls.forEach((function(e){e.parent===t.custom.unique&&(e.visible=!0)}))},resize:function(){var t=this;b((function(){t.height=t.context.canvas.height,t.width=t.context.canvas.width}))},update:x((function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.canvas.trigger("canvas:distort",{}),this.context.moving=!1,this.controls.forEach((function(e){t[e.control]={x:e.left,y:e.top}})),this.setPrev()}),0),setPrev:function(){this.prev.height=this.height,this.prev.width=this.width,this.prev.left=this.left,this.prev.top=this.top}})),o.CurvedText.prototype.onChangeFix=x((function(){!this.stopFix&&this.canvas?this.canvas.trigger("programmatic"):this.stopFix=!1}),0),o.CurvedText.prototype.toObject=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.update(this.visible),t.call(this,c.concat(e))}}(o.CurvedText.prototype.toObject),o.CurvedText.fromObject=function(t,e){B().catch(M).then((function(){e(new o.CurvedText(u(u({},t),{},{context:new j(t)})))}))},o.CurvedText.create=function(t){var e=t.canvas;return B().catch(M).then((function(){var t=e.getZoom(),n=e.height/t+.5|0,r=e.width/t+.5|0,i=new j({cH:n,cW:r}),s=+"".concat(i.canvas.height),a=+"".concat(i.canvas.width),c=n/2-s/2,u=r/2-a/2;return new o.CurvedText({context:i,cH:n,cW:r,height:s,width:a,left:u,top:c})}))},o.CurvedText.async=!0,o.CurvedText=P(o.CurvedText,(function(t){["text","fillStyle","fontSize","fontFamily","charSpacing"].includes(t)&&(this.onChangeFix(),o.request())})),e.abrupt("return",o);case 44:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}}.call(this,n(38))},346:function(t,e,n){"use strict";n.r(e),n.d(e,"createTool",(function(){return u}));n(12),n(16),n(18),n(25),n(9),n(26);var r=n(2),i=n(1),s=n(0),o=n.n(s);n(3),n(14),n(15),n(27),n(83);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function t(e){var i,s,a,u,h,l,f,d,p,v,m,g,b,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.fabric,t.next=3,n.e(10).then(n.bind(null,265));case 3:return s=t.sent,a=s.App,t.next=7,n.e(9).then(n.bind(null,168));case 7:return u=t.sent,h=u.createCanvas,t.next=11,Promise.resolve().then(n.bind(null,255));case 11:return l=t.sent,f=l.rndstring,d=["lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","lockSkewingX","lockSkewingY","lockScalingFlip"].reduce((function(t,e){return c(c({},t),{},Object(r.a)({},e,!0))}),{}),p=["selectable","hasControls","hasBorders","hasRotatingPoint"].reduce((function(t,e){return c(c({},t),{},Object(r.a)({},e,!1))}),{}),m=(v=[{value:"gradient",text:"Gradient"},{value:"geometry",text:"Geometry"},{value:"balloons",text:"Balloons"},{value:"particles",text:"Particles"},{value:"rainbow",text:"Rainbow"},{value:"sparkling",text:"Sparkling"},{value:"mystical",text:"Mystical"},{value:"mesh",text:"Mesh"},{value:"neon",text:"Neon"},{value:"noisy",text:"Noisy"}])[0],g={},b={},w={},i.DynamicBackground=i.util.createClass(i.Image,{type:"dynamic-background",animList:v,applied:!1,binding:!1,app:null,cnv:null,id:null,initialize:function(t){this.release(),this.bind();var e="".concat(t.width,"_").concat(t.height);b[e]||(b[e]=h(t)),this.cnv=b[e],this.app=a.init(e,this.cnv),this.applied=!1,this.callSuper("initialize",this.cnv,c(c(c({},t),p),d))},bind:function(){this.binding||(this.binding=!0,this.canvas?this.onAdded():this.on("added",this.onAdded),this.on("removed",this.release),this.on("mouseup",this.apply))},unbind:function(){this.off("removed",this.release),this.off("added",this.onAdded),this.off("mouseup",this.apply),this.binding=!1},onAdded:function(){this.on("mousemove",this.app.mousemove.bind(this.app)),this.on("mouseout",this.app.mouseout.bind(this.app)),this.app.setRenderer(this.canvas.requestRenderAllBound),this.app.setCleaner(this.clearCanvas.bind(this)),this.app.choose(m.value,w)},render:function(t){t&&this.callSuper("render",t)},clearCanvas:function(){var t=this.canvas||{},e=t.contextContainer,n=t.width,r=void 0===n?0:n,i=t.height,s=void 0===i?0:i;e&&e.clearRect(0,0,r,s)},getId:function(t){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.getObjects().findIndex((function(e){return e===t})))||0},release:function(){this.unbind(),this.canvas&&(this.canvas.cancelRequestedRender(),this.clearCanvas()),this.app&&(this.app.loop.stop(),this.app.dispose())},setExtra:function(t){return this.app?(w[this.app.type]=t,this.app.setExtra(t)):Promise.resolve()},choose:function(t){return this.app?(m=t,this.app.choose(t.value,w)):Promise.resolve()},apply:function(){var t=this;i.Image.fromURL(this.cnv.toDataURL(),(function(e){e.set({custom:{unique:f(12),name:"background"}}),t.canvas.trigger("canvas:flash"),t.canvas.insertAt(e,t.getId(t),!0),t.canvas.trigger("canvas:distort"),t.applied=!0,t.release()}))}}),i.DynamicBackground.fromObject=function(t,e){var n="".concat(t.width,"_").concat(t.height);g[n]||(g[n]=new i.DynamicBackground(t)),g[n].bind(),e(g[n])},i.DynamicBackground.create=function(t){var e=t.canvas,n=e.width,r=e.height,s=t.scaled.scale,o="".concat(n,"_").concat(r);return g[o]||(g[o]=new i.DynamicBackground({height:r/s,width:n/s,scale:s})),g[o].bind(),g[o]},t.abrupt("return",i);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},347:function(t,e,n){"use strict";n.r(e),n.d(e,"createTool",(function(){return u}));var r=n(2),i=n(1),s=n(0),o=n.n(s);n(3),n(14),n(15),n(83),n(34),n(12),n(16),n(18),n(25),n(9),n(26);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function t(e){var r,s,a,u,h,l,f,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(t){var e,n,r,i,s,o,a=t.canvas,c=t.src,u=t.dump,h=document.createElement("canvas"),l=h.getContext("2d"),f=c.getContext("2d"),d=a.getZoom(),p=u.height,v=u.width,m=u.left,g=u.top,b=a.height,w=a.width;return new Promise((function(t){h.height=Math.floor(b/d),h.width=Math.floor(w/d),e=f.getImageData(0,0,v,p),n=l.createImageData(v,p);for(var a=0;a<e.data.length;a+=4)i=e.data[a],s=e.data[a+1],o=e.data[a+2],r=((i>s?i>o?i:o:s>o?s:o)+(i<s?i<o?i:o:s<o?s:o))/2+.5|0,n.data[a]=n.data[a+1]=n.data[a+2]=r,n.data[a+3]=e.data[a+3];l.putImageData(n,m,g,0,0,v,p),t(l)}))},l=function(t){["pattern","origin","blank","dump","src","id"].forEach((function(e){t[e]=null}))},r=e.fabric,t.next=5,n.e(9).then(n.bind(null,168));case 5:return s=t.sent,a=s.createCanvas,t.next=9,Promise.resolve().then(n.bind(null,106));case 9:return u=t.sent,h=u.createImage,d=r.util.createClass(r.PencilBrush,{type:"DesaturateBrush",context:null,origin:null,clone:null,blank:null,dump:null,src:null,id:null,process:!1,pattern:null,initialize:function(t){var e=this;t.on("before:render",(function(){return e.blank&&e._restoreTopContext()})),this.canvas=t,this._points=[]},onMouseDown:function(t,e){var n=e.e;!n.shiftKey&&this.canvas._isMainEvent(n)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._restoreTopContext(),this._render())},onMouseMove:function(t,e){var n=e.e;this.canvas._isMainEvent(n)&&this._captureDrawingPath(t)&&this._points.length>1&&(this._restoreTopContext(),this._render())},onMouseUp:function(t){var e=t.e;this.canvas._isMainEvent(e)&&(this.process=!1,this.toBlank())},_setPattern:function(t){this.pattern=t.createPattern(t.canvas,"no-repeat")},_setBrushStyles:function(t){t||(t=this.canvas.contextTop),t.strokeStyle=this.pattern,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.lineCap=this.strokeLineCap,t.lineWidth=this.width},_prepareForDrawing:function(t){var e=t.x,n=t.y,i=new r.Point(e,n);this._points=[],this._addPoint(i),this.canvas.contextTop.moveTo(e,n),this.process=!0},_addPoint:function(t){var e=this._points;return!(e.length>1&&t.eq(e[e.length-1]))&&(this._points.push(t),!0)},_captureDrawingPath:function(t){var e=t.x,n=t.y;return!!this.process&&this._addPoint(new r.Point(e,n))},_render:function(t){if(this._points.length){t||(t=this.canvas.contextTop);var e=this._points[0],n=this._points[1];if(2===this._points.length&&e.eq(n)){var r=this.width/1e3;e.x-=r,n.x+=r}t.save(),this._setBrushStyles(t),t.beginPath(),t.moveTo(e.x,e.y);for(var i,s=1;s<this._points.length;s++)i=e.midPointFrom(n),t.quadraticCurveTo(e.x,e.y,i.x,i.y),e=this._points[s],n=this._points[s+1];t.lineTo(e.x,e.y),t.stroke(),t.closePath(),t.restore()}},_restoreTopContext:function(){this.drawImage(this.canvas.contextTop),this.drawBlank(this.canvas.contextTop)},drawImage:function(t){var e=this.src,n=this.dump,r=n.left,i=n.top,s=this.canvas,o=s.width,a=s.height,c=s.viewportTransform;t.clearRect(0,0,o,a),t.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]),t.drawImage(e,r,i)},drawBlank:function(t){t.drawImage(this.blank,0,0)},toBlank:function(){this._render(this.blank.getContext("2d"))},newBlank:function(){this.blank=a(this.canvas)},setTargetObject:function(t){var e=this;return Object(i.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("image"===t.type){n.next=6;break}return n.next=3,h(t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=t;case 7:r=n.t0,e.dump=r.getBoundingRect(!0),e.src=r.toCanvasElement(),e.id=e.getId(t),e.origin=r,f(e).then(e._setPattern.bind(e)),e.drawImage(e.canvas.contextTop),e.newBlank(),e.canvas.remove(t),e.canvas.renderAll();case 17:case"end":return n.stop()}}),n)})))()},setContext:function(t){this.context=t},finalize:function(){this.context.$emit("drawingtool:end"),this._points=[],l(this)},getId:function(t){return this.canvas.getObjects().findIndex((function(e){return e===t}))},recalcCoords:function(){var t=this.origin.toObject(),e=t.width,n=t.height,i=t.angle,s=this.dump,o=s.width,a=s.height,c=s.left,u=s.top;i*=Math.PI/180,this._points=this._points.map((function(t){return t.subtract({x:c+o/2,y:u+a/2})})).map((function(t){return new r.Point(t.x*Math.cos(i)+t.y*Math.sin(i),t.y*Math.cos(i)-t.x*Math.sin(i))})).map((function(t){return t.add({x:e/2,y:n/2})}))},test:function(){var t=a(this.canvas),e=t.getContext("2d");this.recalcCoords(),this.drawImage(e),this._render(e),window.open(t.toDataURL("image/png",1),"_blank")},apply:function(){var t=this;return new Promise((function(e){var n,i,s=c(c({},t.origin.toObject()),{},{visible:!0}),o=c(c({},s),{},{scaleX:1,scaleY:1,angle:0}),a=s.width,u=s.height,h=s.angle,l=s.scaleX,f=s.scaleY,d=t.dump,p=d.width,v=d.height,m=d.left,g=d.top,b=Math.PI/180,w=p/l,x=v/f,y=-w/2,j=-x/2;r.Image.fromObject(o,(function(o){n=o.toCanvasElement(),(i=n.getContext("2d")).save(),i.translate(a/2,u/2),i.rotate(-h*b),i.drawImage(t.blank,m,g,p,v,y,j,w,x),i.restore(),s.src=n.toDataURL("image/png",1),r.Image.fromObject(s,e)}))}))},perform:function(t,e){var n=this;"function"!=typeof e&&(e=function(){}),(t?this.apply():Promise.resolve(this.origin)).then((function(t){var r;t&&(r=t,n.canvas.insertAt(r,n.id)),e()})).catch((function(){e(),n.context.$bus.$emit("snack",{content:"graph.unexpected_error",color:"error"})})).finally((function(){n.canvas.trigger("canvas:distort",{}),n.canvas.renderAll(),n.finalize()}))}}),r.desaturateTool=function(t){var e=new d(t.canvas);return e.setContext(t),e},t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},349:function(t,e,n){"use strict";n.r(e),n.d(e,"createTool",(function(){return u}));var r=n(2),i=n(1),s=n(0),o=n.n(s);n(3),n(14),n(15),n(83),n(12),n(16),n(18),n(25),n(9),n(26);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function t(e){var r,s,a,u,h,l,f,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(t){var e=t.canvas,n=t.src,r=t.dump,i=document.createElement("canvas"),s=i.getContext("2d"),o=e.getZoom(),a=r.height,c=r.width,u=r.left,h=r.top,l=e.height,f=e.width;return new Promise((function(t){i.height=Math.floor(l/o),i.width=Math.floor(f/o),s.drawImage(n,0,0,c,a,u,h,c,a),t(s)}))},l=function(t){["process","pattern","origin","clone","blank","start","dump","src","id"].forEach((function(e){t[e]=null}))},r=e.fabric,t.next=5,n.e(9).then(n.bind(null,168));case 5:return s=t.sent,a=s.createCanvas,t.next=9,Promise.resolve().then(n.bind(null,106));case 9:return u=t.sent,h=u.createImage,d=r.util.createClass(r.BaseBrush,{type:"CloneBrush",process:!1,context:null,pattern:null,origin:null,clone:null,blank:null,start:null,dump:null,src:null,id:null,initialize:function(t){var e=this;t.on("before:render",(function(){return e.blank&&e._restoreTopContext()})),this.canvas=t,this._points=[]},onMouseDown:function(t,e){var n=e.e;if(!n.shiftKey&&this.canvas._isMainEvent(n)){if(n.ctrlKey)return this._addStartPoint(t);if(!this._prepareForDrawing(t))return this.context.$bus.$emit("snack",{content:"  ",color:"warning"});this._captureDrawingPath(t),this._render()}},onMouseMove:function(t,e){this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&(this._restoreTopContext(),this._render())},onMouseUp:function(t){this.process&&this.canvas._isMainEvent(t.e)&&(this.process=!1,this.toBlank())},_shift:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),r=t.subtract(this.start),i=this.clone.canvas;return e.height=i.height,e.width=i.width,n.drawImage(i,r.x,r.y),e},_setPattern:function(t,e){e||(e=this.canvas.contextTop),this.pattern=e.createPattern(this._shift(t),"no-repeat")},_setBrushStyles:function(t){t||(t=this.canvas.contextTop),t.strokeStyle=this.pattern,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.lineCap=this.strokeLineCap,t.lineWidth=this.width},_prepareForDrawing:function(t){var e=t.x,n=t.y;if(!this.start)return!1;var i=new r.Point(e,n);return this._points=[],this._setPattern(i),this._addPoint(i),this.canvas.contextTop.moveTo(e,n),this.process=!0,!0},_addStartPoint:function(t){var e=t.x,n=t.y;this.origin.containsPoint({x:e,y:n},null,!0)&&(this.start=new r.Point(e,n))},_addPoint:function(t){var e=this._points;return!(e.length>1&&t.eq(e[e.length-1]))&&(this._points.push(t),!0)},_captureDrawingPath:function(t){return!!this.process&&this._addPoint(new r.Point(t.x,t.y))},_drawSegment:function(t,e,n){var r=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,r.x,r.y),r},_render:function(t){if(this._points.length){t||(t=this.canvas.contextTop);var e,n,i=this._points[0],s=this._points[1];if(2===this._points.length&&i.x===s.x&&i.y===s.y){var o=this.width/1e3;i=new r.Point(i.x,i.y),s=new r.Point(s.x,s.y),i.x-=o,s.x+=o}for(t.save(),this._setBrushStyles(t),t.beginPath(),t.moveTo(i.x,i.y),n=1,e=this._points.length;n<e;n++)this._drawSegment(t,i,s),i=this._points[n],s=this._points[n+1];t.lineTo(i.x,i.y),t.stroke(),t.closePath(),t.restore()}},_restoreTopContext:function(){this.drawImage(this.canvas.contextTop),this.drawBlank(this.canvas.contextTop)},drawImage:function(t){var e=this.src,n=this.dump,r=n.left,i=n.top,s=this.canvas,o=s.width,a=s.height,c=s.viewportTransform;t.clearRect(0,0,o,a),t.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]),t.drawImage(e,r,i)},toBlank:function(){this._render(this.blank.getContext("2d"))},drawBlank:function(t){t.drawImage(this.blank,0,0)},newBlank:function(){this.blank=a(this.canvas)},setTargetObject:function(t){var e=this;return Object(i.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("image"===t.type){n.next=6;break}return n.next=3,h(t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=t;case 7:r=n.t0,e.dump=r.getBoundingRect(!0),e.src=r.toCanvasElement(),e.id=e.getId(t),e.origin=r,f(e).then((function(n){e.clone=n,e.drawImage(e.canvas.contextTop),e.newBlank(),e.canvas.remove(t),e.canvas.renderAll()}));case 13:case"end":return n.stop()}}),n)})))()},setContext:function(t){this.context=t},finalize:function(){this.context.$emit("drawingtool:end"),this._points=[],l(this)},getId:function(t){return this.canvas.getObjects().findIndex((function(e){return e===t}))},apply:function(){var t=this;return new Promise((function(e){var n,i,s=c(c({},t.origin.toObject()),{},{visible:!0}),o=c(c({},s),{},{scaleX:1,scaleY:1,angle:0}),a=s.width,u=s.height,h=s.angle,l=s.scaleX,f=s.scaleY,d=t.dump,p=d.width,v=d.height,m=d.left,g=d.top,b=Math.PI/180,w=p/l,x=v/f,y=-w/2,j=-x/2;r.Image.fromObject(o,(function(o){n=o.toCanvasElement(),(i=n.getContext("2d")).save(),i.translate(a/2,u/2),i.rotate(-h*b),i.drawImage(t.blank,m,g,p,v,y,j,w,x),i.restore(),s.src=n.toDataURL("image/png",1),r.Image.fromObject(s,e)}))}))},perform:function(t,e){var n=this;"function"!=typeof e&&(e=function(){}),(t?this.apply():Promise.resolve(this.origin)).then((function(t){var r;t&&(r=t,n.canvas.insertAt(r,n.id)),e()})).catch((function(){e(),n.context.$bus.$emit("snack",{content:"graph.unexpected_error",color:"error"})})).finally((function(){n.canvas.trigger("canvas:distort",{}),n.canvas.renderAll(),n.finalize()}))}}),r.cloneTool=function(t){var e=new d(t.canvas);return e.setContext(t),e},t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},350:function(t,e,n){"use strict";n.r(e),n.d(e,"createTool",(function(){return u}));var r=n(2),i=n(1),s=n(0),o=n.n(s);n(3),n(14),n(15),n(83),n(12),n(16),n(18),n(25),n(9),n(26);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function t(e){var r,s,a,u,h,l,f;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=function(t){["process","current","texture","origin","dump","id"].forEach((function(e){t[e]=null}))},r=e.fabric,t.next=4,Promise.resolve().then(n.bind(null,105));case 4:return s=t.sent,a=s.init,t.next=8,Promise.resolve().then(n.bind(null,106));case 8:return u=t.sent,h=u.createImage,f=r.util.createClass(r.BaseBrush,{type:"BulgeBrush",context:null,origin:null,dump:null,id:null,texture:null,fx:null,process:!1,current:null,factor:1,initialize:function(t){var e=this;t.on("before:render",(function(){return e.origin&&e._render()})),this.canvas=t,this._points=[],this.fx=a()},_render:function(){var t=this.fx,e=this.canvas,n=this.dump,r=n.left,i=n.top,s=e.width,o=e.height,a=e.viewportTransform,c=this.canvas.contextTop,u=this.current;t.draw(this.texture);for(var h,l=0;l<this._points.length;l++)h=this._points[l],t.bulgePinch(h.x-r,h.y-i,h.w,h.f);this.current&&t.bulgePinch(u.x-r,u.y-i,u.w,u.f),t.update(),c.clearRect(0,0,s,o),c.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),c.drawImage(t,r,i)},onMouseDown:function(t,e){var n=t.x,i=t.y,s=e.e;if(!s.shiftKey&&this.canvas._isMainEvent(s)){var o=new r.Point(n,i);o.f=this.factor,o.w=this.width,this.process=!0,this.current=o,this._render()}},onMouseMove:function(t,e){var n=t.x,r=t.y,i=e.e;this.process&&this.canvas._isMainEvent(i)&&(this.current.x=n,this.current.y=r,this._render())},onMouseUp:function(t){var e=t.e;this.current&&this.canvas._isMainEvent(e)&&(this._points.push(this.current),this.process=!1,this.current=null)},setTargetObject:function(t){var e=this;return Object(i.a)(o.a.mark((function n(){var r,i,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("image"===t.type){n.next=6;break}return n.next=3,h(t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=t;case 7:r=n.t0,i=r.getBoundingRect(!0),s=r.toCanvasElement(),e.texture=e.fx.texture(s),e.id=e.getId(t),e.origin=r,e.dump=i,e._render(),e.canvas.remove(t),e.canvas.renderAll();case 16:case"end":return n.stop()}}),n)})))()},setContext:function(t){this.context=t},finalize:function(){this.context.$emit("drawingtool:end"),this._points=[],l(this)},getId:function(t){return this.canvas.getObjects().findIndex((function(e){return e===t}))},apply:function(){var t=this;return new Promise((function(e){var n,i,s=c(c({},t.origin.toObject()),{},{visible:!0}),o=c(c({},s),{},{scaleX:1,scaleY:1,angle:0}),a=s.width,u=s.height,h=s.angle,l=s.scaleX,f=s.scaleY,d=t.dump,p=d.width,v=d.height,m=Math.PI/180;r.Image.fromObject(o,(function(o){n=o.toCanvasElement(),(i=n.getContext("2d")).save(),i.translate(a/2,u/2),i.rotate(-h*m),i.drawImage(t.fx,0,0,p,v,-p/2/l,-v/2/f,p/l,v/f),i.restore(),s.src=n.toDataURL("image/png",1),s.angle=h,r.Image.fromObject(s,e)}))}))},perform:function(t,e){var n=this;"function"!=typeof e&&(e=function(){}),(t?this.apply():Promise.resolve(this.origin)).then((function(t){var r;t&&(r=t,n.canvas.insertAt(r,n.id)),e()})).catch((function(){e(),n.context.$bus.$emit("snack",{content:"graph.unexpected_error",color:"error"})})).finally((function(){n.canvas.trigger("canvas:distort",{}),n.canvas.renderAll(),n.finalize()}))}}),r.bulgeTool=function(t){var e=new f(t.canvas);return e.setContext(t),e},t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},353:function(t,e,n){"use strict";n.r(e),n.d(e,"createTool",(function(){return u}));var r=n(2),i=n(1),s=n(0),o=n.n(s);n(3),n(14),n(15),n(83),n(12),n(16),n(18),n(25),n(9),n(26);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(o.a.mark((function t(e){var r,s,a,u,h,l,f,d,p,v;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(t,e){var n,r,i=t.canvas,s=t.src,o=t.dump,c=document.createElement("canvas"),u=c.getContext("2d"),h=s.getContext("2d"),l=i.getZoom(),f=o.height,d=o.width,p=o.left,v=o.top,m=i.height,g=i.width;return new Promise((function(t){c.height=Math.floor(m/l),c.width=Math.floor(g/l),n=h.getImageData(0,0,d,f),r=e?a(n,e):n,u.putImageData(r,p,v,0,0,d,f),t(u)}))},d=function(t){["pattern","origin","blank","dump","src","id"].forEach((function(e){t[e]=null}))},r=e.fabric,t.next=5,n.e(28).then(n.bind(null,513));case 5:return s=t.sent,a=s.blur,t.next=9,n.e(9).then(n.bind(null,168));case 9:return u=t.sent,h=u.createCanvas,t.next=13,Promise.resolve().then(n.bind(null,106));case 13:return l=t.sent,f=l.createImage,v=r.util.createClass(r.BaseBrush,{type:"BlurBrush",context:null,origin:null,clone:null,blank:null,dump:null,src:null,id:null,process:!1,pattern:null,initialize:function(t){var e=this;t.on("before:render",(function(){return e.blank&&e._restoreTopContext()})),this.canvas=t,this._points=[]},onMouseDown:function(t,e){var n=e.e;!n.shiftKey&&this.canvas._isMainEvent(n)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._restoreTopContext(),this._render())},onMouseMove:function(t,e){var n=e.e;this.canvas._isMainEvent(n)&&this._captureDrawingPath(t)&&this._points.length>1&&(this._restoreTopContext(),this._render())},onMouseUp:function(t){var e=t.e;this.canvas._isMainEvent(e)&&(this.process=!1,this.toBlank())},_setPattern:function(t){this.pattern=t.createPattern(t.canvas,"no-repeat")},_setBrushStyles:function(t){t||(t=this.canvas.contextTop),t.strokeStyle=this.pattern,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.lineCap=this.strokeLineCap,t.lineWidth=this.width},_prepareForDrawing:function(t){var e=t.x,n=t.y,i=new r.Point(e,n);this._points=[],this._addPoint(i),this.canvas.contextTop.moveTo(e,n),this.process=!0},_addPoint:function(t){var e=this._points;return!(e.length>1&&t.eq(e[e.length-1]))&&(this._points.push(t),!0)},_captureDrawingPath:function(t){var e=t.x,n=t.y;return!!this.process&&this._addPoint(new r.Point(e,n))},_render:function(t){if(this._points.length){t||(t=this.canvas.contextTop);var e=this._points[0],n=this._points[1];if(2===this._points.length&&e.eq(n)){var r=this.width/1e3;e.x-=r,n.x+=r}t.save(),this._setBrushStyles(t),t.beginPath(),t.moveTo(e.x,e.y);for(var i,s=1;s<this._points.length;s++)i=e.midPointFrom(n),t.quadraticCurveTo(e.x,e.y,i.x,i.y),e=this._points[s],n=this._points[s+1];t.lineTo(e.x,e.y),t.stroke(),t.closePath(),t.restore()}},_restoreTopContext:function(){this.drawImage(this.canvas.contextTop),this.drawBlank(this.canvas.contextTop)},drawImage:function(t){var e=this.src,n=this.dump,r=n.left,i=n.top,s=this.canvas,o=s.width,a=s.height,c=s.viewportTransform;t.clearRect(0,0,o,a),t.setTransform(c[0],c[1],c[2],c[3],c[4],c[5]),t.drawImage(e,r,i)},drawBlank:function(t){t.drawImage(this.blank,0,0)},toBlank:function(){this._render(this.blank.getContext("2d"))},newBlank:function(){this.blank=h(this.canvas)},setTargetObject:function(t){var e=this;return Object(i.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("image"===t.type){n.next=6;break}return n.next=3,f(t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=t;case 7:r=n.t0,e.dump=r.getBoundingRect(!0),e.src=r.toCanvasElement(),e.id=e.getId(t),e.origin=r,p(e).then(e._setPattern.bind(e)),e.drawImage(e.canvas.contextTop),e.newBlank(),e.canvas.remove(t),e.canvas.renderAll();case 17:case"end":return n.stop()}}),n)})))()},setFactor:function(t){this.src instanceof HTMLCanvasElement&&p(this,t).then(this._setPattern.bind(this))},setContext:function(t){this.context=t},finalize:function(){this.context.$emit("drawingtool:end"),this._points=[],d(this)},getId:function(t){return this.canvas.getObjects().findIndex((function(e){return e===t}))},apply:function(){var t=this;return new Promise((function(e){var n,i,s=c(c({},t.origin.toObject()),{},{visible:!0}),o=c(c({},s),{},{scaleX:1,scaleY:1,angle:0}),a=s.width,u=s.height,h=s.angle,l=s.scaleX,f=s.scaleY,d=t.dump,p=d.width,v=d.height,m=d.left,g=d.top,b=Math.PI/180,w=p/l,x=v/f,y=-w/2,j=-x/2;r.Image.fromObject(o,(function(o){n=o.toCanvasElement(),(i=n.getContext("2d")).save(),i.translate(a/2,u/2),i.rotate(-h*b),i.drawImage(t.blank,m,g,p,v,y,j,w,x),i.restore(),s.src=n.toDataURL("image/png",1),r.Image.fromObject(s,e)}))}))},perform:function(t,e){var n=this;"function"!=typeof e&&(e=function(){}),(t?this.apply():Promise.resolve(this.origin)).then((function(t){var r;t&&(r=t,n.canvas.insertAt(r,n.id)),e()})).catch((function(){e(),n.context.$bus.$emit("snack",{content:"graph.unexpected_error",color:"error"})})).finally((function(){n.canvas.trigger("canvas:distort",{}),n.canvas.renderAll(),n.finalize()}))}}),r.blurTool=function(t){var e=new v(t.canvas);return e.setContext(t),e},t.abrupt("return",r);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},355:function(t,e,n){"use strict";n.r(e),n.d(e,"setCornersControls",(function(){return h}));n(16),n(25),n(26);var r=n(13),i=n(2),s=n(1),o=n(0),a=n.n(o);n(3),n(14),n(15),n(9),n(12),n(18),n(88),n(24),n(67);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark((function t(e){var s,o,c,h,l,f,d,p,v,m,g,b,w,x,y,j,_,k,O,C,P,T,B,M,D,S;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M=function(t,e,n){var r=null;return this.actionIsDisabled(t,e,n)?this.notAllowedCursor:(B(t,e)?r=e:B(t,this)&&(r=this),r?r[t+"cursorIcon"].match(/\.(?:jpe?g|png|gif|svg)$/)?this.setCursor("url("+r[t+"cursorIcon"]+"), auto"):"resize"===r[t+"cursorIcon"]?this.setCursor(this._getRotatedCornerCursor(t,e,n)):this.setCursor(r[t+"cursorIcon"]):t in h?this.setCursor(this._getRotatedCornerCursor(t,e,n)):"mtr"===t&&e.hasRotatingPoint?this.setCursor(this.rotationCursor):this.setCursor(this.defaultCursor),!1)},B=function(t,e){return e.fixedCursors&&e[t+"cursorIcon"]},T=function(t,e,n){var r=parseInt(e.get("angle"))+n,i=!1;P(e)&&(e._setOriginToCenter(),i=!0),r=r>360?r-360:r;var s=this.getActiveObjects();s&&"undefined"!==s?s.forEach((function(t){t.set({angle:r}).setCoords()})):e.set({angle:r}).setCoords(),i&&e._resetOrigin(),this.renderAll()},P=function(t){var e=t.originX,n=t.originY,r=t.centeredRotation;return("center"!==e||"center"!==n)&&r},C=function(t,e){"promo-link"!==e.type&&e.sendBackwards(!0)},O=function(t,e){if(e.canvas.promo){var n=e.canvas._objects.indexOf(e);if(e.canvas._objects.length-1<=n+1)return}e.bringForward(!0)},k=function(t,e){var n=this.getActiveObjects();this.discardActiveObject(),n&&n.length?n.forEach(this.remove.bind(this)):this.remove(e)},_=function(t,e,n){if(e){var i=this.getPointer(t,!1),o=e._findTargetCorner(this.getPointer(t,!0)),a=this._getActionFromCorner(n,o,t,e),c=this._getOriginFromCorner(e,o);"function"==typeof a&&(a.call(this,t,e),a="void"),this._currentTransform={target:e,action:a,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:i.x-e.left,offsetY:i.y-e.top,originX:c.x,originY:c.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,left:e.left,top:e.top,theta:s.util.degreesToRadians(e.angle),width:e.width*e.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,originX:c.x,originY:c.y},"remove"===a&&this._removeAction(t,e),"moveUp"===a&&this._moveLayerUpAction(t,e),"moveDown"===a&&this._moveLayerDownAction(t,e),"object"===Object(r.a)(a)&&"rotateByDegrees"===Object.keys(a)[0]&&this._rotateByDegrees(t,e,a.rotateByDegrees),this._resetCurrentTransform()}},j=function(t,e,n,r){if(!e||!t)return"drag";if(r.overwriteActions)return y.call(this,e,n,r);if(this.overwriteActions)return y.call(this,e,n);switch(e){case"mtr":return"rotate";case"ml":case"mr":return n[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return n[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},y=function(t,e,n){n||(n=this);var r=e[this.altActionKey];switch(t){case"mtr":return n[t+"Action"]||"rotate";case"ml":case"mr":return r?"skewY":n[t+"Action"]||"scaleX";case"mt":case"mb":return r?"skewX":n[t+"Action"]||"scaleY";default:return n[t+"Action"]||"scale"}},x=function(t,e){this[t+"cursorIcon"]=e},w=function(t,e){this[t+"Action"]=e},b=function(t){for(var e in this.prevent&&(t=f),t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0!==t[e].action&&(this.overwriteActions=!0,this.setCustomAction(e,t[e].action)),void 0!==t[e].cursor&&(this.fixedCursors=!0,this.setCustomCursor(e,t[e].cursor)))},g=function(t,e,n,r,i,s,o){if(this.isControlVisible(t)){var a=this.cornerSize,c=this.cornerStrokeColor||"transparent",u=this.cornerBackgroundColor||"black",h=this.cornerShape||"rect",l="number"==typeof this.cornerPadding?this.cornerPadding:10;if(o&&(o.cornerSize&&(r=r+a/2-o.cornerSize/2,i=i+a/2-o.cornerSize/2,a=o.cornerSize),h=o.cornerShape||h,u=o.cornerBackgroundColor||u,c=o.cornerStrokeColor||c,l="number"==typeof o.cornerPadding?o.cornerPadding:l),this.useCustomIcons)if(h){switch(e.strokeStyle=c,e.fillStyle=u,e.globalAlpha=1,e.lineWidth=1,h){case"rect":e.fillRect(r,i,a,a),c&&e.strokeRect(r,i,a,a);break;case"circle":e.beginPath(),e.arc(r+a/2,i+a/2,a/2,0,2*Math.PI),e.fill(),c&&e.stroke(),e.closePath()}void 0!==s&&e[n](s,r+l/2,i+l/2,a-l,a-l)}else void 0!==s&&e[n](s,r,i,a,a);else("undefined"!=typeof G_vmlCanvasManager||this.transparentCorners)&&e.clearRect(r,i,a,a),e[n+"Rect"](r,i,a,a),!this.transparentCorners&&c&&e.strokeRect(r,i,a,a)}},m=function(t){if(!this.hasControls)return this;var e,n=this._calculateCurrentDimensions(),r=n.x,i=n.y,s=this.cornerSize,o=-(r+s)/2,a=-(i+s)/2;return this.useCustomIcons?e="drawImage":(t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),e=this.transparentCorners?"stroke":"fill"),t.save(),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,e,o,a,this.tlIcon,this.tlSettings),this._drawControl("tr",t,e,o+r,a,this.trIcon,this.trSettings),this._drawControl("bl",t,e,o,a+i,this.blIcon,this.blSettings),this._drawControl("br",t,e,o+r,a+i,this.brIcon,this.brSettings),this.get("lockUniScaling")||(this._drawControl("mt",t,e,o+r/2,a,this.mtIcon,this.mtSettings),this._drawControl("mb",t,e,o+r/2,a+i,this.mbIcon,this.mbSettings),this._drawControl("mr",t,e,o+r,a+i/2,this.mrIcon,this.mrSettings),this._drawControl("ml",t,e,o,a+i/2,this.mlIcon,this.mlSettings)),this.hasRotatingPoint&&this._drawControl("mtr",t,e,o+r/2,a-this.rotatingPointOffset,this.mtrIcon,this.mtrSettings),t.restore(),this},v=function(t,e){var n=this,r=e.icon,i=e.settings,s=new Image;s.onerror=function(){},s.onload=function(){n[t+"Icon"]=s,i&&(n[t+"Settings"]=i),n.canvas&&n.canvas.renderAll()},s.crossOrigin="anonymous",s.src=r},p=function(t){var e=this;this.prevent&&(t=d),"settings"in t&&(this.useCustomIcons=!0,Object.keys(t.settings).forEach((function(n){e[n]=t.settings[n]}))),Object.keys(t).filter((function(e){return t[e].icon})).forEach((function(n){var r={};r.icon=t[n].icon,void 0!==t[n].settings&&(r.settings=t[n].settings),e.loadIcon(n,r)}))},s=e.fabric,t.next=20,Promise.resolve().then(n.bind(null,163));case 20:return o=t.sent,c=o.blank,h={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},"resize",null,f=u(u({},(l=["bl","br","tl","tr","ml","mb","mr","mt"]).reduce((function(t,e){return u(u({},t),{},Object(i.a)({},e,{cursor:"resize",action:null}))}),{})),{},{mtr:{cursor:null,action:null}}),d=u(u({},l.reduce((function(t,e){return u(u({},t),{},Object(i.a)({},e,{icon:c}))}),{})),{},{mtr:{icon:c},settings:{borderColor:"#0094dd",cornerBackgroundColor:"#0094dd",cornerShape:"rect",cornerSize:10}}),D={useCustomIcons:!1,cornerBackgroundColor:"transparent",cornerShape:"",cornerPadding:0,customiseCornerIcons:p,loadIcon:v,drawControls:m,_drawControl:g},S={overwriteActions:!1,fixedCursors:!1,customiseControls:b,setCustomAction:w,setCustomCursor:x,_getActionFromCorner:j,_setupCurrentTransform:_,_removeAction:k,_moveLayerUpAction:O,_moveLayerDownAction:C,_rotateByDegrees:T,getCornerCursor:M},s.util.object.extend(s.Canvas.prototype,S),s.util.object.extend(s.Object.prototype,S),s.util.object.extend(s.Object.prototype,D),t.abrupt("return",s);case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},431:function(t,e,n){var r={".":[4],"./":[4],"./blur":[353],"./blur.mjs":[353],"./brush":[320],"./brush.mjs":[320],"./brushes":[107],"./brushes/":[107],"./brushes/circle_brush":[316],"./brushes/circle_brush.mjs":[316],"./brushes/index":[107],"./brushes/index.mjs":[107],"./brushes/pattern_brush":[315],"./brushes/pattern_brush.mjs":[315],"./brushes/pencil_brush":[317],"./brushes/pencil_brush.mjs":[317],"./brushes/spray_brush":[318],"./brushes/spray_brush.mjs":[318],"./brushes/util.extend":[314],"./brushes/util.extend.mjs":[314],"./bulge":[350],"./bulge.mjs":[350],"./clip":[322],"./clip.mjs":[322],"./clone":[349],"./clone.mjs":[349],"./color-adjust":[304],"./color-adjust.mjs":[304],"./color-alpha":[308],"./color-alpha.mjs":[308],"./color-correction":[305],"./color-correction.mjs":[305],"./color-decrease":[306],"./color-decrease.mjs":[306],"./color-replace":[307],"./color-replace.mjs":[307],"./color-zoom":[309],"./color-zoom.mjs":[309],"./colors":[149],"./colors.mjs":[149],"./compress":[324],"./compress.mjs":[324],"./controls":[355],"./controls.mjs":[355],"./copier":[319],"./copier.mjs":[319],"./crop":[321],"./crop.mjs":[321],"./cropzone":[323],"./cropzone.mjs":[323],"./cursors":[82],"./cursors.mjs":[82],"./curved":[510,30],"./curved-text":[342],"./curved-text.mjs":[342],"./curved.mjs":[510,30],"./desaturate":[347],"./desaturate.mjs":[347],"./dinamic":[265,10],"./dinamic/":[265,10],"./dinamic/balloons":[727,17],"./dinamic/balloons.mjs":[727,17],"./dinamic/colony":[737,11],"./dinamic/colony.mjs":[737,11],"./dinamic/cosmo-particles":[728,18],"./dinamic/cosmo-particles.mjs":[728,18],"./dinamic/draw-buffer":[699,46],"./dinamic/draw-buffer.mjs":[699,46],"./dinamic/fabric-particles":[729,19],"./dinamic/fabric-particles.mjs":[729,19],"./dinamic/geometry":[730,20],"./dinamic/geometry-shape":[715,47],"./dinamic/geometry-shape.mjs":[715,47],"./dinamic/geometry.mjs":[730,20],"./dinamic/gradient":[731,21],"./dinamic/gradient-circle":[716,74],"./dinamic/gradient-circle.mjs":[716,74],"./dinamic/gradient.mjs":[731,21],"./dinamic/grid":[742,45],"./dinamic/grid.mjs":[742,45],"./dinamic/index":[265,10],"./dinamic/index.mjs":[265,10],"./dinamic/layer":[717,75],"./dinamic/layer.mjs":[717,75],"./dinamic/loop":[718,76],"./dinamic/loop.mjs":[718,76],"./dinamic/mesh":[719,77],"./dinamic/mesh.mjs":[719,77],"./dinamic/mystical":[732,11,22],"./dinamic/mystical.mjs":[732,11,22],"./dinamic/neon":[733,23],"./dinamic/neon.mjs":[733,23],"./dinamic/noisy":[734,24],"./dinamic/noisy-circle":[720,78],"./dinamic/noisy-circle.mjs":[720,78],"./dinamic/noisy.mjs":[734,24],"./dinamic/octopus":[735,25],"./dinamic/octopus.mjs":[735,25],"./dinamic/particle":[714,79],"./dinamic/particle.mjs":[714,79],"./dinamic/rain":[721,80],"./dinamic/rain.mjs":[721,80],"./dinamic/smoothtrail":[743,81],"./dinamic/smoothtrail.mjs":[743,81],"./dinamic/spark-particle":[722,82],"./dinamic/spark-particle.mjs":[722,82],"./dinamic/sparkling":[736,27],"./dinamic/sparkling.mjs":[736,27],"./dinamic/star":[713,83],"./dinamic/star.mjs":[713,83],"./dinamic/tentacle":[712,48],"./dinamic/tentacle.mjs":[712,48],"./distort":[234],"./distort.mjs":[234],"./drawers":[188],"./drawers/":[188],"./drawers/ellipse":[238],"./drawers/ellipse.mjs":[238],"./drawers/image":[239],"./drawers/image.mjs":[239],"./drawers/index":[188],"./drawers/index.mjs":[188],"./drawers/line":[240],"./drawers/line.mjs":[240],"./drawers/polyline":[237],"./drawers/polyline.mjs":[237],"./drawers/rectangle":[235],"./drawers/rectangle.mjs":[235],"./drawers/shape":[65],"./drawers/shape.mjs":[65],"./drawers/text":[241],"./drawers/text.mjs":[241],"./drawers/triangle":[236],"./drawers/triangle.mjs":[236],"./dynamic":[346],"./dynamic.mjs":[346],"./edges":[711,49],"./edges.mjs":[711,49],"./empty":[744,84],"./empty.mjs":[744,84],"./erase":[351],"./erase.mjs":[351],"./extend":[356],"./extend.mjs":[356],"./fill":[354],"./fill.mjs":[354],"./filters":[358],"./filters.mjs":[358],"./filters/redeye":[745,85],"./filters/redeye.mjs":[745,85],"./filters/redify":[511,32],"./filters/redify.mjs":[511,32],"./filters/sepia2":[746,86],"./filters/sepia2.mjs":[746,86],"./fonts/inject":[747,87],"./fonts/inject.mjs":[747,87],"./fonts/loader":[136],"./fonts/loader.mjs":[136],"./grid":[357],"./grid.mjs":[357],"./guidelines":[243],"./guidelines.mjs":[243],"./i18n":[512,33],"./i18n.mjs":[512,33],"./import":[37],"./import.mjs":[37],"./index":[4],"./index.mjs":[4],"./leftbar":[311],"./leftbar.mjs":[311],"./libs/effect":[80],"./libs/effect/":[80],"./libs/effect/index":[80],"./libs/effect/index.mjs":[80],"./libs/effect/presets":[748,88],"./libs/effect/presets.js":[748,88],"./libs/glfx":[105],"./libs/glfx/":[105],"./libs/glfx/filters":[40],"./libs/glfx/filters/":[40],"./libs/glfx/filters/adjust/brightnesscontrast":[283],"./libs/glfx/filters/adjust/brightnesscontrast.mjs":[283],"./libs/glfx/filters/adjust/curves":[284],"./libs/glfx/filters/adjust/curves.mjs":[284],"./libs/glfx/filters/adjust/denoise":[285],"./libs/glfx/filters/adjust/denoise.mjs":[285],"./libs/glfx/filters/adjust/huesaturation":[286],"./libs/glfx/filters/adjust/huesaturation.mjs":[286],"./libs/glfx/filters/adjust/noise":[287],"./libs/glfx/filters/adjust/noise.mjs":[287],"./libs/glfx/filters/adjust/sepia":[288],"./libs/glfx/filters/adjust/sepia.mjs":[288],"./libs/glfx/filters/adjust/unsharpmask":[289],"./libs/glfx/filters/adjust/unsharpmask.mjs":[289],"./libs/glfx/filters/adjust/vibrance":[290],"./libs/glfx/filters/adjust/vibrance.mjs":[290],"./libs/glfx/filters/adjust/vignette":[291],"./libs/glfx/filters/adjust/vignette.mjs":[291],"./libs/glfx/filters/blur/lensblur":[292],"./libs/glfx/filters/blur/lensblur.mjs":[292],"./libs/glfx/filters/blur/tiltshift":[293],"./libs/glfx/filters/blur/tiltshift.mjs":[293],"./libs/glfx/filters/blur/triangleblur":[294],"./libs/glfx/filters/blur/triangleblur.mjs":[294],"./libs/glfx/filters/blur/zoomblur":[295],"./libs/glfx/filters/blur/zoomblur.mjs":[295],"./libs/glfx/filters/common":[63],"./libs/glfx/filters/common.mjs":[63],"./libs/glfx/filters/fun/colorhalftone":[296],"./libs/glfx/filters/fun/colorhalftone.mjs":[296],"./libs/glfx/filters/fun/dotscreen":[297],"./libs/glfx/filters/fun/dotscreen.mjs":[297],"./libs/glfx/filters/fun/edgework":[298],"./libs/glfx/filters/fun/edgework.mjs":[298],"./libs/glfx/filters/fun/hexagonalpixelate":[299],"./libs/glfx/filters/fun/hexagonalpixelate.mjs":[299],"./libs/glfx/filters/fun/ink":[300],"./libs/glfx/filters/fun/ink.mjs":[300],"./libs/glfx/filters/index":[40],"./libs/glfx/filters/index.mjs":[40],"./libs/glfx/filters/warp/bulgepinch":[301],"./libs/glfx/filters/warp/bulgepinch.mjs":[301],"./libs/glfx/filters/warp/matrixwarp":[302],"./libs/glfx/filters/warp/matrixwarp.mjs":[302],"./libs/glfx/filters/warp/swirl":[303],"./libs/glfx/filters/warp/swirl.mjs":[303],"./libs/glfx/index":[105],"./libs/glfx/index.mjs":[105],"./libs/glfx/matrix":[153],"./libs/glfx/matrix.mjs":[153],"./libs/glfx/polyfill":[428],"./libs/glfx/polyfill.mjs":[428],"./libs/glfx/spline":[333],"./libs/glfx/spline.mjs":[333],"./libs/glfx/webgl":[242],"./libs/glfx/webgl.mjs":[242],"./libs/imgreduce":[225],"./libs/imgreduce.mjs":[225],"./libs/magic-wand":[100],"./libs/magic-wand.mjs":[100],"./libs/stackblur":[513,28],"./libs/stackblur.mjs":[513,28],"./libs/webgl":[173],"./libs/webgl/":[173],"./libs/webgl/index":[173],"./libs/webgl/index.mjs":[173],"./locker":[228],"./locker.mjs":[228],"./magic":[352],"./magic.mjs":[352],"./mask-history":[400,14],"./mask-history.mjs":[400,14],"./merge":[344],"./merge.mjs":[344],"./prevent":[401,15],"./prevent.mjs":[401,15],"./printer":[313],"./printer.mjs":[313],"./promo":[345],"./promo.mjs":[345],"./proxy-frame":[514,34],"./proxy-frame.mjs":[514,34],"./proxy-image":[515,35],"./proxy-image.mjs":[515,35],"./proxy-shape":[516,36],"./proxy-shape.mjs":[516,36],"./proxy-svg":[517,37],"./proxy-svg.mjs":[517,37],"./proxy-text":[518,38],"./proxy-text.mjs":[518,38],"./qrcode":[343],"./qrcode.mjs":[343],"./render-stack":[341],"./render-stack.mjs":[341],"./rightbar":[310],"./rightbar.mjs":[310],"./sharpen":[348],"./sharpen.mjs":[348],"./state-manager":[340],"./state-manager.mjs":[340],"./text-renderer":[498,39],"./text-renderer.mjs":[498,39],"./toolbox":[359],"./toolbox.mjs":[359],"./topmenu":[312],"./topmenu.mjs":[312],"./topmenu/edit":[338],"./topmenu/edit.mjs":[338],"./topmenu/file":[337],"./topmenu/file.mjs":[337],"./topmenu/help":[339],"./topmenu/help.mjs":[339],"./topmenu/image":[334],"./topmenu/image.mjs":[334],"./topmenu/layer":[335],"./topmenu/layer.mjs":[335],"./topmenu/tools":[336],"./topmenu/tools.mjs":[336],"./upscale":[325],"./upscale.mjs":[325],"./widgets":[195],"./widgets.mjs":[195]};function i(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],i=e[0];return Promise.all(e.slice(1).map(n.e)).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=431,t.exports=i},65:function(t,e,n){"use strict";n.r(e),n.d(e,"Shape",(function(){return s}));var r=n(10),i=n(11),s=(n(256),n(3),function(){function t(e){Object(r.a)(this,t),this.drawingMode=e.drawingMode,this.type=e.type}return Object(i.a)(t,[{key:"origin",value:function(t,e){return{originX:this.origX>t?"right":"left",originY:this.origY>e?"bottom":"top"}}},{key:"scale",value:function(t,e){var n=Math.abs(this.origY-e),r=Math.abs(this.origX-t),i=Math.hypot(r,n)/this.hypot;return{scaleX:i,scaleY:i}}},{key:"equal",value:function(t,e,n){var r=e.x,i=e.y,s=this.origin(r,i),o=s.originX,a=s.originY,c=Math.abs(this.origY-i),u=Math.abs(this.origX-r);return n&&(c=u=Math.max(c,u)),new Promise((function(e){return e(t.set({originX:o,originY:a,height:c,width:u}).setCoords())}))}},{key:"apply",value:function(){return Promise.resolve({})}},{key:"toJson",value:function(){return{drawingMode:this.drawingMode,type:this.type}}}]),t}())},68:function(t,e,n){"use strict";n.r(e),n.d(e,"queueMicrotask",(function(){return r})),n.d(e,"requestIdleCallback",(function(){return i})),n.d(e,"cancelIdleCallback",(function(){return s})),n.d(e,"nextFrame",(function(){return o})),n.d(e,"cancelFrame",(function(){return a})),n.d(e,"nextTick",(function(){return c})),n.d(e,"timedProcess",(function(){return u})),n.d(e,"fulfill",(function(){return h})),n.d(e,"running",(function(){return l})),n.d(e,"carryOut",(function(){return f}));n(850),n(3),n(51),n(24),n(740),n(27);var r=("undefined"!=typeof window?window.queueMicrotask:void 0)||function(t){Promise.resolve().then(t).catch((function(t){return setTimeout((function(){throw t}))}))},i=("undefined"!=typeof window?window.requestIdleCallback:void 0)||function(t){var e=Date.now();return setTimeout((function(){t({timeRemaining:function(){return Math.max(0,50-(Date.now()-e))},didTimeout:!1})}))},s=("undefined"!=typeof window?window.cancelIdleCallback:void 0)||function(t){clearTimeout(t)},o=function(){if("undefined"==typeof window)return function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var t=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),e=window.requestAnimationFrame;return("function"!=typeof e||t)&&["webkit","moz","o","ms"].some((function(t){return!!window[t+"RequestAnimationFrame"]&&(e=window[t+"RequestAnimationFrame"],!0)})),e}(),a=function(){if("undefined"==typeof window)return clearTimeout;var t=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),e=window.cancelAnimationFrame;return("function"!=typeof e||t)&&["webkit","moz","o","ms"].some((function(t){return!!window[t+"CancelAnimationFrame"]&&(e=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"],!0)})),e}(),c=function(){var t=function(t){return setTimeout(t,0)};if("undefined"==typeof window)return t;if(window.setImmediate)return function(t){return window.setImmediate(t)};if(window.postMessage&&window.addEventListener){var e=[];return window.addEventListener("message",(function(t){var n,r=t.source;r!==window&&null!==r||"process-tick"!==t.data||(t.stopPropagation(),e.length>0&&"function"==typeof(n=e.shift())&&n())}),!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return t}();function u(t,e,n){var r=t.concat();setTimeout((function i(){var s=+new Date;do{e(r.shift())}while(r.length>0&&+new Date-s<50);r.length>0?setTimeout(i,100):n(t)}),100)}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return i((function(e){for(;(e.timeRemaining()>0||e.didTimeout)&&!(n<=0||t());)n--}),{timeout:e})}function l(t){var e,n=0,r=+new Date;return new Promise((function(i){!function r(s){e=o(r),t(s,n)&&(a(e),i()),n++}(r)}))}function f(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=0,s=function s(c){if(e=o(s),n)return a(e);i<c&&(i=c+r,n=t())};return e=o(s),function(){n=!0}}},82:function(t,e,n){"use strict";n.r(e),n.d(e,"circleCursor",(function(){return i})),n.d(e,"squareCursor",(function(){return s})),n.d(e,"fillCursor",(function(){return o})),n.d(e,"pipetteCursor",(function(){return a}));n(27);var r=function(t){return"data:image/svg+xml;base64,".concat(btoa(t))};function i(t,e,n){var i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(2*(t*=e)," ").concat(2*t,'" height="').concat(t,'" width="').concat(t,'">\n        <circle fill="').concat(n,'" cx="').concat(t,'" cy="').concat(t,'" r="').concat(t,'" />\n    </svg>');return"".concat("url(".concat(r(i),") ").concat(t/2," ").concat(t/2),", auto")}function s(t,e,n){var i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(t*=e," ").concat(t,'" height="').concat(t,'" width="').concat(t,'">\n        <rect height="').concat(t,'" width="').concat(t,'" fill="').concat(n,'" />\n    </svg>');return"".concat("url(".concat(r(i),") ").concat(t/2," ").concat(t/2),", auto")}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=function(t){return"url(".concat(r(t),") 6 30")},i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="'.concat(t*=e,'" width="').concat(t,'">\n        <path fill="#fff" stroke="#000" stroke-width="1" d="M5 15.18C5 15.18 7 17.47 7 18.88C7 20.05 6.1 21 5 21C3.89 21 3 20.05 3 18.88C3 17.47 5 15.18 5 15.18M18.79 13.59L14 8.52L9.21 13.59M16.38 3L17.79 4.49L15.41 7.01C18.5 10.28 20.21 12.1 20.56 12.47C21.15 13.06 21.15 14.09 20.56 14.71C20.01 15.29 15.61 19.95 15.06 20.53C14.77 20.84 14.38 21 14 21C13.62 21 13.23 20.84 12.94 20.53C12.39 19.95 7.99 15.29 7.44 14.71C6.85 14.09 6.85 13.06 7.44 12.47C8.63 11.2 11.61 8.05 16.38 3Z" />\n    </svg>');return"".concat(n(i),", auto")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,e=function(t){return"url(".concat(r(t),") 4 20")},n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="'.concat(t,'" width="').concat(t,'">\n        <path fill="#fff" stroke="#000" stroke-width="1" d="M19.35,11.72L17.22,13.85L15.81,12.43L8.1,20.14L3.5,22L2,20.5L3.86,15.9L11.57,8.19L10.15,6.78L12.28,4.65L19.35,11.72M16.76,3C17.93,1.83 19.83,1.83 21,3C22.17,4.17 22.17,6.07 21,7.24L19.08,9.16L14.84,4.92L16.76,3M5.56,17.03L4.5,19.5L6.97,18.44L14.4,11L13,9.6L5.56,17.03Z" />\n    </svg>');return"".concat(e(n),", auto")}}}]);