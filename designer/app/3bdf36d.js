(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{1078:function(t,e,i){"use strict";var s=i(1076);e.a=s.a},1081:function(t,e,i){"use strict";var s=i(6),r=i(1128),a=i(74),n=i(73),o=i(96),c=i(370);s({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=a(this),i=n(e),s=c(e,0);return s.length=r(s,e,e,i,0,void 0===t?1:o(t)),s}})},1082:function(t,e,i){i(177)("flat")},1095:function(t,e,i){"use strict";var s={inserted:function(t,e,i){var s=e.value,r=e.options||{passive:!0};window.addEventListener("resize",s,r),t._onResize=Object(t._onResize),t._onResize[i.context._uid]={callback:s,options:r},e.modifiers&&e.modifiers.quiet||s()},unbind:function(t,e,i){var s;if(null===(s=t._onResize)||void 0===s?void 0:s[i.context._uid]){var r=t._onResize[i.context._uid],a=r.callback,n=r.options;window.removeEventListener("resize",a,n),delete t._onResize[i.context._uid]}}};e.a=s},1105:function(t,e,i){},1106:function(t,e,i){},1124:function(t,e,i){},1128:function(t,e,i){"use strict";var s=i(7),r=i(253),a=i(73),n=i(59),o=s.TypeError,c=function(t,e,i,s,l,h,u,d){for(var p,g,m=l,f=0,v=!!u&&n(u,d);f<s;){if(f in i){if(p=v?v(i[f],f,e):i[f],h>0&&r(p))g=a(p),m=c(t,e,p,g,m,h-1)-1;else{if(m>=9007199254740991)throw o("Exceed the acceptable array length");t[m]=p}m++}f++}return m};t.exports=c},1143:function(t,e,i){"use strict";i(12),i(16),i(19),i(3),i(26),i(9),i(27);var s=i(2),r=(i(87),i(1081),i(1082),i(1124),i(1078)),a=i(1112),n=i(1079),o=i(466);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a=Object(o.a)(a.a,n.a,r.a).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return l(l({"v-card":!0},n.a.options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},r.a.options.computed.classes.call(this))},styles:function(){var t=l({},r.a.options.computed.styles.call(this));return this.img&&(t.background='url("'.concat(this.img,'") center center / cover no-repeat')),t}},methods:{genProgress:function(){var t=a.a.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),i=e.tag,s=e.data;return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),t(i,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},1150:function(t,e,i){"use strict";var s=i(13),r=(i(87),i(75),i(472),i(84),i(51),i(1105),i(471)),a=(i(1106),i(1096)),n=i(466),o=i(47),c=Object(n.a)(a.a).extend({name:"v-responsive",props:{aspectRatio:[String,Number],contentClass:String},computed:{computedAspectRatio:function(){return Number(this.aspectRatio)},aspectStyle:function(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer:function(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-responsive__content",class:this.contentClass},Object(o.s)(this))}},render:function(t){return t("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),l=i(467),h=i(470),u=i(72),d="undefined"!=typeof window&&"IntersectionObserver"in window;e.a=Object(n.a)(c,l.a).extend({name:"v-img",directives:{intersect:r.a},props:{alt:String,contain:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:function(){return{root:void 0,rootMargin:void 0,threshold:void 0}}},position:{type:String,default:"center center"},sizes:String,src:{type:[String,Object],default:""},srcset:String,transition:{type:[Boolean,String],default:"fade-transition"}},data:function(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0,naturalWidth:void 0,hasError:!1}},computed:{computedAspectRatio:function(){return Number(this.normalisedSrc.aspect||this.calculatedAspectRatio)},normalisedSrc:function(){return this.src&&"object"===Object(s.a)(this.src)?{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect)}:{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||0)}},__cachedImage:function(){if(!(this.normalisedSrc.src||this.normalisedSrc.lazySrc||this.gradient))return[];var t=[],e=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&t.push("linear-gradient(".concat(this.gradient,")")),e&&t.push('url("'.concat(e,'")'));var i=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:t.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[i]):i}},watch:{src:function(){this.isLoading?this.loadImage():this.init(void 0,void 0,!0)},"$vuetify.breakpoint.width":"getSrc"},mounted:function(){this.init()},methods:{init:function(t,e,i){if(!d||i||this.eager){if(this.normalisedSrc.lazySrc){var s=new Image;s.src=this.normalisedSrc.lazySrc,this.pollForSize(s,null)}this.normalisedSrc.src&&this.loadImage()}},onLoad:function(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src),this.image&&(this.normalisedSrc.src.endsWith(".svg")||this.normalisedSrc.src.startsWith("data:image/svg+xml"))&&(this.image.naturalHeight&&this.image.naturalWidth?(this.naturalWidth=this.image.naturalWidth,this.calculatedAspectRatio=this.image.naturalWidth/this.image.naturalHeight):this.calculatedAspectRatio=1)},onError:function(){this.hasError=!0,this.$emit("error",this.src)},getSrc:function(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage:function(){var t=this,e=new Image;this.image=e,e.onload=function(){e.decode?e.decode().catch((function(e){Object(u.c)("Failed to decode image, trying to render anyway\n\n"+"src: ".concat(t.normalisedSrc.src)+(e.message?"\nOriginal error: ".concat(e.message):""),t)})).then(t.onLoad):t.onLoad()},e.onerror=this.onError,this.hasError=!1,this.sizes&&(e.sizes=this.sizes),this.normalisedSrc.srcset&&(e.srcset=this.normalisedSrc.srcset),e.src=this.normalisedSrc.src,this.$emit("loadstart",this.normalisedSrc.src),this.aspectRatio||this.pollForSize(e),this.getSrc()},pollForSize:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=function s(){var r=t.naturalHeight,a=t.naturalWidth;r||a?(e.naturalWidth=a,e.calculatedAspectRatio=a/r):t.complete||!e.isLoading||e.hasError||null==i||setTimeout(s,i)};s()},genContent:function(){var t=c.options.methods.genContent.call(this);return this.naturalWidth&&this._b(t.data,"div",{style:{width:"".concat(this.naturalWidth,"px")}}),t},__genPlaceholder:function(){var t=Object(o.s)(this,"placeholder");if(t){var e=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},t)]:[];return this.transition?this.$createElement("transition",{props:{appear:!0,name:this.transition}},e):e[0]}}},render:function(t){var e=c.options.render.call(this,t),i=Object(h.a)(e.data,{staticClass:"v-image",attrs:{"aria-label":this.alt,role:this.alt?"img":void 0},class:this.themeClasses,directives:d?[{name:"intersect",modifiers:{once:!0},value:{handler:this.init,options:this.options}}]:void 0});return e.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],t(e.tag,i,e.children)}})},1540:function(t,e,i){"use strict";(function(t){i(12),i(16),i(19),i(26),i(9),i(27);var s=i(33),r=i(2),a=(i(25),i(3),i(24),i(51),i(34),i(83),i(32),i(14),i(15),i(258),i(158));function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c="";e.a={props:{close:{type:Boolean,default:!1}},computed:{color:function(){return this.$vuetify.theme.dark?"gray":this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},cache:function(){return this.$store.state.canvas.cache}},data:function(){return{key:t.env.PIXABAY_KEY,api:t.env.PIXABAY_API,perform:!1,service:!0,smooth:null,images:[],query:"",total:0,page:0,wrapperHeight:0,panelHeight:0,tileHeight:0,height:0}},watch:{images:"initScroll",query:function(t){""===t&&this.clear()}},methods:{valid:function(t){var e=t.status,i=t.data,s="".concat(this.query,"p").concat(this.page);return e&&200===e?i&&0!==parseInt(i.totalHits)?(void 0===this.cache[s]&&this.$store.commit("canvas/set",{cache:o(o({},this.cache),{},Object(r.a)({},s,i))}),!0):(this.$bus.$emit("snack",{content:"graph.search_not_match",color:"warning"}),!1):(this.$bus.$emit("snack",{content:"graph.error_service",color:"error"}),!1)},fromCache:function(){var t=this.cache,e=this.query,i=this.page;return void 0!==t["".concat(e,"p").concat(i)]&&(this.total=t["".concat(e,"p").concat(i)].totalHits,this.images=[].concat(Object(s.a)(this.images),Object(s.a)(t["".concat(e,"p").concat(i)].hits)),!0)},requestsPreAnalysis:function(t){return!this.perform&&(t?(c="summer",this.page=1,!0):!(this.query!==c&&(c=this.query,this.total=this.page=0,this.images=[],this.measure(),!this.query))&&(++this.page>3&&this.page--,!this.fromCache()))},search:function(){var t=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.requestsPreAnalysis(e)&&(this.perform=!0,this.$axios.get(this.api,{crossDomain:!0,timeout:5e3,params:{q:e?"summer":this.query,per_page:200,page:this.page,key:this.key}}).then((function(i){t.service=!0,t.valid(i)&&!e&&(t.total=i.data.totalHits,t.images=[].concat(Object(s.a)(t.images),Object(s.a)(i.data.hits)),t.measure())})).catch((function(e){var i=e.message;/timeout/.test(i)&&(t.service=!1)})).finally((function(){t.perform=!1})))},measure:function(){var t=this;setTimeout((function(){var e,i;t.wrapperHeight=(null===(e=t.$refs.wrapper)||void 0===e?void 0:e.clientHeight)||0,t.panelHeight=(null===(i=t.$refs.panel)||void 0===i?void 0:i.clientHeight)||0;var s,r=t.wrapperHeight-t.panelHeight;r>=0&&(t.height=r),(s=(t.$refs.tile||[])[0])&&(t.tileHeight=Math.floor(s.clientHeight)||100)}))},clear:function(){this.total=this.page=0,this.images=[]},view:function(t){var e,i=this.images.map((function(t){return{src:t.largeImageURL}})),s=3*Math.ceil(this.smooth.offset.y/this.tileHeight)-3,r=3*Math.ceil(this.panelHeight/this.tileHeight),a=null===(e=i[t])||void 0===e?void 0:e.src;return this.smooth.offset.y>this.tileHeight||(s=0),s>0||(s=0),i[t]?i.length<=r?this.$bus.$emit("view",{idx:i.findIndex((function(t){return t.src===a})),frame:i}):(i=i.slice(s,s+r),void this.$bus.$emit("view",{idx:i.findIndex((function(t){return t.src===a})),frame:i})):this.$bus.$emit("snack",{content:"Internal error",color:"error",raw:!0})},initScroll:function(){var t=this;!this.smooth&&this.$refs.panel&&(this.mobile?(i.e(332).then(i.t.bind(null,1871,7)),i.e(332).then(i.t.bind(null,1872,7)).then((function(t){return t.default||t})).then((function(e){t.smooth=e(t.$refs.panel,{scrollbars:{visibility:t.mobile?"hidden":"auto"},callbacks:{onScroll:t.handleScroll}})})).then(this.measure)):i.e(335).then(i.bind(null,1880)).then((function(t){return t.default||t})).then((function(e){t.smooth=e.init(t.$refs.panel,{damping:t.mobile?.1:1,continuousScrolling:!1}),t.smooth.addListener(t.handleScroll),t.smooth.updatePluginOptions("overscroll",{enable:!1})})).then(this.measure))},handleScroll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.offset,i=void 0===e?this.smooth.scroll().position:e;!i.y||this.height-i.y>.7*this.panelHeight||this.total>this.images.length&&this.search()}},created:function(){this.search("summer",!0),this.search=a.debounce.call(this,this.search,1e3)}}}).call(this,i(38))},1577:function(t,e,i){},1755:function(t,e,i){"use strict";i(1577)},1995:function(t,e,i){"use strict";i.r(e);var s=i(1143),r=i(1093),a=i(1150),n=i(1070),o=i(1136),c=i(2),l=(i(24),i(258),i(1540).a),h=(i(1755),i(250)),u=Object(h.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pixabay-content fill-height",class:Object(c.a)({mobile:t.mobile},"theme--".concat(t.$vuetify.theme.dark?"dark":"light"),!0)},[e("div",{staticClass:"pixabay pixabay-search",on:{click:function(t){t.stopPropagation()}}},[e(o.a,{staticClass:"graph-ed-search",attrs:{color:t.color,label:t.$t("graph.search"),"hide-details":"",flat:""},on:{change:t.search,input:t.search},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),t.close?e(r.a,{staticClass:"close-btn",on:{click:function(e){return t.$emit("close")}}},[t._v("\n      mdi-close\n    ")]):t._e()],1),t._v(" "),e("div",{ref:"panel",staticClass:"d-flex pixabay-list scroller"},[t.images.length?e(n.a,{ref:"wrapper",staticClass:"pixabay-list__images",attrs:{wrap:""}},t._l(t.images,(function(i,n){return e("div",{key:n,ref:"tile",refInFor:!0,staticClass:"flex pixabay-list__images--item xs6 sm4"},[e(s.a,{attrs:{tile:"",flat:""}},[e(a.a,{attrs:{src:i.previewURL,"aspect-ratio":"1","min-width":"90px"},on:{click:function(e){return t.$emit("choose",i)}}},[e("div",{staticClass:"view-marker",on:{click:function(e){return e.stopPropagation(),t.view(n)}}},[e(r.a,{attrs:{color:"#fff",dense:""}},[t._v("\n                mdi-eye-outline\n              ")])],1)])],1)],1)})),0):e(n.a,{staticClass:"pixabay-list__images empty-list",attrs:{"justify-center":""}},[e(s.a,{attrs:{tile:"",flat:""}},[e("lazy-graph-pixaby"),t._v(" "),t.service?t._e():e("span",[t._v("\n            Service is not available\n        ")])],1)],1)],1)])}),[],!1,null,"3f6d3222",null);e.default=u.exports}}]);