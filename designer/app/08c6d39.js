(window.webpackJsonp=window.webpackJsonp||[]).push([[264,50,141,151,158,196,214,220,226],{1200:function(t,e,n){"use strict";n.r(e),n.d(e,"ratio",(function(){return a})),n.d(e,"akeys",(function(){return o})),n.d(e,"skeys",(function(){return c})),n.d(e,"pkeys",(function(){return l})),n.d(e,"names",(function(){return u})),n.d(e,"other",(function(){return d})),n.d(e,"dirty",(function(){return h})),n.d(e,"tkeys",(function(){return p})),n.d(e,"avoid",(function(){return f})),n.d(e,"build",(function(){return m})),n.d(e,"empty",(function(){return v})),n.d(e,"empty510",(function(){return g})),n.d(e,"empty480",(function(){return b})),n.d(e,"empty150",(function(){return y})),n.d(e,"extended",(function(){return w})),n.d(e,"passkeys",(function(){return k})),n.d(e,"stopkeys",(function(){return x})),n.d(e,"modules",(function(){return _})),n.d(e,"sizes",(function(){return $})),n.d(e,"payment",(function(){return C})),n.d(e,"currency",(function(){return O})),n.d(e,"declin",(function(){return j})),n.d(e,"values",(function(){return A})),n.d(e,"readers",(function(){return E})),n.d(e,"clearText",(function(){return S})),n.d(e,"listrow",(function(){return D})),n.d(e,"clearList",(function(){return P})),n.d(e,"tableHead",(function(){return L})),n.d(e,"tableBody",(function(){return M})),n.d(e,"clearTable",(function(){return B})),n.d(e,"tile",(function(){return I})),n.d(e,"clearTiles",(function(){return T})),n.d(e,"cover",(function(){return R})),n.d(e,"clearCovers",(function(){return W})),n.d(e,"match",(function(){return z})),n.d(e,"clearMatch",(function(){return H})),n.d(e,"clearDonat",(function(){return Z})),n.d(e,"map",(function(){return G})),n.d(e,"widget",(function(){return Y}));n(16),n(19),n(26),n(9),n(27);var i=n(2);n(3),n(12),n(24),n(53),n(52),n(14);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a={age:"bdate",bdate:"bdate",cities:"city",firstnames:"firstname",lastnames:"lastname"},o={bdate:1,city:1,country:1,interests:1,relation:1,sex:1,firstname:1,lastname:1},c={cities:1,platform:1,relation:1,interests:1,firstname:1,lastname:1,users:1},l={platform:1,lang:1,uid:1},u={firstname:1,lastname:1},d={member:1,notmember:1},h={age:1,day:1,now:1},p={age:1,bdate:1},f={time:1},m=function(t){return Object.keys(t).reduce((function(e,n){return s(s({},e),{},Object(i.a)({},n,t[n]()))}),{})},v=function(){return{value:"empty",module:"Empty",cmp:null}},g={id:null,images:[{url:"/img/icons/1530x384.jpg"}]},b={id:null,images:[{url:"/img/icons/480x720.jpg"}]},y={id:null,images:[{url:"/img/icons/150x150.png"}]},w=["appellation","readers","compact","skid","type"],k=["goal","funded","backers","team_a","team_b"],x=["src","variables","logic"],_=[{entity:"text",text:"text",module:"Text",cmp:"widget-text"},{entity:"list",text:"list",module:"List",cmp:"widget-list"},{entity:"table",text:"table",module:"Table",cmp:"widget-table"},{entity:"tiles",text:"tiles",module:"Tiles",cmp:"widget-tiles"},{entity:"cover_list",text:"covers",module:"Covers",cmp:"widget-covers"},{entity:"match",text:"match",module:"Match",cmp:"widget-match"},{entity:"donation",text:"donat",module:"Donation",cmp:"widget-donation"}],$=[{type:"510x128",width:1530,height:384},{type:"160x240",width:480,height:720},{type:"160x160",width:480,height:480},{type:"50x50",width:150,height:150},{type:"24x24",width:72,height:72}],C={qiwi:{icon:"payouts__icon-qiwi",mask:"+7##########",title:"QIWI кошелек",descr:"Введите номер кошелька QIWI",valid:function(t){return 11===t.length},label:"+79991112233"},yandex:{icon:"payouts__icon-yandex",mask:"##############",title:"Яндекс.Деньги",descr:"Введите номер кошелька Яндекс",valid:function(t){return/^4100\d{10,11}/.test(t)},label:"41001112223334"},webmoney:{icon:"payouts__icon-webmoney",mask:"R############",title:"Webmoney",descr:"Введите номер кошелька Webmoney",valid:function(t){return/^[ZER]\d{12}/.test(t)},label:"R111222333444"},mobile:{icon:"payouts__icon-mobile",mask:"+7##########",title:"Счёт мобильного телефона",descr:"Введите номер телефона",valid:function(t){return 11===t.length},label:"+79991112233"},card:{icon:"payouts__icon-card",mask:"credit-card",title:"Банковская карта",descr:"Введите номер банковской карты",label:"4276-5500-1111-2222",valid:function(t){for(var e,n=t.replace(/ /g,""),i=0,r=0;r<n.length;r++)e=parseInt(n.substr(r,1)),r%2==0&&(e*=2)>9&&(e=1+e%10),i+=e;return i%10==0}}},O=[{id:"RUB",desc:"Рубль",sign:"₽"},{id:"USD",desc:"Доллар",sign:"$"},{id:"UAH",desc:"Гривна",sign:"₴"},{id:"BYN",desc:"Белорусский рубль",sign:"бел.руб."},{id:"EUR",desc:"Евро",sign:"€"},{id:"MDL",desc:"Молдавский лей",sign:"лей"},{id:"AZN",desc:"Азербайджанский манат",sign:"ман"},{id:"GEL",desc:"Грузинский лари",sign:"лари"},{id:"AMD",desc:"Армянский драм",sign:"драм"},{id:"ILS",desc:"Израильский шекель",sign:"шекель"},{id:"GBP",desc:"Фунт стерлингов",sign:"£"},{id:"TMT",desc:"Туркменский манат",sign:"манат"},{id:"KGS",desc:"Киргизский сом",sign:"сом"},{id:"KZT",desc:"Казахский тенге",sign:"₸"}],j={currency:{ru:{ILS:["шекель","шекеля","шекелей"],TMT:["манат","маната","манатов"],KGS:["сом","сома","сомов"]},en:{ILS:"shekel",TMT:"manat",KGS:"som"}},humans:{ru:["человек","человека","человек"],en:["person","people","people"]}},A=function(){return{age:0,alter:"{}",bdate:"''",now:"''",city:"{}",gid:null,gids:"[]",interests:"''",firstname:"''",lastname:"''",member:0,notmember:1,relation:0,set:"[]",sex:0}},E=function(){return{age:{current:{from:null,to:null}},relation:{current:0},bdate:{current:0},sex:{current:0},firstnames:[],lastnames:[],interests:[],notmember:[],platform:[],cities:[],member:[],users:[]}},S=function(){return{readers:E(),variables:null,logic:null,type:"text",title:"",descr:"",text:"",more:"",more_url:null}},D=function(){return{src:"/img/icons/150x150.png",title:"",title_url:null,button:"",button_url:null,icon_id:null,address:"",time:"",text:""}},P=function(){return{readers:E(),variables:null,logic:null,type:"compact_list",compact:!0,title:"",rows:[D()],more:"",more_url:null}},L=function(){return{text:"",align:null}},M=function(){return{text:"",url:null,src:"/img/icons/150x150.png"}},B=function(){return{readers:E(),variables:null,logic:null,type:"table",title:"",head:[L()],body:[[M()]],more:"",more_url:null}},I=function(){return{src:"/img/icons/480x480.jpg",title:"",descr:"",link:"",link_url:null,icon_id:null,url:null}},T=function(){return{readers:E(),variables:null,logic:null,compact:!0,type:"tiles",title:"",tiles:Array.from({length:10},(function(){return I()})),more:"",more_url:null}},R=function(){return{src:"/img/icons/1530x384.jpg",title:"",descr:"",button:"",button_url:null,cover_id:null,url:null}},W=function(){return{readers:E(),variables:null,logic:null,type:"cover_list",title:"",rows:[R()],more:"",more_url:null}},z=function(){return{team_a:{name:"",descr:"",icon_id:null,src:"/img/icons/150x150.png"},team_b:{name:"",descr:"",icon_id:null,src:"/img/icons/150x150.png"},events:{team_a:[],team_b:[]},score:{team_a:0,team_b:0},state:""}},H=function(){return{readers:E(),variables:null,logic:null,type:"match",title:"",match:z(),more:"",more_url:null}},Z=function(){return{readers:E(),variables:null,logic:null,type:"donation",title:"",text:"",data:{start:null,end:null},goal:0,funded:0,backers:0,currency:null,more:"",more_url:null,button_url:null}},G={text:S,list:P,table:B,tiles:T,cover_list:W,match:H,donation:Z},Y=function(){return m(G)}},1258:function(t,e,n){},1259:function(t,e,n){},1260:function(t,e,n){},1262:function(t,e,n){},1389:function(t,e,n){},1390:function(t,e,n){},1391:function(t,e,n){},1392:function(t,e,n){},1393:function(t,e,n){},1394:function(t,e,n){},1395:function(t,e,n){"use strict";n(1258)},1396:function(t,e,n){"use strict";n(1259)},1397:function(t,e,n){"use strict";n(1260)},1398:function(t,e,n){},1399:function(t,e,n){},1400:function(t,e,n){},1401:function(t,e,n){},1402:function(t,e,n){},1406:function(t,e,n){},1407:function(t,e,n){},1408:function(t,e,n){},1414:function(t,e,n){"use strict";n(1262)},1416:function(t,e,n){},1417:function(t,e,n){},1447:function(t,e,n){"use strict";n.r(e),n.d(e,"draggableEvents",(function(){return i})),n.d(e,"empty",(function(){return r})),n.d(e,"drop",(function(){return s})),n.d(e,"logo",(function(){return a})),n.d(e,"busEvents",(function(){return o}));var i=["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",s={url:"img/graph/drop.svg",text:"DROP IMAGE HERE"},a={url:"img/graph/logo.svg",text:"NETAGGREGATOR"},o={"context:on-change":"contextOnChange","canvas:reload":"canvasFinalize","paste:image":"imgResolver","edit:tmpl":"checkRunState"}},1460:function(t,e,n){"use strict";n.r(e);n(12),n(16),n(19),n(3),n(26),n(9),n(27);var i=n(2),r=(n(87),n(202));function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o=Math.floor,c=Math.max,l=Math.min;function u(t){return{x:void 0!==t.clientX?t.clientX:t.touches[0].clientX,y:void 0!==t.clientY?t.clientY:t.touches[0].clientY}}var d={props:{type:{required:!0,type:String},snap:{type:[Number,String],default:1},id:{required:!0,type:Number},evt:{default:null},set:{default:null}},data:function(){return{drag:!1,percent:0,pixel:0,display:"none",left:0,top:0}},computed:a(a({},Object(r.b)("canvas",["client","origin","scaled","track"])),{},{eventsDetermine:function(){return this.mobile?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"}},originSize:function(){return"v"===this.type?this.origin.width:this.origin.height},scaledSize:function(){return"v"===this.type?this.scaled.width:this.scaled.height},cursor:function(){return"v"===this.type?"col-resize":"row-resize"},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},info:function(){var t=this.display,e=this.left,n=this.top;return this.drag&&(t="block"),this.pixel<0&&(t="none"),{display:t,left:e,top:n}}}),watch:{drag:function(t){document.body.style.cursor=t?this.cursor:"auto"},set:function(t){this.setPercent(t).setGuide()}},methods:{addEvents:function(){var t=this.eventsDetermine,e=t.move,n=t.end;document.addEventListener(e,this.mouseMove),document.addEventListener(n,this.mouseUp)},removeEvents:function(){var t=this.eventsDetermine,e=t.move,n=t.end;document.removeEventListener(e,this.mouseMove),document.removeEventListener(n,this.mouseUp)},update:function(t){var e=t.id,n=t.percent,i=t.pixel;i<0&&(n=null,i=null),this.$emit("update:guide",{id:e,percent:n,pixel:i})},setGuide:function(){var t=0,e=0;switch(this.type){case"v":t=this.percent+"%";break;case"h":e=this.percent+"%"}return this.$el.style.left=t,this.$el.style.top=e,this},setInfo:function(t){var e,n,i=t.clientX,r=t.clientY;if("v"===this.type)switch(n=c(l(r,this.scaled.height)-27,2),e=2,!0){case i>this.scaled.width:e=-52;break;case i>this.scaled.width-52:e=this.scaled.width-i-52}if("h"===this.type)switch(e=c(l(i,this.scaled.width)-52,2),n=2,!0){case r>this.scaled.height:n=-27;break;case r>this.scaled.height-27:n=this.scaled.height-r-27}return this.left=e+"px",this.top=n+"px",this.pixel>=0&&(this.display="block"),this},calcPercent:function(t){var e=t.clientX,n=t.clientY,i="v"===this.type?e:n,r=Number(this.snap);return i=c(l(i,this.scaledSize),-30),i/=this.scaled.scale,i=o(i),i-=i%r,this.percent=100*i/this.originSize,this.pixel=i,this},setPercent:function(t){var e=t.percent,n=t.pixel;return this.percent=e,this.pixel=n,this},mouseUp:function(){this.removeEvents(),this.drag=!1,this.update(this)},mouseMove:function(t){var e=u(t),n=e.x,i=e.y;n-=this.client.left+this.track.x,i-=this.client.top+this.track.y,this.calcPercent({clientX:n,clientY:i}).setInfo({clientX:n,clientY:i}).setGuide()},mouseDown:function(t){var e=u(t),n=e.x,i=e.y;this.mouseMove({clientX:n,clientY:i}),this.addEvents(),this.drag=!0},mouseOver:function(){this.display="block"},mouseOut:function(){this.display="none"}},beforeDestroy:function(){document.body.style.cursor="auto",this.display="none",this.removeEvents()},mounted:function(){var t=this.eventsDetermine.start;switch(this.$el.addEventListener(t,this.mouseDown),this.mobile||(this.$el.addEventListener("mouseover",this.mouseOver),this.$el.addEventListener("mouseout",this.mouseOut)),!0){case null!==this.evt:this.mouseDown(this.evt);break;case null!==this.set:this.setPercent(this.set).setGuide()}}},h=(n(1396),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"guide track",class:t.type},[e("div",{staticClass:"info unselectable track",style:t.info,domProps:{innerHTML:t._s(t.pixel+"px")}})])}),[],!1,null,"6557ad6a",null);e.default=p.exports},1461:function(t,e,n){"use strict";n.r(e);var i=n(1093),r=n(1118),s=n(1097),a=n(1094),o=n(1106),c=(n(12),n(16),n(19),n(3),n(26),n(9),n(27),n(2));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={props:["canvas"],computed:{guidesList:function(){return this.$store.state.canvas.guidesList},gridList:function(){return this.$store.state.canvas.gridList},controls:function(){return this.$store.state.canvas.controls},themeClasses:function(){var t,e=this.$vuetify.theme,n=this.color;return t={},Object(c.a)(t,e.dark?"theme--dark":"theme--lignt",!0),Object(c.a)(t,n,!0),t},color:function(){return this.$store.state.app.color},list:function(){return[{text:this.controls.guides?"Hide guides":"Show guides",hotkey:"Ctrl + Alt + G",alias:"guides",disabled:!this.guidesList.length},{text:"Clear guides",hotkey:"Ctrl + Alt + D",alias:"clear",disabled:!this.guidesList.length},{text:"Open guides",hotkey:"Ctrl + Alt + O",alias:"open",disabled:!this.gridList.length},{text:"Save guides",hotkey:"Ctrl + Alt + M",alias:"save",disabled:!this.guidesList.length},{text:"Snap to",hotkey:"Ctrl + Alt + C",alias:"snap",disabled:!1},{text:this.grid?"Hide grid":"Show grid",hotkey:"Ctrl + Alt + L",alias:"grid",disabled:!1}]}},watch:{canvas:function(t){t&&t.on("grid:toggle",this.onToggle)}},data:function(){return{grid:!1}},methods:{updateControls:function(t){this.$store.commit("canvas/set",{controls:u(u({},this.controls),t)})},clearGuidesList:function(){this.$store.commit("canvas/set",{guidesList:[]})},handlerReload:function(){this.canvas&&(this.canvas.off("grid:toggle",this.onToggle),this.canvas.on("grid:toggle",this.onToggle)),this.grid=!1},onToggle:function(){this.grid=(this.canvas||{}).showGrid},choice:function(t){if(!t.disabled){var e=this.controls,n=e.guides,i=e.open,r=e.save,s=e.snap,a=e.info,o=this.grid;switch(t.alias){case"guides":this.updateControls({guides:!n});break;case"open":this.updateControls({open:!i,save:!1,snap:!1});break;case"save":this.updateControls({save:!r,open:!1,snap:!1});break;case"snap":this.updateControls({snap:!s,open:!1,save:!1});break;case"grid":this.updateControls({grid:!o});break;case"info":this.updateControls({info:!a});break;case"clear":this.clearGuidesList()}}}},mounted:function(){var t=this;this.$bus.$on("canvas:reload",(function(){t.canvas&&t.handlerReload()}))}},h=(n(1397),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"rg-menu-wrapper unselectable track",class:t.themeClasses},[e(o.a,{attrs:{"content-class":"rulers-menu",transition:"slide-x-transition","close-on-content-click":"","close-on-click":"","max-width":"210px","min-width":"210px",bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e(i.a,t._g({attrs:{dense:""}},r),[t._v("\n        mdi-menu\n      ")])]}}])},[t._v(" "),e(r.a,{key:t.grid,attrs:{dense:""}},t._l(t.list,(function(n,i){return e(s.a,{key:i,attrs:{disabled:n.disabled},on:{click:function(e){return e.stopPropagation(),t.choice(n)}}},[e(a.b,{staticClass:"unselectable"},[e("span",{staticClass:"menu-title"},[t._v("\n            "+t._s(n.text)+"\n          ")]),t._v(" "),e("span",{staticClass:"menu-hotkey"},[t._v("\n            "+t._s(n.hotkey)+"\n          ")])])],1)})),1)],1)],1)}),[],!1,null,"7555c2fa",null);e.default=p.exports},1462:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1125),o=n(1557),c=n(1221),l=n(1071),u=n(1093),d=n(1149),h=n(1070),p=n(1118),f=n(1097),m=n(1094),v=n(1106),g=n(1309),b=n(1556),y=n(1668),w=n(1080),k=(n(25),n(13)),x=n(1),_=n(0),$=n.n(_),C=(n(19),n(3),n(32),n(34),n(161),n(43),n(57),n(94),n(14),n(15),n(101),n(24),n(255)),O=n(1409),j=n(395),A=n(1412),E=n(263),S=n.n(E);function D(){}var P={directives:{visible:A.a},props:{designer:{type:Boolean,default:!1},filter:{type:Object,default:function(){return{value:"all"}}},order:{type:String,default:"asc"}},computed:{color:function(){return this.$vuetify.theme.dark?"gray":this.$store.state.app.color},fullscreen:function(){return this.mobile||this.$store.state.app.vkapp},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},owner:function(){return this.$store.state.app.owner},actions:function(){var t=this.designer?["edit"]:["choose","edit"];return this.owner&&t.push("tags"),t},templates:{set:function(t){this.$store.commit("cover/set",{templates:t})},get:function(){return this.adduction(this.$store.state.cover.templates,this.filter.value,this.order)}}},watch:{"$store.state.cover.entity":"preload",marks:function(t){t.length>5&&(this.marks=t.slice(0,5))},order:function(){this.reload=!this.reload,this.$forceUpdate()},filter:function(){this.reload=!this.reload,this.$forceUpdate()}},data:function(){return{reload:!1,dialog:!1,hash:null,marks:[],revoke:D}},methods:{adduction:function(t,e,n){var i=this;return t.filter((function(t){return"all"===e||(t.tags||[]).includes(e)})).sort((function(t,e){var i=0;return t._id===e._id?i:i="desc"===n?t._id<e._id?1:-1:t._id>e._id?1:-1})).map((function(t){var e=t._id,n=t.imghash,r=t.tags,s=void 0===r?[]:r,a={state:!1,imghash:n,key:Object(C.rndstring)(),tags:s,hash:e},o=i.designer?"edit":"choose";return Object.defineProperty(a,"action",{enumerable:!0,get:function(){return o},set:function(t){o=t,a.key=Object(C.rndstring)(),a.state=!1,i.$forceUpdate()}}),a}))},updateMarks:function(t){this.marks=t.filter(Boolean)},removeMarks:function(t){var e=t.index;this.marks.splice(e,1)},select:function(t){var e=t.index;t.parent.selectedIndex=e},editMarks:function(t){var e=t.item,n=t.index,i=t.parent;i.internalSearch=e,i.editingIndex=n,i.selectedIndex=-1},preCache:function(t){var e=this,n=this.templates[t],i=n.hash,r=n.imghash;return Promise.all(["/designer/dcover/default/template/".concat(i,".png&").concat(r),"/designer/dcover/default/thumb/".concat(i,".png&").concat(r)].map((function(t){return e.$store.dispatch("cover/cacheImage",{src:t})})))},view:function(t){var e=this;return Object(x.a)($.a.mark((function n(){return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.preCache(t);case 2:e.$bus.$emit("view",{frame:e.templates.map((function(t){return{url:"/designer/dcover/default/template/".concat(t.hash,".png&").concat(t.imghash),src:"/designer/dcover/default/template/".concat(t.hash,".png&").concat(t.imghash)}})),idx:t});case 3:case"end":return n.stop()}}),n)})))()},edit:function(t){var e=this;return Object(x.a)($.a.mark((function n(){var i,r,s,a,o;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t,n.prev=1,n.next=4,S.a.get("/designer/dcover/default/structs/".concat(t,".wxg"),{responseType:"blob"});case 4:return o=n.sent,s=o.data,n.t0=j.a,n.next=9,s.arrayBuffer();case 9:n.t1=n.sent,r=(0,n.t0)(n.t1),n.next=30;break;case 13:if(n.prev=13,n.t2=n.catch(1),i=n.t2.message,n.prev=16,n.t3=s,!n.t3){n.next=24;break}return n.t4=JSON,n.next=22,s.text();case 22:n.t5=n.sent,n.t3=r=n.t4.parse.call(n.t4,n.t5);case 24:if(!n.t3){n.next=26;break}i=r.error;case 26:n.next=30;break;case 28:n.prev=28,n.t6=n.catch(16);case 30:if(!i){n.next=32;break}return n.abrupt("return",e.$bus.$emit("snack",{content:"Error: ".concat(i),color:"error",raw:!0}));case 32:if("object"!==Object(k.a)(r)){n.next=40;break}if(e.$store.commit("cover/set",{edit:r,tmpl:a}),!e.designer){n.next=38;break}e.$bus.$emit("edit:tmpl"),n.next=40;break;case 38:return n.next=40,e.$router.push("/designer");case 40:case"end":return n.stop()}}),n,null,[[1,13],[16,28]])})))()},choose:function(t){var e=this;return Object(x.a)($.a.mark((function n(){var i,r;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.$store.state.app.user){n.next=5;break}return n.next=3,e.$axios.get("/cover/templates",{params:{id:t}});case 3:r=n.sent,i=r.data;case 5:if(i&&i.install){n.next=7;break}return n.abrupt("return",e.$bus.$emit("snack",{content:"common.auth_error",color:"error"}));case 7:return n.next=9,e.$store.dispatch("cover/coversLoad",{});case 9:e.$bus.$emit("snack",{content:"common.selected",color:"success"});case 10:case"end":return n.stop()}}),n)})))()},setTags:function(){var t=this;return Object(x.a)($.a.mark((function e(){var n,i,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/template/tags",{hash:t.hash,tags:t.marks});case 3:r=e.sent,i=r.data,e.t0=!0,e.next=e.t0===!!i.error?8:e.t0===!!i.set?10:12;break;case 8:return n=i.error,e.abrupt("break",12);case 10:t.$bus.$emit("snack",{content:"Tags saved",color:"success",raw:!0}),t.templates=t.$store.state.cover.templates.map((function(e){return e._id===t.hash&&(e.tags=t.marks),e}));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),n=e.t1.message;case 17:if(t.dialog=!1,!n){e.next=20;break}return e.abrupt("return",t.$bus.$emit("snack",{content:n,color:"error",raw:!0}));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))()},tags:function(t){var e;this.marks=(null===(e=this.$store.state.cover.templates.find((function(e){return e._id===t})))||void 0===e?void 0:e.tags)||[],this.hash=t,this.dialog=!0},load:function(t){var e=t.el,n=e.querySelector(".v-image__placeholder"),i=e.querySelector(".v-image__image"),r=i.style.backgroundImage;/\/dcover\/default/.test(r)||(e.dataset&&e.dataset.src&&(this.$store.dispatch("cover/cacheImage",e.dataset),i.style.backgroundImage="url(".concat(e.dataset.src,")"),i.style.backgroundPosition="center center"),i.classList.remove("v-image__image--preload"),n&&n.remove())},preload:function(t){var e=this,n=this.$store.state.cover,i=n.collection,r=n.templates;if("templates"!==t||i.size>=2*r.length)return this.revoke();this.revoke=Object(O.a)(this.templates,function(){var t=Object(x.a)($.a.mark((function t(n,i){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.preCache(i);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),50)}},mounted:function(){var t=this;this.$nextTick().then((function(){return t.$emit("update")})),this.designer&&this.preload("templates")},beforeDestroy:function(){this.revoke()}},L=P,M=(n(1414),n(250)),B=Object(M.a)(L,(function(){var t=this,e=t._self._c;return e(h.a,{key:t.reload,staticClass:"templates-list",attrs:{column:""}},[t._l(t.templates,(function(n,r){return e(l.a,{key:r,staticClass:"cover-template--row",class:{last:t.designer&&t.templates.length-1===r}},[e("div",{staticClass:"cover-template--image-wrapper",on:{click:function(e){return t.view(r)}}},[e(d.a,{directives:[{name:"visible",rawName:"v-visible.once:300px",value:t.load.bind(t._self),expression:"load.bind(_self)",modifiers:{"once:300px":!0}}],staticClass:"cover-template--image",attrs:{"lazy-src":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","data-src":"/designer/dcover/default/thumb/".concat(n.hash,".png&").concat(n.imghash),alt:"template-image"}}),t._v(" "),e("div",{staticClass:"cover-template--overlay"},[t._v("\n        1590x530\n      ")])],1),t._v(" "),e(h.a,{staticClass:"cover-template--controls"},[e(i.a,{key:n.key,staticClass:"cover-template--button shadowless",attrs:{"aria-label":"action",small:""},on:{click:function(e){t._self[n.action](n.hash)}}},[e("span",[t._v(t._s(t.$t("common.".concat(n.action))))]),t._v(" "),t.designer?t._e():e(v.a,{attrs:{"close-on-content-click":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e(i.a,t._g({directives:[{def:w.a,name:"ripple",rawName:"v-ripple",value:!1,expression:"false"}],attrs:{color:"#0f9d58","aria-label":"toggle",icon:""}},r),[e(u.a,{attrs:{color:"#fff"}},[t._v("mdi-chevron-down")])],1)]}}],null,!0),model:{value:n.state,callback:function(e){t.$set(n,"state",e)},expression:"t.state"}},[t._v(" "),e(p.a,t._l(t.actions,(function(i){return e(f.a,{key:i,on:{click:function(t){t.stopPropagation(),n.action=i}}},[e(m.b,[t._v(t._s(t.$t("common.".concat(i))))])],1)})),1)],1)],1)],1)],1)})),t._v(" "),e(c.a,{attrs:{"content-class":"tags-dialog","max-width":t.mobile?"100%":"600px",fullscreen:t.mobile},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r.a,{staticClass:"tags-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[t.mobile&&t.$store.state.app.vkapp?e(g.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(h.a,{staticClass:"tags-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(u.a,[t._v("mdi-window-close")])],1),t._v(" "),e(i.a,{attrs:{icon:""},on:{click:t.setTags}},[e(u.a,[t._v("mdi-check")])],1)],1)]:[e(y.a,{staticClass:"tags-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"",grow:""}},[e(b.a,{attrs:{ripple:!1},on:{click:function(e){t.dialog=!1}}},[e(u.a,{attrs:{color:t.color}},[t._v("\n              mdi-window-close\n            ")])],1),t._v(" "),e(b.a,{attrs:{ripple:!1},on:{click:t.setTags}},[e(u.a,{attrs:{color:t.color}},[t._v("\n              mdi-check\n            ")])],1)],1)],t._v(" "),e(s.b,{staticClass:"tags-dialog__card-pane"},[e(h.a,{staticClass:"pane"},[e(l.a,{staticClass:"fieldset"},[e("div",{staticClass:"legend"},[t._v(t._s(t.$t("common.tags")))]),t._v(" "),e(o.a,{attrs:{label:t.$t("stream.add_tags"),value:t.marks,"append-icon":"",counter:"5","hide-details":"",multiple:"",flat:"",solo:""},on:{change:t.updateMarks},scopedSlots:t._u([{key:"selection",fn:function(n){var i=n.attrs,r=n.item,s=n.index,o=n.parent,c=n.selected,l=n.disabled;return[e(a.a,t._b({key:s,staticClass:"v-chip--select-multi",attrs:{disabled:l,"input-value":c,close:"",small:""},on:{dblclick:function(e){return e.stopPropagation(),t.editMarks({item:r,index:s,parent:o})},click:function(e){return e.stopPropagation(),t.select({item:r,parent:o})},"click:close":function(e){return t.removeMarks({index:s})}}},"v-chip",i,!1),[t._v("\n                  "+t._s(r)+"\n                ")])]}}])})],1)],1)],1)],2)],1)],2)}),[],!1,null,"b62dc19c",null);e.default=B.exports},1470:function(t,e,n){"use strict";n.r(e);n(12),n(16),n(19),n(3),n(26),n(9),n(27);var i=n(2),r=(n(52),n(14),n(202));function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o={props:{type:{required:!0,type:String}},computed:a(a(a({},Object(r.b)("canvas",["origin","scaled"])),Object(r.b)("app",["color"])),{},{eventsDetermine:function(){return this.mobile?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"}},themeClasses:function(){var t;return t={},Object(i.a)(t,"theme--".concat(this.$vuetify.theme.dark?"dark":"light"),!0),Object(i.a)(t,this.color,!0),t},class:function(){return a(Object(i.a)({unselectable:!0,ruler:!0},this.type,!0),this.themeClasses)},step:function(){return this.scaledSize?this.scaledSize/this.count:1},originSize:function(){var t=this.origin||{},e=t.height,n=void 0===e?0:e,i=t.width,r=void 0===i?0:i;return"v"===this.type?n:r},scaledSize:function(){var t=this.scaled||{},e=t.height,n=void 0===e?0:e,i=t.width,r=void 0===i?0:i;return"v"===this.type?n:r},count:function(){return this.originSize?this.originSize/10:1},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE}}),methods:{label:function(t){return{l10:t<50,l100:t>=50&&t<500,l1000:t>=500}},createGuide:function(t){var e=function(t){return{x:void 0!==t.clientX?t.clientX:t.touches[0].clientX,y:void 0!==t.clientY?t.clientY:t.touches[0].clientY}}(t),n=e.x,i=e.y;this.$store.commit("canvas/createGuide",{evt:{clientX:n,clientY:i},type:this.type,set:null})}},render:function(t){var e=this,n=this.eventsDetermine.start,r=Math.ceil(this.count),s=r<1e3?r-3:r-5,a=0;return t("div",{on:Object(i.a)({},n,this.createGuide),class:this.class},Array.from({length:r},(function(n,i){var r={style:{}},o=[];return i>0&&(a+=e.step-1),i%10==0?(r.class="milestone",i>0&&o.push(t("span",{class:["label track",e.label(i)]},"v"===e.type||i<=s?10*i:[]))):r.class=i%5==0?"major":"common",r.class+=" track",r.style["h"===e.type?"left":"top"]=a+"px",t("span",r,o)})))}},c=(n(1395),n(250)),l=Object(c.a)(o,undefined,undefined,!1,null,"3c61c144",null);e.default=l.exports},1471:function(t,e,n){"use strict";n.r(e);var i=n(13);n(87),n(3),n(43),n(57),n(32),n(29),n(52),n(14),n(24),n(16),n(62),n(66),n(15);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a=["altKey","metaKey","ctrlKey","shiftKey"],o={props:{keyEvent:{type:String,default:"keyup"},keyCode:{type:Number,default:null},modifiers:{type:Array,default:function(){return[]}},multipleKeys:{type:Array,default:function(){return[]}},preventDefault:{type:Boolean,default:!1}},data:function(){return{keyListeners:[]}},methods:{setupListeners:function(){this.addEventListener({keyEvent:this.keyEvent,keyCode:this.keyCode,preventDefault:this.preventDefault,modifiers:this.modifiers,multipleKeys:this.multipleKeys})},addEventListener:function(t){var e=this.eventHandler(t);window.addEventListener(t.keyEvent,e),this.keyListeners.push({expectedEvent:t,listener:e})},removeEventListeners:function(){var t,e=r(this.keyListeners);try{for(e.s();!(t=e.n()).done;){var n=t.value,i=n.keyEvent,s=n.listener;window.removeEventListener(i,s)}}catch(a){e.e(a)}finally{e.f()}},eventHandler:function(t){var e=this;return function(n){var s=function(i,r){return e.$emit(i,{event:n,expectedEvent:t,message:r})},o=t.multipleKeys.length>0;if(t.keyCode||o){var c,l=r(o?t.multipleKeys:[t]);try{var u=function(){var e=c.value;if(e.keyCode!==n.keyCode)return"continue";if(e.modifiers.length>0&&!a.every((function(t){return n[t]===e.modifiers.includes(t)})))return"continue";return t.preventDefault&&n.preventDefault(),s("success","Correct key(s) pressed"),{v:void 0}};for(l.s();!(c=l.n()).done;){var d=u();if("continue"!==d&&"object"===Object(i.a)(d))return d.v}}catch(h){l.e(h)}finally{l.f()}s("wrong","Wrong key(s) pressed")}else s("success","Any key was pressed")}}},destroyed:function(){this.removeEventListeners()},mounted:function(){this.setupListeners()}},c=n(250),l=Object(c.a)(o,undefined,undefined,!1,null,null,null);e.default=l.exports},1492:function(t,e,n){"use strict";n(1389)},1493:function(t,e,n){"use strict";n(1390)},1495:function(t,e,n){"use strict";n(1391)},1496:function(t,e,n){"use strict";n(1392)},1497:function(t,e,n){"use strict";n(1393)},1498:function(t,e,n){"use strict";n(1394)},1500:function(t,e,n){"use strict";n(1398)},1501:function(t,e,n){"use strict";n(1399)},1503:function(t,e,n){"use strict";n(1400)},1504:function(t,e,n){"use strict";n(1401)},1506:function(t,e,n){"use strict";n(1402)},1507:function(t,e,n){"use strict";n(1406)},1508:function(t,e,n){"use strict";n(1407)},1509:function(t,e,n){"use strict";n(1408)},1510:function(t,e,n){"use strict";n(1416)},1511:function(t,e,n){"use strict";n(1417)},1669:function(t,e,n){"use strict";n.r(e);n(88);var i=n(1),r=n(0),s=n.n(r),a=(n(474),n(3),n(14),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(15),n(87),n(9),n(51),n(34),n(1317)),o=n(68),c=n(1475),l=n(1477),u=new Map,d={props:{src:{type:[String,Object,Array],required:!0},delay:{type:[Number,String],default:0},width:{type:[Number,String],default:22},height:{type:[Number,String],default:22},fill:{type:String,default:"currentColor"},stroke:{type:String,default:"none"},glitch:{default:!1,type:Boolean}},data:function(){return{started:!1,loop:!1,opacity:1,cid:0,rawsvg:"",label:"",text:""}},computed:{viewBox:function(){return this.parsed?this.parsed.root.attrs.viewBox:"0 0 24 24"},parsed:function(){return this.rawsvg?Object(l.parse)(this.rawsvg):null},range:function(){return this.glitch?3:1}},watch:{rawsvg:"refresh",glitch:"refresh",stroke:"refresh",fill:"refresh",src:"init"},methods:{load:function(t){var e=this;return Object(i.a)(s.a.mark((function n(){var i,r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=Object(a.isObject)(t)?t.url:t,r="".concat(i),u.has(r)){n.next=5;break}try{u.set(r,fetch(r).then((function(t){return t.text()})))}catch(s){u.delete(r)}n.next=8;break;case 5:return n.next=7,u.get(r);case 7:e.rawsvg=n.sent;case 8:t&&"text"in t&&(e.text=t.text.toUpperCase());case 9:case"end":return n.stop()}}),n)})))()},refresh:function(t){var e=this;this.started=!Object(a.isBoolean)(t),Promise.resolve(this.parsed).then((function(t){return t.each("path",(function(t){return t.attrs.fill=e.fill})),t})).then((function(t){return Object(c.render)(t.root.content)})).then(this.toggle).catch((function(t){e.$emit("error",t)}))},insert:function(t){return this.started=!0,this.label=this.text,Array.isArray(this.$refs.svg)?this.$refs.svg.forEach((function(e){e.innerHTML=t})):this.$refs.svg.innerHTML=t,Promise.resolve()},decrease:function(){var t=this;return Object(o.running)((function(){return(t.opacity-=.01)<=0}))},increase:function(){var t=this;return Object(o.running)((function(){return(t.opacity+=.01)>=1}))},toggle:function(t){var e=this.insert.bind(this,t),n=this.increase.bind(this),i=this.decrease.bind(this),r=Promise.resolve();return this.loop&&this.started?r.then(i).then(e).then(n):this.insert(t)},circle:function(){var t=this,e=0;this.started=!1,this.loop=!0,function n(){t.cid&&clearTimeout(t.cid),t.cid=setTimeout(n,t.delay),t.load(t.src[e++]),e%=t.src.length}()},single:function(){this.load(this.src)},init:function(){Array.isArray(this.src)?this.circle():this.single()}},created:function(){var t=this;return Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t.src)){e.next=4;break}t.src.map(t.load),e.next=6;break;case 4:return e.next=6,t.load(t.src);case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){this.$nextTick().then(this.init)}},h=(n(1492),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{class:"logo theme--".concat(t.$vuetify.theme.dark?"dark":"light"),style:{opacity:t.opacity}},[e("div",{staticClass:"logo-container",class:{},style:{height:t.height,width:t.width}},[t._l(t.range,(function(n){return[e("svg",{key:n,ref:"svg",refInFor:!0,attrs:{viewBox:t.viewBox,stroke:t.stroke,height:t.height,width:t.width,fill:t.fill}})]}))],2),t._v(" "),t.label?e("h3",{class:{},attrs:{"data-text":t.label}},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e()])}),[],!1,null,"2d9c632f",null);e.default=p.exports},1670:function(t,e,n){"use strict";n.r(e);var i=n(2),r=(n(87),n(685),n(43),{props:{position:{required:!0,type:String},size:{type:[Number,String],required:!0}},computed:{clickBehavior:function(){return"click-behavior"},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},leave:function(){var t=this.position,e=this.mobile,n=this.$store.state;return!e&&n.canvas.fixed&&["bottom","top"].includes(t)},param:function(){var t;switch(this.position){case"right":case"left":t="min-height";break;case"bottom":case"top":t="min-width"}return t}}}),s=(n(1493),n(250)),a=Object(s.a)(r,(function(){var t=this;return(0,t._self._c)("div",t._b({staticClass:"hover-zone",class:t.position,style:Object(i.a)({},t.param,"calc(".concat(t.size," + 20px)")),on:{mouseleave:function(e){return t.$emit("hover",{position:t.position,state:t.leave})},mouseenter:function(e){return t.$emit("hover",{position:t.position,state:!0})},click:function(e){return t.$emit("hover",{position:t.position,state:!0})}}},"div",t._d({},[t.clickBehavior,"prevent"])))}),[],!1,null,"ffea5f7e",null);e.default=a.exports},1671:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1069),a=n(1221),o=n(1071),c=n(1093),l=n(1070),u=n(1097),d=n(1117),h=n(1106),p=n(1494),f=n(1214),m=n(1185),v=n(1088),g=n(2),b=(n(29),n(1)),y=n(0),w=n.n(y),k=(n(685),n(3),n(9),n(83),n(43),n(51),n(68)),x={mixins:[n(1139).b],props:{menu:{required:!0,type:Array},visible:{default:!1,type:Boolean}},data:function(){return{down:Boolean(!this.mobile&&this.$store.state.canvas.fixed),wide:Boolean(!this.mobile&&this.$store.state.app.vkapp),activeIndex:null,name:null,list:!0,started:!1,dialog:!1,taskHandle:0,attempts:10}},computed:{fixed:function(){return Boolean(this.$store.state.canvas.fixed)},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color}},watch:{"$store.state.app.window":"measure",visible:function(t){this.down||(this.down=Boolean(this.fixed||t))}},methods:{measure:function(){var t,e=this,n=this.$store.state.app.window;this.taskHandle&&Object(k.cancelIdleCallback)(this.taskHandle),this.wide=Boolean(!this.mobile&&this.$store.state.app.vkapp),this.attempts||(this.attempts=10),this.taskHandle=Object(k.fulfill)((function(){if(e.attempts--,t=e.$el.clientWidth)return e.$emit("change",{position:"top",size:"".concat(t,"px")}),e.wide||(e.wide=n.width>660),e.started=e.wide||!e.attempts,e.list=!0,e.started}))},enter:function(){this.menu.forEach((function(t){t.reload()})),this.down=!0},leave:function(t){var e=Boolean(!this.mobile&&this.fixed);this.mobile&&t.target.classList.contains("hover-zone")&&(e=t.target.classList.contains("top")),this.down=e},findIdx:function(t){return this.$parent.canvas._objects.findIndex((function(e){return e.custom.unique===t.custom.unique}))},rename:function(){var t=this.$parent.canvas.getActiveObject();if(!t||["group","activeSelection"].includes(t.type))return this.$bus.$emit("snack",{content:"graph.choose_layer",color:"warning"});this.activeIndex=this.findIdx(t),this.name=t.custom.name,this.dialog=!0},btnEnter:function(t){"function"==typeof t.enter&&t.enter()},btnLeave:function(t){"function"==typeof t.leave&&t.leave()},applyName:function(t){var e=t.name;this.dialog=!1,this.$parent.canvas._objects[this.activeIndex].customName(e),this.activeIndex=null,this.name=null},apply:function(t){this.list=!0;var e=function(){t.hidden=!t.hidden},n=t.apply();n&&("graph-rename-dialogue"===n.call&&this.rename(),t.thenable&&n.then(e).then(e))},forceHide:function(){this.menu.forEach((function(t){return t.state=!1}))},viewBlock:function(t){var e=this;return this.menu.forEach((function(n,i){e.menu[i].state=i===t})),new Promise((function(t){return setTimeout(t)}))},hideBlock:function(t){this.menu[t].state=!1},goaway:function(){var t=this;return Object(b.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$ls.set("route",{path:null});case 2:return e.next=4,t.goBack();case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$nextTick().then(this.measure).then(this.forceHide),this.$parent.$on("force:hide",this.forceHide)}},_=(n(1495),n(250)),$=Object(_.a)(x,(function(){var t,e=this,n=e._self._c;return n(f.a,e._b({directives:[{def:v.a,name:"click-outside",rawName:"v-click-outside",value:e.leave,expression:"leave"}],staticClass:"image-editor__topbar",class:(t={},Object(g.a)(t,e.color,!0),Object(g.a)(t,"wide",e.wide),Object(g.a)(t,"down",e.down),Object(g.a)(t,"mobile",e.mobile),t),attrs:{height:"60px"},on:{click:e.enter}},"v-toolbar",e.$attrs,!1),[e.wide?n(u.a,{attrs:{ripple:!1},on:{click:e.goaway}},[n(d.a,[n("lazy-core-logo",{attrs:{fill:"#fff"}})],1)],1):n(m.b,{staticClass:"tertiary--text",on:{click:function(t){e.list=!e.list}}},[n("div",{class:{open:!e.list},attrs:{id:"hamburger"}},[n("span"),n("span"),n("span")])]),e._v(" "),e.wide?n(p.a):e._e(),e._v(" "),n(m.a,{class:{open:e.wide||!e.list,close:e.list}},[n(l.a,{attrs:{"align-center":""}},[e.wide?e._e():n(i.a,{attrs:{ripple:!1,text:""},on:{click:e.goaway}},[e._v("\n        "+e._s(e.$t("graph.back"))+"\n      ")]),e._v(" "),e._l(e.menu,(function(t){return[n(h.a,{key:t.key,attrs:{transition:"slide-y-transition","content-class":"top-menu ".concat(t.id),"close-on-content-click":e.mobile,"open-on-hover":e.wide,"min-width":170,bottom:""},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on;return[n(i.a,e._g({attrs:{ripple:!1,text:""}},t.on(s)),[e._v("\n              "+e._s(e.$t(t.activator))+"\n            ")])]}}],null,!0),model:{value:t.state,callback:function(n){e.$set(t,"state",n)},expression:"block.state"}},[e._v(" "),t.items?n(r.a,{staticClass:"top-menu__box"},[n(s.a,{attrs:{"data-top":!0},on:{mouseenter:e.enter,mouseleave:e.leave}},[e._l(t.items,(function(t,r){return[n(o.a,{key:r},[n(i.a,e._b({key:t.hidden,staticClass:"top-menu__btn",class:{"a-icon":t.aicon,"b-icon":t.bicon},attrs:{icon:!(!t.aicon&&!t.bicon),text:!t.aicon&&!t.bicon,disabled:t.hidden},on:{click:function(n){return e.apply(t)},mouseenter:function(n){return e.btnEnter(t)},mouseleave:function(n){return e.btnLeave(t)}}},"v-btn",t.attrs,!1),[t.bicon?n(c.a,[e._v("\n                      "+e._s(t.bicon)+"\n                    ")]):e._e(),e._v("\n                    "+e._s(e.$t(t.name))+"\n                    "),t.aicon?n(c.a,[e._v("\n                      "+e._s(t.aicon)+"\n                    ")]):e._e()],1)],1)]}))],2)],1):e._e()],1)]}))],2)],1),e._v(" "),n(a.a,{attrs:{width:e.mobile?"100%":"540px",fullscreen:e.mobile},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("lazy-graph-rename-dialogue",{attrs:{name:e.name},on:{close:function(t){e.dialog=!1},apply:e.applyName}})],1)],1)}),[],!1,null,"77f54091",null);e.default=$.exports},1672:function(t,e,n){"use strict";n.r(e);var i=n(1221);n(87),n(3),n(9),n(12),n(34),n(19),n(504),n(51),n(14),n(15);function r(t,e,n,i){return i=(i-90)*Math.PI/180,{x:t+n*Math.cos(i),y:e+n*Math.sin(i)}}function s(t,e,n,i,s,a,o){var c=r(t,e,n,i%=360),l=r(t,e,n,s%=360);return(a?"L":"M")+c.x+" "+c.y+" A"+n+" "+n+", 0, "+(s-i>=180?1:0)+", "+(o?0:1)+", "+l.x+" "+l.y}function a(t,e,n,i,r,a){return s(t,e,n,r,a,!1,!1)+" "+s(t,e,i,a,r,!0,!0)+"Z"}function o(t,e,n,i){return this.mouseover(t,n).mouseout(e||t,i||n)}function c(){for(var t=0;t<3;t++)this[t].toggleClass("active")}function l(t){return t.plugin((function(t,e){return e.prototype.hover=o})),!0}var u={props:{value:null,path:{default:"/designer/img/radialnav/icons.svg",type:String},buttons:{required:!0,type:Array},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0}},data:function(){return{presentation:null,container:null,paper:null,area:null,snap:null,radial:null,text:null,width:"100%",height:"100%",duration:300,r:125,view:!1}},computed:{icons:{set:function(t){this.$store.commit("context/set",{icons:t})},get:function(){return this.$store.state.context.icons}},opacity:{set:function(t){this.$store.commit("app/set",{menu:t})},get:function(){return this.$store.state.app.menu}},theme:function(){return this.$vuetify.theme.dark?"dark":"light"},color:function(){return this.$vuetify.theme.themes[this.theme]["light"===this.theme?this.$store.state.app.color:"accent"]},angle:function(){return 360/(this.buttons.length||6)},r2:function(){return.35*this.r}},watch:{"$store.state.app.locale":"update","$store.state.app.color":"update",opacity:"change",theme:"update",value:"show",$route:function(){this.init()}},methods:{setNodes:function(){var t=this.$refs.nav;this.radial=t.querySelectorAll("path.radial-sector"),this.text=t.querySelectorAll("text.radial-hint")},setAttributes:function(t){var e=this;t||(t=this.$attrs),Object.keys(t).forEach((function(n){"data-id"===n?e.container.node.setAttribute("id",t[n]):e.container.node.setAttribute(n,t[n])}))},transformOpacity:function(t){var e,n,i,r=(t.deltaY||t.wheelDelta)>0?.03:-.03;this.opacity=(e=this.opacity+r,n=.4,e>(i=1)?i:e<n?n:e)},change:function(t){this.radial&&this.radial.forEach((function(e){return e.style.opacity=t}))},toggle:function(t){this.view=t},animate:function(t,e,n,i,r,s,a,o){t.animation||(t.animation=[]),t.animation[e]&&t.animation[e].stop(),t.animation[e]=this.snap.animate(n,i,a,r,s,o)},animateContainer:function(t,e,n,i){var r=this;this.animate(this,0,t,e,n,i,(function(t){r.container.transform("r"+(90-90*t)+","+r.c+","+r.c+"s"+t+","+t+","+r.c+","+r.c)}),this.toggle.bind(this,!t))},animateButtons:function(t,e,n,i,r){var s=this,a=this.container;return Object.keys(a).filter((function(t){return!Number.isNaN(+t)})).map((function(o){return s.animate(a[o],0,t,e,function(t,e){return Math.random()*(e-t)+t}(n,i),r,(function(t){a[o].transform("r"+s.angle*o+","+s.c+","+s.c+"s"+t+","+t+","+s.c+","+s.c)}),(function(){}))}))},animateButtonHover:function(t,e,n,i,r,s){var o=this;return this.animate(t,1,e,n,i,r,(function(e){t[0].attr({d:a(o.c,o.c,o.r-10*e,o.r2,0,o.angle)}),t[2].transform("s"+(1.1-.1*e)+","+(1.1-.1*e)+","+o.c+","+o.c)}),s)},sector:function(){var t=this.c,e=this.r,n=this.r2,i=this.area,r=this.angle,s=this.color,o=this.opacity;return i.path(a(t,t,e,n,0,r)).attr({fill:s,stroke:s,opacity:o}).addClass("radial-sector")},icon:function(t){var e=this.c,n=this.r,i=this.r2,r=this.angle,s=this.snap.parse(this.icons).select("#"+t.icon),a=s.getBBox();return s.transform("T"+(e-a.x-a.width/2)+", "+(e-a.y-n+i-a.height/2-5)+" R"+r/2+","+e+","+e+"S.7"),s.addClass("radial-icon"),s},hint:function(t){var e=this.c,n=this.r,i=this.angle,r=this.area,a=this.opacity,o="light"===this.theme?"#333333":"#7a7a7a",c=this.$t("context.".concat(t.hint||t.icon)),l=s(e,e,n,0,i),u=r.text(0,0,c).addClass("radial-hint hide").attr({textpath:l,opacity:a});return u.select("*").attr({startOffset:"50%",fill:o}),u},buttonOver:function(t){var e=(window.mina||{}).easeinout,n=void 0===e?function(t){return t}:e,i=this;return function(){i.buttons.length&&(i.$emit("hover",t),i.animateButtonHover(this,0,1,200,n),this[2].removeClass("hide"))}},buttonOut:function(t){var e=(window.mina||{}).elastic,n=void 0===e?function(t){return t}:e,i=this;return function(){var e=this;i.buttons.length&&(i.$emit("out",t),i.animateButtonHover(this,1,0,2e3,n,(function(){e[2].addClass("hide")})))}},button:function(t,e,n,i){var r=this,s=this.buttonOver(t),a=this.buttonOut(t);return this.area.g(e,n,i).mouseup((function(){return r.$emit("toggle",t)})).hover(c).hover(s,a)},update:function(){var t=this;this.$nextTick((function(){if(t.icons&&t.container)try{t.container.clear(),t.buttons.forEach((function(e){return t.container.add(t.button(e,t.sector(),t.icon(e),t.hint(e)))})),t.setNodes()}catch(e){}}))},hide:function(){var t=this,e=(window.mina||{}).easeinout,n=void 0===e?function(t){return t}:e,i=this.duration;this.animateButtons(1,0,i,i,n),this.animateContainer(1,0,i,n),this.presentation&&(this.presentation=!1,setTimeout((function(){t.view=!1}),i)),this.$emit("input",null)},show:function(t){if(!t)return this.hide();this.presentation=t.presentation;var e=this.offsetX,n=this.offsetY,i=this.c,r=this.duration,s=(window.mina||{}).elastic,a=void 0===s?function(t){return t}:s,o=t.clientX-i-e,c=t.clientY-i-n;this.presentation&&(r=200);try{this.area.attr({x:o,y:c}),this.toggle(!0),this.animateButtons(0,1,r,8*r,a),this.animateContainer(0,1,8*r,a)}catch(l){}t.preventDefault&&t.preventDefault()},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e&&l(e)||(e=this.snap),e?this.$nextTick().then((function(){return t.paper||(t.paper=e(t.$refs.nav)),t.paper.clear(),t.area=t.paper.svg(0,0,n,n),t.area.addClass("radial-nav"),t.container=t.area.g(),t.container.transform("s0"),t.snap=e,t.c=n/2,t.r=n/4,t.setAttributes(),t.loadIcons()})).then(this.update).catch((function(){})):Promise.reject()},loadIcons:function(){var t=this;return this.icons?Promise.resolve():fetch(this.path).then((function(t){return t.ok?t.text():null})).then((function(e){t.icons=e}))}},created:function(){this.snap=n.e(323).then(n.t.bind(null,1892,7)).then((function(t){return t.default}))},mounted:function(){this.snap.then(this.init)}},d=u,h=(n(1496),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e(i.a,{attrs:{"content-class":"context theme--".concat(t.$vuetify.theme.dark?"dark":"light"),transition:!1,persistent:t.presentation,"hide-overlay":"",eager:""},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[e("svg",{ref:"nav",style:{height:t.height,width:t.width},on:{wheel:function(e){return e.preventDefault(),t.transformOpacity.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.hide.apply(null,arguments)},click:function(e){return e.preventDefault(),t.hide.apply(null,arguments)}}})])}),[],!1,null,"118b0c7e",null);e.default=p.exports},1673:function(t,e,n){"use strict";n.r(e);n(3),n(9);var i={props:{components:{type:Array},content:{type:Array},evented:{type:Boolean,default:!1}},watch:{content:{deep:!0,handler:function(t){var e=this;this.clear(),t.forEach((function(t){e.$el.appendChild(t)}))}}},data:function(){return{events:[{event:"click",handler:null}]}},methods:{setUpEvents:function(){var t=this;this.events.forEach((function(e){e.handler=t.emit.bind(t,e.event),t.$el.addEventListener(e.event,e.handler)}))},clearEvents:function(){var t=this;this.events.forEach((function(e){t.$el.removeEventListener(e.event,e.handler)}))},clear:function(){for(;this.$el.firstChild;)this.$el.removeChild(this.$el.firstChild)},emit:function(t,e){this.$bus.$emit("upper-cover-".concat(t),e)}},beforeDestroy:function(){this.evented&&this.clearEvents()},mounted:function(){this.evented&&this.setUpEvents()}},r=(n(1497),n(250)),s=Object(r.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"upper__cover"},[t._l(t.components,(function(t,n){return[e(t,{key:n,tag:"component"})]}))],2)}),[],!1,null,"c84664da",null);e.default=s.exports},1674:function(t,e,n){"use strict";n.r(e);var i,r=n(1),s=n(0),a=n.n(s),o=n(163),c=n(37),l=n(1215),u="undefined"!=typeof TouchEvent,d={x:0,y:0},h=!1,p=function(t,e){return new i.Point(t.clientX+.5*(e.clientX-t.clientX),t.clientY+.5*(e.clientY-t.clientY))},f={data:function(){return{bindings:l.a.instance,events:[{event:"click",handler:null}],offmap:[],bg1:o.bg1,bg2:o.bg2}},computed:{guidesList:{set:function(t){this.$store.commit("canvas/set",{guidesList:t})},get:function(){return this.$store.state.canvas.guidesList}},gridList:{set:function(t){this.$store.commit("canvas/set",{gridList:t})},get:function(){return this.$store.state.canvas.gridList}},track:{get:function(){return this.$store.state.canvas.track||{x:0,y:0}},set:function(t){this.$store.commit("canvas/set",{track:t})}},controls:function(){return this.$store.state.canvas.controls},x:function(){return this.$store.state.canvas.xSnap},y:function(){return this.$store.state.canvas.ySnap}},watch:{guidesList:function(t){t.length||this.$store.commit("canvas/set",{gridName:null})}},methods:{onDown:function(t){if(u&&t instanceof TouchEvent){var e=t.targetTouches;e.length>=2&&(t.stopPropagation(),t.preventDefault(),d=p(e[0],e[1]),h=!0)}},onMove:function(t){if(u&&t instanceof TouchEvent){var e=t.targetTouches;if(h){t.stopPropagation(),t.preventDefault();var n=e.length>=2?p(e[0],e[1]):new i.Point(e[0].clientX,e[0].clientY),r=n.subtract(d),s=r.x,a=r.y;d=n,this.track=new i.Point(this.track.x+s,this.track.y+a)}}},onUp:function(t){u&&t instanceof TouchEvent&&(h=!!t.targetTouches.length)},clearGuidesList:function(){this.guidesList=[]},openDialog:function(){this.$store.commit("canvas/toggleOpenDialog")},saveDialog:function(){this.$store.commit("canvas/toggleSaveDialog")},snapDialog:function(){this.$store.commit("canvas/toggleSnapDialog")},toggleGuides:function(){this.$store.commit("canvas/toggleGuides")},toggleGrid:function(){this.$store.commit("canvas/toggleGrid")},toggleInfo:function(){this.$store.commit("canvas/toggleInfo")},updateGuide:function(t){var e=t.id,n=t.percent,i=t.pixel;this.$store.commit("canvas/updateGuide",{id:e,percent:n,pixel:i})}},beforeDestroy:function(){this.bindings.unbind(this.offmap)},beforeMount:function(){return Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=i,t.t0){t.next=5;break}return t.next=4,c.Fabric.instance;case 4:i=t.sent;case 5:case"end":return t.stop()}}),t)})))()},mounted:function(){var t=this;return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.offmap=t.bindings.bind([{keys:"ctrl+alt+d",handler:t.clearGuidesList},{keys:"ctrl+alt+g",handler:t.toggleGuides},{keys:"ctrl+alt+l",handler:t.toggleGrid},{keys:"ctrl+alt+c",handler:t.snapDialog},{keys:"ctrl+alt+m",handler:t.saveDialog},{keys:"ctrl+alt+o",handler:t.openDialog}]),e.prev=1,e.next=4,t.$ls.get("image-editor-grids",[]);case 4:t.gridList=e.sent,t.gridList.length&&t.$store.commit("canvas/initGrid"),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})))()}},m=(n(1498),n(250)),v=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"rg-overlay",style:{background:"url(".concat(t.$vuetify.theme.dark?t.bg2:t.bg1,") repeat"),left:t.track.x+"px",top:t.track.y+"px"},on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.$emit("context",e)},"!touchstart":function(e){return t.onDown.apply(null,arguments)},"!touchmove":function(e){return t.onMove.apply(null,arguments)},"!touchend":function(e){return t.onUp.apply(null,arguments)}}},[t._l(["h","v"],(function(t){return[e("graph-ruler",{key:t,attrs:{type:t}})]})),t._v(" "),t._t("default"),t._v(" "),t._l(t.guidesList,(function(n,i){return[e("graph-guide",{directives:[{name:"show",rawName:"v-show",value:t.controls.guides,expression:"controls.guides"}],key:i,attrs:{snap:"v"===n.type?t.x:t.y,type:n.type,evt:n.evt,set:n.set,id:i},on:{"update:guide":t.updateGuide}})]})),t._v(" "),e("graph-rulers-menu",{attrs:{canvas:t.$parent.canvas}})],2)}),[],!1,null,"f8ceb30a",null);e.default=v.exports;installComponents(v,{GraphRuler:n(1470).default,GraphGuide:n(1460).default,GraphRulersMenu:n(1461).default})},1675:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1093),s=n(1499),a=n(1088),o=n(2),c=(n(29),n(12),n(16),n(19),n(3),n(26),n(9),n(27),n(1078),n(1079),n(158)),l=n(35);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){return{x:void 0!==t.pageX?t.pageX:t.touches[0].pageX,y:void 0!==t.pageY?t.pageY:t.touches[0].pageY}}function h(t,e){return!!t.classList.contains(e)||!!t.parentElement&&h(t.parentElement,e)}var p={props:{visible:{default:!1,type:Boolean},tools:{required:!0,type:Array}},data:function(){return{width:"49px",docked:!0,down:!1,zIndex:99,flat:{left:this.left,top:"50%"}}},computed:{eventsDetermine:function(){return this.mobile?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"}},left:function(){return this.visible?"5px":"calc(-".concat(this.width," + 5px)")},style:function(){return this.docked?{left:this.left}:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({zIndex:this.zIndex},this.flat)},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color}},watch:{"$store.state.app.window":"update",docked:function(t){t&&(this.flat={left:this.left,top:"50%"})}},methods:{measure:function(){var t,e;(e=this.$el.clientHeight)&&this.$emit("change",{position:"left",size:"".concat(e,"px")}),(t=this.$el.clientWidth)&&(this.width="".concat(t,"px"))},mousedown:function(t){if(!this.down&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t.which&&t.button)switch(!0){case!!(1&t.button):t.which=1;break;case!!(2&t.button):t.which=3;break;case!!(4&t.button):t.which=2}return t.which===e}(t)&&h(t.target,"drag-header-left")){var e,n,i=this.$el.getBoundingClientRect(),r=this.$screen,s=r.width,a=r.height,o=this.eventsDetermine,c=o.move,u=o.end,p=t.clientX-i.left,f=t.clientY-i.top,m=i.height/2,v=i.width,g=a-m,b=s-v,y=this;document.addEventListener(c,k),document.addEventListener(u,(function t(){document.removeEventListener(c,k),document.removeEventListener(u,t),y.down=!1,y.docked=e<18,y.zIndex=99})),this.docked=!1,this.zIndex=100,this.down=!0,t.stopPropagation(),t.preventDefault(),w(d(t))}function w(t){var i=t.x,r=t.y;n=Object(l.rclamp)(r-f+m,m-f+10,g),e=Object(l.rclamp)(i-p,0,b),y.flat={left:e+"px !important",top:n+"px !important"}}function k(t){t.stopPropagation(),t.preventDefault(),w(d(t))}},hide:function(t){"prevent"!==t.target.getAttribute("click-behavior")&&this.$emit("hide",{position:"left",state:!1})},update:Object(c.debounce)((function(){this.measure()}),0)},mounted:function(){var t=this;this.update(),this.$nextTick().then((function(){t.$el.addEventListener(t.eventsDetermine.start,t.mousedown)}))},beforeDestroy:function(){this.$el.removeEventListener(this.eventsDetermine.start,this.mousedown)}},f=p,m=(n(1500),n(250)),v=Object(m.a)(f,(function(){var t,e=this,n=e._self._c;return n("div",e._b({directives:[{def:a.a,name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"tool-wrapper left",class:(t={},Object(o.a)(t,e.color,!0),Object(o.a)(t,"visible",e.visible),Object(o.a)(t,"flat",!e.docked),t),style:e.style},"div",e.$attrs,!1),[e.mobile?e._e():n("div",{staticClass:"drag-header-left",class:Object(o.a)({},e.color,!0)},[n("svg",{attrs:{fill:"#eee",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 25",width:"50",height:"25"}},[n("path",{attrs:{d:"M11.56 6.25C11.56 5.1 10.62 4.17 9.48 4.17C8.33 4.17 7.4 5.1 7.4 6.25C7.4 7.4 8.33 8.33 9.48 8.33C10.62 8.33 11.56 7.4 11.56 6.25ZM17.81 18.75C17.81 17.6 16.87 16.67 15.73 16.67C14.58 16.67 13.65 17.6 13.65 18.75C13.65 19.9 14.58 20.83 15.73 20.83C16.87 20.83 17.81 19.9 17.81 18.75ZM11.56 18.75C11.56 17.6 10.62 16.67 9.48 16.67C8.33 16.67 7.4 17.6 7.4 18.75C7.4 19.9 8.33 20.83 9.48 20.83C10.62 20.83 11.56 19.9 11.56 18.75ZM11.56 12.5C11.56 11.35 10.62 10.42 9.48 10.42C8.33 10.42 7.4 11.35 7.4 12.5C7.4 13.65 8.33 14.58 9.48 14.58C10.62 14.58 11.56 13.65 11.56 12.5ZM17.81 12.5C17.81 11.35 16.87 10.42 15.73 10.42C14.58 10.42 13.65 11.35 13.65 12.5C13.65 13.65 14.58 14.58 15.73 14.58C16.87 14.58 17.81 13.65 17.81 12.5ZM21.98 8.33C23.12 8.33 24.06 7.4 24.06 6.25C24.06 5.1 23.12 4.17 21.98 4.17C20.83 4.17 19.9 5.1 19.9 6.25C19.9 7.4 20.83 8.33 21.98 8.33ZM17.81 6.25C17.81 5.1 16.87 4.17 15.73 4.17C14.58 4.17 13.65 5.1 13.65 6.25C13.65 7.4 14.58 8.33 15.73 8.33C16.87 8.33 17.81 7.4 17.81 6.25ZM24.06 12.5C24.06 11.35 23.12 10.42 21.98 10.42C20.83 10.42 19.9 11.35 19.9 12.5C19.9 13.65 20.83 14.58 21.98 14.58C23.12 14.58 24.06 13.65 24.06 12.5ZM24.06 18.75C24.06 17.6 23.12 16.67 21.98 16.67C20.83 16.67 19.9 17.6 19.9 18.75C19.9 19.9 20.83 20.83 21.98 20.83C23.12 20.83 24.06 19.9 24.06 18.75Z"}}),e._v(" "),n("path",{attrs:{d:"M30.08 6.25C30.08 5.1 29.15 4.17 28 4.17C26.85 4.17 25.92 5.1 25.92 6.25C25.92 7.4 26.85 8.33 28 8.33C29.15 8.33 30.08 7.4 30.08 6.25ZM36.33 18.75C36.33 17.6 35.4 16.67 34.25 16.67C33.1 16.67 32.17 17.6 32.17 18.75C32.17 19.9 33.1 20.83 34.25 20.83C35.4 20.83 36.33 19.9 36.33 18.75ZM30.08 18.75C30.08 17.6 29.15 16.67 28 16.67C26.85 16.67 25.92 17.6 25.92 18.75C25.92 19.9 26.85 20.83 28 20.83C29.15 20.83 30.08 19.9 30.08 18.75ZM30.08 12.5C30.08 11.35 29.15 10.42 28 10.42C26.85 10.42 25.92 11.35 25.92 12.5C25.92 13.65 26.85 14.58 28 14.58C29.15 14.58 30.08 13.65 30.08 12.5ZM36.33 12.5C36.33 11.35 35.4 10.42 34.25 10.42C33.1 10.42 32.17 11.35 32.17 12.5C32.17 13.65 33.1 14.58 34.25 14.58C35.4 14.58 36.33 13.65 36.33 12.5ZM40.5 8.33C41.65 8.33 42.58 7.4 42.58 6.25C42.58 5.1 41.65 4.17 40.5 4.17C39.35 4.17 38.42 5.1 38.42 6.25C38.42 7.4 39.35 8.33 40.5 8.33ZM36.33 6.25C36.33 5.1 35.4 4.17 34.25 4.17C33.1 4.17 32.17 5.1 32.17 6.25C32.17 7.4 33.1 8.33 34.25 8.33C35.4 8.33 36.33 7.4 36.33 6.25ZM42.58 12.5C42.58 11.35 41.65 10.42 40.5 10.42C39.35 10.42 38.42 11.35 38.42 12.5C38.42 13.65 39.35 14.58 40.5 14.58C41.65 14.58 42.58 13.65 42.58 12.5ZM42.58 18.75C42.58 17.6 41.65 16.67 40.5 16.67C39.35 16.67 38.42 17.6 38.42 18.75C38.42 19.9 39.35 20.83 40.5 20.83C41.65 20.83 42.58 19.9 42.58 18.75Z"}})])]),e._v(" "),n("nav",{staticClass:"left-toolbar"},[e._l(e.tools,(function(t,a){return[n(s.a,{key:a,attrs:{disabled:e.mobile,right:""},scopedSlots:e._u([{key:"activator",fn:function(s){var a=s.on;return[n(i.a,e._g({staticClass:"toolbar-item",attrs:{disabled:t.hidden,"aria-label":t.id,ripple:"",tile:"",icon:""},on:{click:t.handler}},a),[n(r.a,[e._v(e._s(t.icon))])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.$t(t.name)))])])]}))],2)])}),[],!1,null,"bbdfd4ba",null);e.default=v.exports},1676:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1221),s=n(1093),a=n(1106),o=n(1499),c=n(1088),l=n(2),u=(n(29),n(24),n(258),n(12),n(16),n(19),n(3),n(26),n(9),n(27),n(1078),n(1079),n(51),n(158)),d=n(35);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){return{x:void 0!==t.pageX?t.pageX:t.touches[0].pageX,y:void 0!==t.pageY?t.pageY:t.touches[0].pageY}}function f(t,e){return!!t.classList.contains(e)||!!t.parentElement&&f(t.parentElement,e)}var m={mixins:[n(497).a],props:{visible:{default:!1,type:Boolean},tools:{required:!0,type:Array}},data:function(){return{customProps:{},width:"49px",search:!1,custom:!1,docked:!0,down:!1,zIndex:99,flat:{right:this.right,top:"50%"}}},computed:{eventsDetermine:function(){return this.mobile?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"}},right:function(){return this.visible?"5px":"calc(-".concat(this.width," + 5px)")},style:function(){return this.docked?{right:this.right}:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({zIndex:this.zIndex},this.flat)},window:function(){return this.$store.state.app.window},top:function(){var t=.88*this.window.height;return(this.window.height-t)/2},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color}},watch:{"$store.state.app.window":"update",docked:function(t){t&&(this.flat={right:this.right,top:"50%"})}},methods:{measure:function(){var t,e;(e=this.$el.clientHeight)&&this.$emit("change",{position:"right",size:"".concat(e,"px")}),(t=this.$el.clientWidth)&&(this.width="".concat(t,"px"))},mousedown:function(t){if(!this.down&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t.which&&t.button)switch(!0){case!!(1&t.button):t.which=1;break;case!!(2&t.button):t.which=3;break;case!!(4&t.button):t.which=2}return t.which===e}(t)&&f(t.target,"drag-header-right")){var e,n,i=this.$el.getBoundingClientRect(),r=this.$screen,s=r.width,a=r.height,o=this.eventsDetermine,c=o.move,l=o.end,u=i.left+i.width-t.clientX,h=t.clientY-i.top,m=i.height/2,v=i.width,g=a-m,b=s-v,y=this;document.addEventListener(c,k),document.addEventListener(l,(function t(){document.removeEventListener(c,k),document.removeEventListener(l,t),y.down=!1,y.docked=e<18,y.zIndex=99})),this.docked=!1,this.zIndex=100,this.down=!0,t.stopPropagation(),t.preventDefault(),w(p(t))}function w(t){var i=t.x,r=t.y;n=Object(d.rclamp)(r-h+m,m-h+10,g),e=Object(d.rclamp)(s-(i+u),0,b),y.flat={right:e+"px !important",top:n+"px !important"}}function k(t){t.stopPropagation(),t.preventDefault(),w(p(t))}},hide:function(t){"prevent"!==t.target.getAttribute("click-behavior")&&this.$emit("hide",{position:"right",state:!1})},openCustomDialogue:function(t){this.customProps=t,this.custom=!0},openSearchDialog:function(){var t=this;setTimeout((function(){return t.search=!0}))},createCustomCanvas:function(t){var e=t.width,n=t.height;this.$emit("create",{width:e,height:n})},update:Object(u.debounce)((function(){this.measure()}),0)},beforeDestroy:function(){this.$el.removeEventListener(this.eventsDetermine.start,this.mousedown),this.$bus.$off("open:search-dialog",this.openSearchDialog)},beforeMount:function(){this.$bus.$on("open:search-dialog",this.openSearchDialog)},mounted:function(){var t=this;this.update(),this.$nextTick().then((function(){t.$el.addEventListener(t.eventsDetermine.start,t.mousedown)}))}},v=m,g=(n(1501),n(250)),b=Object(g.a)(v,(function(){var t,e=this,n=e._self._c;return n("div",e._b({directives:[{def:c.a,name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"tool-wrapper right",class:(t={},Object(l.a)(t,e.color,!0),Object(l.a)(t,"visible",e.visible),Object(l.a)(t,"flat",!e.docked),t),style:e.style},"div",e.$attrs,!1),[e.mobile?e._e():n("div",{staticClass:"drag-header-right",class:Object(l.a)({},e.color,!0)},[n("svg",{attrs:{fill:"#eee",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 25",width:"50",height:"25"}},[n("path",{attrs:{d:"M11.56 6.25C11.56 5.1 10.62 4.17 9.48 4.17C8.33 4.17 7.4 5.1 7.4 6.25C7.4 7.4 8.33 8.33 9.48 8.33C10.62 8.33 11.56 7.4 11.56 6.25ZM17.81 18.75C17.81 17.6 16.87 16.67 15.73 16.67C14.58 16.67 13.65 17.6 13.65 18.75C13.65 19.9 14.58 20.83 15.73 20.83C16.87 20.83 17.81 19.9 17.81 18.75ZM11.56 18.75C11.56 17.6 10.62 16.67 9.48 16.67C8.33 16.67 7.4 17.6 7.4 18.75C7.4 19.9 8.33 20.83 9.48 20.83C10.62 20.83 11.56 19.9 11.56 18.75ZM11.56 12.5C11.56 11.35 10.62 10.42 9.48 10.42C8.33 10.42 7.4 11.35 7.4 12.5C7.4 13.65 8.33 14.58 9.48 14.58C10.62 14.58 11.56 13.65 11.56 12.5ZM17.81 12.5C17.81 11.35 16.87 10.42 15.73 10.42C14.58 10.42 13.65 11.35 13.65 12.5C13.65 13.65 14.58 14.58 15.73 14.58C16.87 14.58 17.81 13.65 17.81 12.5ZM21.98 8.33C23.12 8.33 24.06 7.4 24.06 6.25C24.06 5.1 23.12 4.17 21.98 4.17C20.83 4.17 19.9 5.1 19.9 6.25C19.9 7.4 20.83 8.33 21.98 8.33ZM17.81 6.25C17.81 5.1 16.87 4.17 15.73 4.17C14.58 4.17 13.65 5.1 13.65 6.25C13.65 7.4 14.58 8.33 15.73 8.33C16.87 8.33 17.81 7.4 17.81 6.25ZM24.06 12.5C24.06 11.35 23.12 10.42 21.98 10.42C20.83 10.42 19.9 11.35 19.9 12.5C19.9 13.65 20.83 14.58 21.98 14.58C23.12 14.58 24.06 13.65 24.06 12.5ZM24.06 18.75C24.06 17.6 23.12 16.67 21.98 16.67C20.83 16.67 19.9 17.6 19.9 18.75C19.9 19.9 20.83 20.83 21.98 20.83C23.12 20.83 24.06 19.9 24.06 18.75Z"}}),e._v(" "),n("path",{attrs:{d:"M30.08 6.25C30.08 5.1 29.15 4.17 28 4.17C26.85 4.17 25.92 5.1 25.92 6.25C25.92 7.4 26.85 8.33 28 8.33C29.15 8.33 30.08 7.4 30.08 6.25ZM36.33 18.75C36.33 17.6 35.4 16.67 34.25 16.67C33.1 16.67 32.17 17.6 32.17 18.75C32.17 19.9 33.1 20.83 34.25 20.83C35.4 20.83 36.33 19.9 36.33 18.75ZM30.08 18.75C30.08 17.6 29.15 16.67 28 16.67C26.85 16.67 25.92 17.6 25.92 18.75C25.92 19.9 26.85 20.83 28 20.83C29.15 20.83 30.08 19.9 30.08 18.75ZM30.08 12.5C30.08 11.35 29.15 10.42 28 10.42C26.85 10.42 25.92 11.35 25.92 12.5C25.92 13.65 26.85 14.58 28 14.58C29.15 14.58 30.08 13.65 30.08 12.5ZM36.33 12.5C36.33 11.35 35.4 10.42 34.25 10.42C33.1 10.42 32.17 11.35 32.17 12.5C32.17 13.65 33.1 14.58 34.25 14.58C35.4 14.58 36.33 13.65 36.33 12.5ZM40.5 8.33C41.65 8.33 42.58 7.4 42.58 6.25C42.58 5.1 41.65 4.17 40.5 4.17C39.35 4.17 38.42 5.1 38.42 6.25C38.42 7.4 39.35 8.33 40.5 8.33ZM36.33 6.25C36.33 5.1 35.4 4.17 34.25 4.17C33.1 4.17 32.17 5.1 32.17 6.25C32.17 7.4 33.1 8.33 34.25 8.33C35.4 8.33 36.33 7.4 36.33 6.25ZM42.58 12.5C42.58 11.35 41.65 10.42 40.5 10.42C39.35 10.42 38.42 11.35 38.42 12.5C38.42 13.65 39.35 14.58 40.5 14.58C41.65 14.58 42.58 13.65 42.58 12.5ZM42.58 18.75C42.58 17.6 41.65 16.67 40.5 16.67C39.35 16.67 38.42 17.6 38.42 18.75C38.42 19.9 39.35 20.83 40.5 20.83C41.65 20.83 42.58 19.9 42.58 18.75Z"}})])]),e._v(" "),n("nav",{staticClass:"right-toolbar"},[e._l(e.tools,(function(t,r){return[n(o.a,{key:r,attrs:{disabled:e.mobile,left:""},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on;return[n(i.a,e._g({staticClass:"toolbar-item",attrs:{disabled:t.hidden,"aria-label":t.id,ripple:"",tile:"",icon:""},on:{click:t.handler}},a),[n(s.a,[e._v(e._s(t.icon))])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(e.$t(t.name)))])])]}))],2),e._v(" "),n("lazy-graph-new",{on:{choose:function(t){return e.$emit("create",t)},custom:e.openCustomDialogue}}),e._v(" "),e.mobile?n(r.a,{attrs:{fullscreen:!0,"max-width":"100%"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[n("lazy-graph-search",{attrs:{close:""},on:{choose:function(t){return e.$emit("image",t)},close:function(t){e.search=!1}}})],1):n(a.a,{attrs:{"position-y":e.top,"position-x":e.window.width-320,transition:"slide-x-transition","content-class":"pixabay-menu","max-width":"315px","min-width":"315px",absolute:"","offset-x":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[n("lazy-graph-search",{on:{choose:function(t){return e.$emit("image",t)}}})],1),e._v(" "),n(r.a,{attrs:{"content-class":"custom-dialog","max-width":e.mobile?"100%":"540px",fullscreen:e.mobile,persistent:""},model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}},[n("lazy-graph-custom-dialogue",{attrs:{size:e.customProps},on:{create:e.createCustomCanvas,close:function(t){e.custom=!1}}})],1)],1)}),[],!1,null,"1882c80b",null);e.default=b.exports},1677:function(t,e,n){"use strict";n.r(e);var i=n(1142),r=n(1071),s=n(1093),a=n(1149),o=n(1070),c=n(1106),l=n(1088),u=(n(12),n(16),n(19),n(3),n(26),n(9),n(27),n(2));n(43);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(488),n(58),n(52),n(14),n(34),n(24),n(67),n(25),n(83),n(685),n(51);var p=n(68),f=n(35),m=n(1502),v=n.n(m),g=function(t,e){return Array.from({length:t},e)},b=[{src:"img/graph/widget.svg",items:g(12,(function(t,e){return{src:"img/graph/wdg/widget".concat((e+1).toString().padStart(2,0),".svg")}})),class:"pr-0",type:"wdg"},{src:"img/graph/frame.png",items:g(100,(function(t,e){return{src:"img/graph/png/frame".concat((e+1).toString().padStart(3,0),".png")}})),class:"pr-2",type:"png"},{src:"img/graph/shape.svg",items:g(300,(function(t,e){return{src:"img/graph/svg/shape".concat((e+1).toString().padStart(3,0),".svg")}})),class:"pr-2",type:"svg"},{src:"img/graph/photo.jpg",items:g(300,(function(t,e){return{src:"img/graph/set/photo".concat((e+1).toString().padStart(3,0),".jpg")}})),class:"pr-2",type:"set"},{src:"img/graph/background.jpg",items:g(100,(function(t,e){return{src:"img/graph/bgd/photo".concat((e+1).toString().padStart(3,0),".jpg")}})),class:"pr-2",type:"bgd"}],y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{emit:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t[e]||[]).forEach((function(t){return t.apply(void 0,i)}))},on:function(e,n){return(t[e]=t[e]||[]).push(n)}}}();function w(t){Object.assign(this,t,{e:y,state:!1}),this.e.on("close",this.close.bind(this))}w.prototype.on=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];t[n]=function(r){e.e.emit("close",e.type),function(t){return"function"==typeof t}(i)&&i(r),"click"===n&&t.mouseenter(r)}})),t},w.prototype.close=function(t){this.type!==t&&(this.state=!1)};var k={props:{visible:{default:!1,type:Boolean}},data:function(){return{list:b.map((function(t){return new w(t)})),breackPoints:[{p:125,m:1},{p:250,m:.9},{p:430,m:.8},{p:500,m:.7},{p:620,m:.6},{p:830,m:.7},{p:860,m:.75},{p:1e3,m:.7},{p:1091,m:.6},{p:1200,m:.55}],scrollWrapperWidth:null,scrollAreaWidth:null,start:{y:0,x:0},dragging:!1,taskHandle:0,multiplier:1,translate:0,step:20,mark:0,max:0}},computed:{mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color},clickBehavior:function(){return"click-behavior"}},watch:{"$store.state.app.window":"resize"},methods:{chunk:v.a,position:function(t,e){var n=t.src,i=e.type;if("wdg"===i)return{backgroundImage:"url(".concat(n,")")};var r,s,a,o,c,l="center center",u=n.match(/([a-z\u017F\u212A]{3,})([0-9]+)\.([a-z\u017F\u212A]{3})/i)||[];return u.length&&(c=(s=(r="bgd"===i||"set"===i)?100:99)*((o=parseInt(u[2])-1)/10|0),l="-".concat(s*(o%10)+(a=r?0:7),"px -").concat(c+a,"px")),{backgroundPosition:l}},view:function(t,e,n){var i=v()(n,3),r=i.length-1,s=i[t][e],a=t>0?t-1:t+2,o=t<r?t+1:t-2,c=Math.max(a,t,o),l=Math.min(a,t,o),u=(c+l)/2,d=i[l].concat(i[u],i[c]),h=d.findIndex((function(t){return t.src===s.src}));this.$bus.$emit("view",{frame:d,idx:h})},hide:function(t){var e=t.target;this.$parent.presentation||this.$store.state.canvas.fixed||"prevent"===e.getAttribute("click-behavior")||(this.$emit("hide",{position:"bottom",state:!1}),this.list.forEach((function(t){return t.state=!1})))},calcPoint:function(t){var e=this;this.multiplier=.5,this.breackPoints.some((function(n){return n.p>t&&(e.multiplier=n.m,!0)}))},boxLength:function(t,e,n){return Math.min(Math.floor(this.multiplier*t/e)*e,n)},delta:function(t){var e=t.deltaY,n=t.wheelDelta;return Math.max(-1,Math.min(1,e||n))},resize:function(){var t=this,e=this.$refs,n=e.cards,i=e.box,r=e.layout,s=this.$el.parentElement.clientWidth,a=n[0].clientWidth,o=a*n.length;this.calcPoint(s),i.style.width=this.boxLength(s,a,o)+"px",r.style.width=o+"px",this.calculate(),this.taskHandle&&Object(p.cancelIdleCallback)(this.taskHandle),this.taskHandle=Object(p.fulfill)((function(){try{return t.max=r.clientWidth-i.clientWidth,t.$emit("change",{position:"bottom",size:window.getComputedStyle(i).getPropertyValue("width")}),!0}catch(e){}}))},wheel:function(t){this.translate=Object(f.rclamp)(this.translate-this.delta(t)*this.step,0,this.max),this.$refs.layout.style.transform="translateX(-".concat(this.translate,"px)")},startDrag:function(t){var e=this,n=t.changedTouches?t.changedTouches[0]:t;this.calculate((function(){e.start={y:n.pageY,x:n.pageX},e.dragging=!0}))},onDrag:function(t){if(this.dragging&&(this.mark++,!(this.mark%2))){var e=t.changedTouches?t.changedTouches[0]:t,n=-(this.start.x-e.clientX);this.start={y:e.clientY,x:e.clientX},this.wheel({deltaY:n})}},stopDrag:function(){this.dragging=!1,this.mark=0},getSize:function(){var t=this.$refs.box,e=this.$refs.layout;return{scrollWrapperWidth:t.clientWidth,scrollAreaWidth:e.clientWidth}},calculate:function(t){var e=this.getSize();e.scrollWrapperWidth===this.scrollWrapperWidth&&e.scrollAreaWidth===this.scrollAreaWidth||(this.scrollWrapperWidth=e.scrollWrapperWidth,this.scrollAreaWidth=e.scrollAreaWidth),"function"==typeof t&&t()},viewBlock:function(t){var e=this;return this.list.forEach((function(n,i){e.list[i].state=i===t})),new Promise((function(t){setTimeout(t)}))},hideBlock:function(t){this.list[t].state=!1}},updated:function(){this.$nextTick().then(this.resize)},mounted:function(){this.$nextTick().then(this.resize)}},x=(n(1503),n(250)),_=Object(x.a)(k,(function(){var t=this,e=t._self._c;return e("div",{directives:[{def:l.a,name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"}],ref:"box",staticClass:"image-list",class:Object(u.a)({visible:t.visible},t.color,!0),on:{wheel:function(e){return e.preventDefault(),e.stopPropagation(),t.wheel.apply(null,arguments)},touchstart:t.startDrag,touchend:t.stopDrag,touchmove:t.onDrag}},[e(o.a,{ref:"layout"},[t._l(t.list,(function(n){return[e(r.a,{key:n.type,ref:"cards",refInFor:!0},[e(c.a,{attrs:{transition:"slide-y-transition","close-on-content-click":t.mobile,"content-class":"bottom-menu ".concat(n.type),"max-width":n.items.length<12?300:305,"min-width":n.items.length<12?300:305,"offset-y":!0,"max-height":"420","open-on-hover":"",top:""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e(i.a,t._g({staticClass:"image-list__item",attrs:{flat:"",tile:""}},n.on(s)),[e(a.a,{attrs:{src:n.src,"aspect-ratio":"1"}}),t._v(" "),e("div",{staticClass:"img-overlay"},[e("div",{staticClass:"bg"},[t._v("\n                  "+t._s(t.$t("graph.stiker_".concat(n.type)))+"\n                ")])])],1)]}}],null,!0),model:{value:n.state,callback:function(e){t.$set(n,"state",e)},expression:"block.state"}},[t._v(" "),e(i.a,{staticClass:"image-list__box"},[e("lazy-helper-vlist",t._b({ref:"scroll",refInFor:!0,attrs:{className:"image-list__scroller ".concat(n.class),overflowBehavior:{x:"hidden",y:"scroll"},items:t.chunk(n.items,3),visibleNodeCount:10,rootHeight:420,itemHeight:99,nodePadding:4},scopedSlots:t._u([{key:"default",fn:function(a){var c=a.item,l=a.index;return[e(o.a,{staticClass:"scroller-list__row"},[t._l(c,(function(a,o){return[e(r.a,{key:a.src},[e(i.a,{class:"scroller-list__images--item type-".concat(n.type),attrs:{ripple:!1,flat:"",tile:""},on:{click:function(e){return t.$emit("choose",h(h({},a),{},{adjust:"bgd"===n.type}))}}},[e("div",{staticClass:"thumb",style:t.position(a,n)},[["bgd","set"].includes(n.type)?e("div",{staticClass:"view-marker",on:{click:function(e){return e.stopPropagation(),t.view(l,o,n.items)}}},[e(s.a,{attrs:{color:"#fff",dense:""}},[t._v("\n                              mdi-eye-outline\n                            ")])],1):t._e(),t._v(" "),e("div",t._b({staticClass:"overlay"},"div",t._d({},[t.clickBehavior,"prevent"])))])])],1)]}))],2)]}}],null,!0)},"lazy-helper-vlist",t._d({},[t.clickBehavior,"prevent"])))],1)],1)],1)]}))],2)],1)}),[],!1,null,"52a67779",null);e.default=_.exports},1678:function(t,e,n){"use strict";n.r(e);n(3),n(14),n(15),n(371),n(256);var i=n(1469),r={mixins:[i.d],components:{VueSlider:function(){return n.e(321).then(n.t.bind(null,1893,7))}},filters:{round:function(t){return(t+.5|0)+"%"}},computed:{color:function(){return this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},scaled:{set:function(t){this.$store.commit("canvas/set",{scaled:t})},get:function(){return this.$store.state.canvas.scaled}},scale:{set:function(t){this.zoom(t/100-this.scaled.scale>0?.01:-.01)},get:function(){var t=100*this.scaled.scale.toFixed(2),e=this.options,n=e.max,i=e.min;return t>=n?n:t<=i?i:t+.5|0}}},data:function(){var t=this.$store.state.canvas.origin,e=t.height,n=t.width,i=this.$store.state.canvas.diagonal,r=Math.hypot(n,e),s=100*i*2/r+.5|0,a=100*i*.25/r+.5|0;return{active:!1,options:{processStyle:{backgroundColor:"#5181b8"},useKeyboard:!0,clickable:!0,direction:"btt",duration:.3,dotSize:20,interval:(s-a)/100,min:a,max:s}}}},s=(n(1504),n(250)),a=Object(s.a)(r,(function(){var t=this,e=t._self._c;return e("client-only",[e("vue-slider",t._b({class:{mobile:t.mobile,active:t.active},attrs:{direction:"btt",height:"80vh",width:"8px"},on:{"drag-start":function(e){t.active=!0},"drag-end":function(e){t.active=!1}},scopedSlots:t._u([{key:"tooltip",fn:function(n){var i=n.value;return[e("div",{staticClass:"vue-slider-dot-tooltip vue-slider-dot-tooltip-left"},[e("div",{staticClass:"vue-slider-dot-tooltip-inner vue-slider-dot-tooltip-inner-left"},[e("span",{staticClass:"vue-slider-dot-tooltip-text"},[t._v(t._s(t._f("round")(i)))])])])]}}]),model:{value:t.scale,callback:function(e){t.scale=e},expression:"scale"}},"vue-slider",t.options,!1))],1)}),[],!1,null,"41d7e756",null);e.default=a.exports},1679:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1093),s=n(1),a=n(0),o=n.n(a),c={components:{VBadgePatched:n(1505).a},computed:{color:function(){return this.$store.state.app.color}},methods:{removeIntroBtn:function(){var t=this;return Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$ls.set("designer:intro",!0);case 3:t.$emit("viewed",!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))()},playIntro:function(){this.$emit("show:intro"),this.removeIntroBtn()}}},l=(n(1506),n(250)),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e(i.a,{staticClass:"intro-btn mb-5 mr-5",attrs:{color:t.color,height:"64",width:"64",bottom:"",right:"",fixed:"",fab:""},on:{click:t.playIntro}},[e("v-badge-patched",{attrs:{icon:"mdi-close","offset-x":"0","offset-y":"0",color:"#fff"},on:{click:function(e){return e.stopPropagation(),t.removeIntroBtn.apply(null,arguments)}}},[e(r.a,{attrs:{color:"#fff"}},[t._v("mdi-play-circle-outline")])],1)],1)}),[],!1,null,"15a35924",null);e.default=u.exports},1680:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1093),o=n(1070),c=n(1309),l=n(1556),u=n(1668),d=(n(3),n(9),n(14),n(15),n(264),n(141),{props:["videostream"],data:function(){return{videotrack:null,streaming:!1,canvas:null}},computed:{color:function(){return this.$vuetify.theme.dark?"gray":this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE}},watch:{videostream:"setTrack"},methods:{canplay:function(){var t=this,e=this.$refs.video;e.addEventListener("canplay",(function(){var n,i,r=t.$screen,s=r.height,a=r.width,o=e.videoHeight,c=e.videoWidth;t.mobile?(n=Math.floor(s),i=Math.floor(a)):(n=Math.floor(o),i=Math.floor(c)),e.setAttribute("height",n),e.setAttribute("width",i)})),this.streaming=!0},cleanWrapper:function(){var t=this;this.$nextTick((function(){t.$refs.wrapper.querySelectorAll("canvas").forEach((function(t){t.parentNode.removeChild(t)}))}))},setTrack:function(t){var e=this;t||(t=this.videostream),t&&(this.cleanWrapper(),this.videotrack=t.getTracks()[0],this.$nextTick((function(){e.$refs.video.onloadedmetadata=function(){e.$refs.video.play()},e.streaming||e.canplay(),"srcObject"in e.$refs.video?e.$refs.video.srcObject=t:e.$refs.video.src=URL.createObjectURL(t)})))},pasteFromCam:function(){var t=this.$refs.video,e=t.videoHeight,n=t.videoWidth,i=document.createElement("canvas"),r=i.getContext("2d");i.height=e,i.width=n,r.drawImage(this.$refs.video,0,0),this.$emit("open",{src:i.toDataURL("image/png")}),this.closeWebcam()},closeWebcam:function(){var t=this;this.cleanWrapper(),this.videotrack&&(this.videotrack.stop(),this.videotrack=null),this.$refs.video&&(this.$refs.video.pause(),this.$refs.video.src=""),this.videostream&&(this.videostream=null),this.$nextTick().then((function(){t.$emit("close")}))}},mounted:function(){this.videostream&&this.setTrack()}}),h=(n(1507),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"video-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[t.mobile&&t.$store.state.app.vkapp?e(c.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(o.a,{staticClass:"video-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{icon:""},on:{click:t.closeWebcam}},[e(a.a,[t._v("mdi-window-close")])],1),t._v(" "),e(i.a,{attrs:{icon:""},on:{click:t.pasteFromCam}},[e(a.a,[t._v("mdi-check")])],1)],1)]:[e(u.a,{staticClass:"video-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"",grow:""}},[e(l.a,{attrs:{ripple:!1},on:{click:t.closeWebcam}},[e(a.a,{attrs:{color:t.color}},[t._v("mdi-window-close")])],1),t._v(" "),e(l.a,{attrs:{ripple:!1},on:{click:t.pasteFromCam}},[e(a.a,{attrs:{color:t.color}},[t._v("mdi-check")])],1)],1)],t._v(" "),e(s.b,{staticClass:"video-dialog__card-pane"},[e(o.a,{ref:"wrapper",staticClass:"pane"},[e("video",{ref:"video",attrs:{muted:""},domProps:{muted:!0}})])],1)],2)}),[],!1,null,"277ebb16",null);e.default=p.exports},1681:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1093),o=n(1070),c=n(1309),l=n(1556),u=n(1668),d=n(1135),h=[],p={props:{flag:{type:Boolean,required:!0}},computed:{color:function(){return this.$vuetify.theme.dark?"gray":this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE}},data:function(){return{url:null,multiple:[{keyCode:13,preventDefault:true,modifiers:h},{keyCode:27,preventDefault:true,modifiers:h}]}},methods:{handler:function(t){var e=t.event;if(this.flag)switch(e.key){case"Enter":this.open();break;case"Escape":this.close()}},open:function(){this.$emit("open",{src:this.url}),this.close()},close:function(){this.$emit("close"),this.url=null}}},f=(n(1508),n(250)),m=Object(f.a)(p,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"openurl-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[e("helper-keypress",{attrs:{"multiple-keys":t.multiple},on:{success:t.handler}}),t._v(" "),t.mobile&&t.$store.state.app.vkapp?e(c.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(o.a,{staticClass:"openurl-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{icon:""},on:{click:t.close}},[e(a.a,[t._v("mdi-window-close")])],1),t._v(" "),e(i.a,{attrs:{icon:""},on:{click:t.open}},[e(a.a,[t._v("mdi-check")])],1)],1)]:[e(u.a,{staticClass:"openurl-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"","show-arrows":"",grow:""}},[e(l.a,{attrs:{ripple:!1},on:{click:t.close}},[e(a.a,{attrs:{color:t.color}},[t._v("\n          mdi-window-close\n        ")])],1),t._v(" "),e(l.a,{attrs:{ripple:!1},on:{click:t.open}},[e(a.a,{attrs:{color:t.color}},[t._v("\n          mdi-check\n        ")])],1)],1)],t._v(" "),e(s.b,{staticClass:"openurl-dialog__card-pane"},[e(o.a,{staticClass:"pane"},[e(d.a,{attrs:{label:"URL",color:t.color,"hide-details":"",outlined:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1)],2)}),[],!1,null,"0e55a98c",null);e.default=m.exports;installComponents(m,{HelperKeypress:n(1471).default})},1682:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1093),o=n(1070),c=n(1309),l=n(1556),u=n(1668),d=(n(3),n(14),n(15),{computed:{color:function(){return this.$vuetify.theme.dark?"gray":this.$store.state.app.color},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE}},data:function(){return{smooth:null}},methods:{initScroll:function(){var t=this;!this.smooth&&this.$refs.pane&&(this.mobile?(n.e(319).then(n.t.bind(null,1871,7)),n.e(319).then(n.t.bind(null,1872,7)).then((function(t){return t.default||t})).then((function(e){t.smooth=e(t.$refs.pane,{scrollbars:{visibility:t.mobile?"hidden":"auto"}})}))):n.e(322).then(n.bind(null,1880)).then((function(t){return t.default||t})).then((function(e){t.smooth=e.init(t.$refs.pane,{damping:t.mobile?.1:1,continuousScrolling:!1}),t.smooth.updatePluginOptions("overscroll",{enable:!1})})))},close:function(){this.$emit("close")}},mounted:function(){this.$nextTick().then(this.initScroll)}}),h=(n(1509),n(250)),p=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"covers-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[t.mobile&&t.$store.state.app.vkapp?e(c.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(o.a,{staticClass:"covers-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{icon:""},on:{click:t.close}},[e(a.a,[t._v("mdi-window-close")])],1)],1)]:[e(u.a,{staticClass:"covers-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"",grow:""}},[e(l.a,{attrs:{ripple:!1},on:{click:t.close}},[t._v("\n        "+t._s(t.$t("graph.templates"))+"\n      ")])],1)],t._v(" "),e(s.b,{ref:"pane",staticClass:"covers-dialog__card-pane scroller"},[e("cover-templates-list",{attrs:{designer:!0}})],1)],2)}),[],!1,null,"30ba6dc6",null);e.default=p.exports;installComponents(p,{CoverTemplatesList:n(1462).default})},1683:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1093),o=n(1070),c=n(1309),l=n(1556),u=n(1668),d=n(1415),h=n(1499),p=(n(3),n(14),n(15),n(255)),f=n(1448),m=n.n(f),v={props:{b64data:String,b64fake:String},computed:{mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color}},data:function(){return{url:null}},methods:{copy:function(){var t=this;n.e(96).then(n.bind(null,1549)).then((function(e){return(0,e.writeText)(t.b64data)})).then((function(){return t.$bus.$emit("snack",{content:"graph.copied",color:"success"})})).catch((function(){return t.$bus.$emit("snack",{content:"common.error",color:"error"})}))},saveDataURL:function(){var t=Object(p.rndstring)()+".txt";m()(new Blob([this.b64data],{type:"text/plain;charset=utf-8"}),t)}},mounted:function(){var t=this;this.$nextTick().then((function(){t.$refs.textarea.$refs.input.setAttribute("oncopy","return false;"),t.$refs.textarea.$refs.input.setAttribute("tabindex","-1")}))}},g=(n(1510),n(250)),b=Object(g.a)(v,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"dataurl-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[t.mobile&&t.$store.state.app.vkapp?e(c.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(o.a,{staticClass:"dataurl-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{icon:""},on:{click:function(e){return t.$emit("close")}}},[e(a.a,[t._v("mdi-window-close")])],1)],1)]:[e(u.a,{staticClass:"dataurl-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"","show-arrows":"",grow:""}},[e(l.a,{attrs:{ripple:!1},on:{click:function(e){return t.$emit("close")}}},[t._v("\n        "+t._s(t.mobile?"<":"")+" BASE64 DATAURL\n      ")])],1)],t._v(" "),e(s.b,{staticClass:"dataurl-dialog__card-pane"},[e(o.a,{staticClass:"pane"},[e(d.a,{ref:"textarea",attrs:{label:"Base64",color:t.color,"hide-details":"","no-resize":"",readonly:"",filled:""},model:{value:t.b64fake,callback:function(e){t.b64fake=e},expression:"b64fake"}}),t._v(" "),e("div",{staticClass:"dataurl__area--tools"},[e(h.a,{attrs:{disabled:t.mobile,top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e(i.a,t._g({attrs:{color:t.color,small:"",icon:""},on:{click:t.copy}},r),[e(a.a,{attrs:{color:t.color}},[t._v("mdi-content-copy")])],1)]}}])},[t._v(" "),e("span",[t._v(t._s(t.$t("graph.clipboard")))])]),t._v(" "),e(h.a,{attrs:{disabled:t.mobile,top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e(i.a,t._g({attrs:{color:t.color,small:"",icon:""},on:{click:t.saveDataURL}},r),[e(a.a,{attrs:{color:t.color}},[t._v("mdi-file-outline")])],1)]}}])},[t._v(" "),e("span",[t._v(t._s(t.$t("graph.save_as_file")))])])],1)],1)],1)],2)}),[],!1,null,"c8a1ad38",null);e.default=b.exports},1684:function(t,e,n){"use strict";n.r(e);var i=n(1091),r=n(1142),s=n(1090),a=n(1093),o=n(1070),c=n(1309),l=n(1556),u=n(1668),d=n(1),h=n(0),p=n.n(h),f=(n(25),n(3),n(51),n(255)),m=n(35),v=n(1186),g=n(163),b="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function y(t){return{x:void 0!==t.pageX?t.pageX:t.touches[0].pageX,y:void 0!==t.pageY?t.pageY:t.touches[0].pageY}}var w={props:{image:{type:Object}},computed:{eventsDetermine:function(){return this.mobile?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"}},mobile:function(){return!!(this.$BROWSER||{}).IS_MOBILE},color:function(){return this.$store.state.app.color}},watch:{image:"sourceToggle","$store.state.app.window":function(){this.deferred()},loading:function(t){this.$emit("loading",t)}},data:function(){return{force:Object(f.rndstring)(),rect:{height:600,width:652,left:326},clientHeight:0,clientWidth:0,loading:!1,timeout:null,worker:null,before:b,after:b,bg1:g.bg1,bg2:g.bg2}},methods:{mouseDown:function(t){if(!this.down){var e,n=this.$refs.wrapper.getBoundingClientRect(),i=this.eventsDetermine,r=i.move,s=i.end,a=this;document.addEventListener(r,c),document.addEventListener(s,(function t(){document.removeEventListener(r,c),document.removeEventListener(s,t),a.down=!1})),t.stopPropagation(),t.preventDefault(),o(y(t)),a.down=!0}function o(t){var i=t.x;e=Object(m.rclamp)(i-n.left,0,n.width),a.$refs.after.style.clip="rect(0, ".concat(n.width,"px, ").concat(n.height,"px, 0)"),a.$refs.before.style.clip="rect(0, ".concat(e,"px, ").concat(n.height,"px, 0)"),a.$refs.slider.style.left=e+"px"}function c(t){t.stopPropagation(),t.preventDefault(),o(y(t))}},calculation:function(){var t=this;return Object(d.a)(p.a.mark((function e(){var n,i,r,s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(t){return setTimeout(t,30)}));case 2:(n=null===(a=t.$refs.before)||void 0===a?void 0:a.getBoundingClientRect())&&(i=t.heightRecalculation(n),r=t.widthRecalculation(n),s=n.left,t.rect={height:i,width:r,left:s});case 3:if(!r||!i){e.next=0;break}case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))()},heightRecalculation:function(t){var e,n=t.height,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=this.image,s=r.height,a=r.width,o=this.$refs.before.clientWidth;return(e=s*o/a)>i&&(e=i),e||(e=n),0|e},widthRecalculation:function(t){var e,n=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:652,r=this.image,s=r.height,a=r.width,o=this.$refs.before.clientHeight;return(e=a*o/s)>i&&(e=i),e||(e=n),0|e},sliderInit:function(){var t=this.rect,e=t.width,n=t.height;if(!e||!n)return function(t){throw new Error("sizes error")}();this.$emit("maxWidth","".concat(e+48,"px")),this.setMinHeight(n),this.$refs.wrapper.style.height="".concat(n,"px"),this.$refs.wrapper.style.width="".concat(e,"px"),this.after!==b&&(this.$refs.before.style.clipPath="rect(0, ".concat(e/2,"px, ").concat(n,"px, 0)"),this.$refs.slider.style.setProperty("--slider-height","".concat(n/2-22,"px")),this.$refs.slider.style.left="".concat(e/2,"px"),this.$refs.slider.style.display="block")},imageOnChange:function(){this.$refs.slider.style.display="none",this.$refs.before.style.clipPath="unset",this.$emit("maxWidth"),this.setMinHeight(600)},deferred:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.perform.bind(this,e),t)},perform:function(t){var e=this;return Object(d.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.imageOnChange(),n.next=4,Object(v.a)(t);case 4:return n.t0=e,n.next=7,e.calculation();case 7:n.t1=n.sent,n.t0.setMinHeight.call(n.t0,n.t1),e.sliderInit(),e.reRender(),n.next=15;break;case 13:n.prev=13,n.t2=n.catch(0);case 15:case"end":return n.stop()}}),n,null,[[0,13]])})))()},removeBg:function(){var t=this;return Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!t.image.wbg,e.next=3,t.image.loading();case 3:e.t0=e.sent,e.next="block"===e.t0?6:"none"===e.t0?9:10;break;case 6:return t.setAfter(t.image),t.deferred(0,0),e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},setMinHeight:function(t){this.$refs.block&&(this.$refs.block.style.minHeight="".concat(!t||t>600?600:t,"px"))},sourceToggle:function(){this.setBefore(this.image).setAfter(this.image).deferred(99,250)},setBefore:function(t){return this.before=t.src||b,this},setAfter:function(t){return this.after=t.wbg||b,this},reRender:function(){this.force=Object(f.rndstring)(),this.$forceUpdate()},apply:function(){var t=this;return Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.image.apply();case 3:return e.next=5,Object(v.a)(100);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:t.$emit("close");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},beforeDestroy:function(){this.$refs.slider.removeEventListener(this.eventsDetermine.start,this.mouseDown)},mounted:function(){var t=this;return Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:t.mouseDown=t.mouseDown.bind(t),t.$refs.slider.addEventListener(t.eventsDetermine.start,t.mouseDown),t.sourceToggle();case 5:case"end":return e.stop()}}),e)})))()}},k=w,x=(n(1511),n(250)),_=Object(x.a)(k,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"remove-bg-dialog__card",class:{fullscreen:t.mobile},attrs:{elevation:"0"}},[t.mobile&&t.$store.state.app.vkapp?e(c.a,{attrs:{height:"26px",color:"transparent"}}):t._e(),t._v(" "),t.mobile&&t.$store.state.app.vkapp?[e(o.a,{staticClass:"remove-bg-dialog__btn-wrapper",attrs:{"justify-start":""}},[e(i.a,{attrs:{disabled:t.loading,icon:""},on:{click:function(e){return t.$emit("close")}}},[e(a.a,{attrs:{disabled:t.loading}},[t._v("mdi-window-close")])],1),t._v(" "),e(i.a,{attrs:{disabled:t.loading,text:""},on:{click:t.removeBg}},[e(a.a,{attrs:{disabled:t.loading}},[t._v("mdi-eraser")])],1),t._v(" "),e(i.a,{attrs:{disabled:t.loading,icon:""},on:{click:t.apply}},[e(a.a,{attrs:{disabled:t.loading}},[t._v("mdi-check")])],1)],1)]:[e(u.a,{staticClass:"remove-bg-dialog__tabs-header",attrs:{color:t.color,height:"60px","hide-slider":"",grow:""}},[e(l.a,{attrs:{ripple:!1,disabled:t.loading},on:{click:function(e){return t.$emit("close")}}},[e(a.a,{attrs:{disabled:t.loading,color:t.color}},[t._v("\n          mdi-window-close\n        ")])],1),t._v(" "),e(l.a,{attrs:{ripple:!1,disabled:t.loading},on:{click:t.removeBg}},[e(a.a,{attrs:{disabled:t.loading,color:t.color}},[t._v("\n          mdi-eraser\n        ")])],1),t._v(" "),e(l.a,{attrs:{ripple:!1,disabled:t.loading},on:{click:t.apply}},[e(a.a,{attrs:{disabled:t.loading,color:t.color}},[t._v("\n          mdi-check\n        ")])],1)],1)],t._v(" "),e(s.b,{staticClass:"remove-bg-dialog__card-pane"},[e(o.a,{staticClass:"pane"},[e("div",{ref:"block",staticClass:"image-comparison mt-3",style:{background:"url(".concat(t.$vuetify.theme.dark?t.bg2:t.bg1,") repeat")}},[e("img",{key:t.force,ref:"after",staticClass:"image-comparison__image after",attrs:{src:t.after,alt:""}}),t._v(" "),e("img",{ref:"before",staticClass:"image-comparison__image before",attrs:{src:t.before,alt:""}}),t._v(" "),e("div",{ref:"wrapper",staticClass:"image-comparison__wrapper"},[e("div",{ref:"slider",staticClass:"image-comparison__slider handle"},[e("span",{staticClass:"handle__left-arrow"}),t._v(" "),e("span",{staticClass:"handle__right-arrow"})])])])])],1)],2)}),[],!1,null,"0f2b334f",null);e.default=_.exports},1701:function(t,e,n){"use strict";n.r(e);var i=n(2),r=n(1),s=n(0),a=n.n(s);n(19),n(3),n(32),n(34),n(84),n(43),n(29),n(52),n(14),n(24),n(16),n(62),n(66),n(15);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={data:function(){return{clipboard:null,sources:[]}},methods:{extract:function(t,e){var n,i=t.clipboardData;return Array.prototype.slice.call((null===(n=i||window.clipboardData)||void 0===n?void 0:n.items)||[]).filter(e)},paste:function(t){var e=this;return Object(r.a)(a.a.mark((function n(){var i,r,s,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],n.prev=1,n.next=4,e.getClipboardContents();case 4:r=n.sent,s=r.permission,o=r.items,i="granted"===s.state?o.map((function(t){return t.then((function(t){return new Promise((function(e,n){var i=new FileReader;i.onerror=n,i.onload=function(t){var n=t.target;e(n.result)},i.readAsDataURL(t)}))}))})):e.extract(t,(function(t){return t.type.startsWith("image/")})).map((function(t){return new Promise((function(e,n){var i=new FileReader,r=t.getAsFile();i.onerror=n,i.onload=function(t){var n=t.target;e(n.result)},i.readAsDataURL(r)}))})),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(1);case 12:i.length&&(e.sources=i),e.$emit("paste",e);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getClipboardContents:function(){var t=this;return Object(r.a)(a.a.mark((function e(){var n,i,r,s,c,l,u,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={state:"denied"},i=[],e.prev=1,!["granted","prompt"].includes(n.state)){e.next=8;break}return e.next=5,t.clipboard.read();case 5:r=e.sent,s=o(r);try{for(s.s();!(c=s.n()).done;){l=c.value,u=o(l.types);try{for(u.s();!(d=u.n()).done;)(h=d.value).startsWith("image/")&&i.push(l.getType(h))}catch(a){u.e(a)}finally{u.f()}}}catch(a){s.e(a)}finally{s.f()}case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:return e.abrupt("return",{permission:n,items:i});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},writeClipboardContent:function(){var t=arguments,e=this;return Object(r.a)(a.a.mark((function n(){var r,s,o,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:"",s={state:"denied"},o="text/plain",n.prev=2,!["granted","prompt"].includes(s.state)){n.next=8;break}return c=new Blob([r],{type:o}),n.next=7,e.clipboard.write([new ClipboardItem(Object(i.a)({},o,c))]);case 7:return n.abrupt("return",!0);case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:return n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},rem:function(){window.removeEventListener("paste",this.paste)},add:function(){window.addEventListener("paste",this.paste)}},beforeDestroy:function(){this.$bus.$off("input:focus",this.rem.bind(this)),this.$bus.$off("input:blur",this.add.bind(this)),this.rem()},beforeMount:function(){this.$bus.$on("input:focus",this.rem.bind(this)),this.$bus.$on("input:blur",this.add.bind(this))},mounted:function(){this.clipboard=navigator.clipboard,this.add()},render:function(){return this.$scopedSlots.default({})}},u=l,d=n(250),h=Object(d.a)(u,undefined,undefined,!1,null,null,null);e.default=h.exports}}]);