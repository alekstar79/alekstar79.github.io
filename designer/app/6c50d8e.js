/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{231:function(t,e,n){(function(e){t.exports=function(t,n){for(var r=Math.min(t.length,n.length),i=new e(r),o=0;o<r;++o)i[o]=t[o]^n[o];return i}}).call(this,n(70).Buffer)},364:function(t,e,n){(function(r){var i,o,s,u,f=n(204);n(586),n(108),n(3),n(142),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(75),n(16),n(62),n(587),n(429),n(430),n(588),n(589),n(88),n(32),n(25),n(58),n(140),n(24),n(53),n(43),n(57),n(87),n(590),n(591),n(29),n(592),n(67),n(490),n(505),n(371),n(227),n(180),n(161),n(593),n(19),n(12),n(84),n(9),n(34),n(83),n(182),n(594),n(94),n(15),n(373),n(14),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(226),u=function(t){"use strict";for(var e=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n=function(t){var e,n,r=c(t),i=r[0],o=r[1],f=new u(function(t,e,n){return 3*(e+n)/4-n}(0,i,o)),a=0,h=o>0?i-4:i;for(n=0;n<h;n+=4)e=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],f[a++]=e>>16&255,f[a++]=e>>8&255,f[a++]=255&e;return 2===o&&(e=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,f[a++]=255&e),1===o&&(e=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,f[a++]=e>>8&255,f[a++]=255&e),f},i=function(t){for(var e,n=t.length,r=n%3,i=[],s=16383,u=0,f=n-r;u<f;u+=s)i.push(p(t,u,u+s>f?f:u+s));return 1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"=")),i.join("")},o=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,l=a.length;h<l;++h)o[h]=a[h],s[a.charCodeAt(h)]=h;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function p(t,e,n){for(var r,i,s=[],u=e;u<n;u+=3)r=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;var g={byteLength:e,toByteArray:n,fromByteArray:i},y=function(t,e,n,r,i){var o,s,u=8*i-r-1,f=(1<<u)-1,a=f>>1,h=-7,l=n?i-1:0,c=n?-1:1,p=t[e+l];for(l+=c,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=256*o+t[e+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=c,h-=8);if(0===o)o=1-a;else{if(o===f)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=a}return(p?-1:1)*s*Math.pow(2,o-r)},d=function(t,e,n,r,i,o){var s,u,f,a=8*o-i-1,h=(1<<a)-1,l=h>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,g=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),(e+=s+l>=1?c/f:c*Math.pow(2,1-l))*f>=2&&(s++,f/=2),s+l>=h?(u=0,s=h):s+l>=1?(u=(e*f-1)*Math.pow(2,i),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&u,p+=g,u/=256,i-=8);for(s=s<<i|u,a+=i;a>0;t[n+p]=255&s,p+=g,s/=256,a-=8);t[n+p-g]|=128*y},b=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var r=2147483647;function i(t){if(t>r)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|c(t,e),r=i(n),s=r.write(t,e);return s!==n&&(r=r.slice(0,s)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return a(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return o.from(r,e,n);var s=function(t){if(o.isBuffer(t)){var e=0|l(t.length),n=i(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||k(t.length)?i(0):a(t):"Buffer"===t.type&&Array.isArray(t.data)?a(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return u(t),i(t<0?0:0|l(t))}function a(t){for(var e=t.length<0?0:0|l(t.length),n=i(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,o.prototype),r}function l(t){if(t>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function c(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(t).length;default:if(i)return r?-1:P(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return U(this,e,n);case"base64":return B(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function b(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),k(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,s=1,u=t.length,f=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,f/=2,n/=2}function a(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<u;o++)if(a(t,o)===a(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===f)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+f>u&&(n=u-f),o=n;o>=0;o--){for(var l=!0,c=0;c<f;c++)if(a(t,o+c)!==a(e,c)){l=!1;break}if(l)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(k(u))return s;t[n+s]=u}return s}function S(t,e,n,r){return J(P(e,t.length-n),t,n,r)}function O(t,e,n,r){return J(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return J(C(e),t,n,r)}function E(t,e,n,r){return J(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function B(t,e,n){return 0===e&&n===t.length?g.fromByteArray(t):g.fromByteArray(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,u,f,a=t[i],h=null,l=a>239?4:a>223?3:a>191?2:1;if(i+l<=n)switch(l){case 1:a<128&&(h=a);break;case 2:128==(192&(o=t[i+1]))&&(f=(31&a)<<6|63&o)>127&&(h=f);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(f=(15&a)<<12|(63&o)<<6|63&s)>2047&&(f<55296||f>57343)&&(h=f);break;case 4:o=t[i+1],s=t[i+2],u=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(f=(15&a)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&f<1114112&&(h=f)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=x));return n}(r)}e.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(n){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,n){return s(t,e,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}(t,e,n)},o.allocUnsafe=function(t){return f(t)},o.allocUnsafeSlow=function(t){return f(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(Y(s,Uint8Array))i+s.length>r.length?o.from(s).copy(r,i):Uint8Array.prototype.set.call(r,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i)}i+=s.length}return r},o.byteLength=c,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?N(this,0,t):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(t,e,n,r,i){if(Y(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),u=(n>>>=0)-(e>>>=0),f=Math.min(s,u),a=this.slice(r,i),h=t.slice(e,n),l=0;l<f;++l)if(a[l]!==h[l]){s=a[l],u=h[l];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":case"latin1":case"binary":return O(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function U(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z[t[o]];return i}function j(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,i){return e=+e,n>>>=0,i||R(t,0,n,4),d(t,e,n,r,23,4),n+4}function $(t,e,n,r,i){return e=+e,n>>>=0,i||R(t,0,n,8),d(t,e,n,r,52,8),n+8}o.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),y(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),y(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),y(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),y(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var u=o.isBuffer(t)?t:o.from(t,r),f=u.length;if(0===f)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=u[s%f]}return this};var M=/[^+/0-9A-Za-z-_]/g;function P(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function C(t){return g.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function k(t){return t!=t}var z=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()})),w=b.Buffer;b.SlowBuffer,b.INSPECT_MAX_BYTES,b.kMaxLength;var m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},m(t,e)};function v(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)},O=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return v(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),_=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return v(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function E(t){return t&&t.Math==Math&&t}function B(){return E("object"===("undefined"==typeof globalThis?"undefined":f(globalThis))&&globalThis)||E("object"===("undefined"==typeof window?"undefined":f(window))&&window)||E("object"===("undefined"==typeof self?"undefined":f(self))&&self)||E("object"===(void 0===r?"undefined":f(r))&&r)||Function("return this")()}function N(t){return t.toString().replace("function(","function (")}var x=function(t){var e,n=(e=B(),"object"===f(e.navigator)&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.");console.warn(n);for(var r=w.alloc(t),i=0;i<t;++i)r[i]=Math.floor(256*Math.random());return r},A=function(){if("undefined"!=typeof window){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(w.alloc(e))}}return void 0!==r&&r.crypto&&r.crypto.getRandomValues?function(t){return r.crypto.getRandomValues(w.alloc(t))}:x}();function U(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function I(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function j(t){return"[object BigInt64Array]"===Object.prototype.toString.call(t)}function L(t){return"[object BigUint64Array]"===Object.prototype.toString.call(t)}function T(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function R(t){return D(t)&&"[object Date]"===Object.prototype.toString.call(t)}function D(t){return"object"===f(t)&&null!==t}function $(t,e){var n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(console.warn(e),n=!0),t.apply(this,r)}}function M(t){if(ArrayBuffer.isView(t))return w.from(t.buffer,t.byteOffset,t.byteLength);if(U(t))return w.from(t);throw new _("Must use either Buffer or TypedArray")}var P=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,C=function(t){return"string"==typeof t&&P.test(t)},J=function(t){if(!C(t))throw new _('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return w.from(e,"hex")},Y=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},k=2147483647,z=-2147483648,F=Math.pow(2,63)-1,V=-Math.pow(2,63),q=Math.pow(2,53),H=-Math.pow(2,53),Z=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new _("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=n?n:t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=w.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=w.from(e,"binary"):Array.isArray(e)?this.buffer=w.from(e):this.buffer=M(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new _("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new _("only accepts single character Uint8Array or Array");var n;if((n="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||n>255)throw new _("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=n;else{var r=w.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var n=w.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(M(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===n.length?"0"+n:n}:{$binary:{base64:e,subType:1===n.length?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new K(this.buffer.slice(0,this.position));throw new O('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,n){var r,i;if(n=n||{},"$binary"in e?n.legacy&&"string"==typeof e.$binary&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,r=w.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,r=w.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,r=J(e.$uuid)),!r)throw new _("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return 4===i?new K(r):new t(r,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(Z.prototype,"_bsontype",{value:"Binary"});var K=function(t){function e(n){var r,i,o=this;if(null==n)r=e.generate();else if(n instanceof e)r=w.from(n.buffer),i=n.__id;else if(ArrayBuffer.isView(n)&&16===n.byteLength)r=M(n);else{if("string"!=typeof n)throw new _("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");r=J(n)}return(o=t.call(this,r,4)||this).__id=i,o}return v(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(t){this.buffer=t,e.cacheHexString&&(this.__id=Y(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var n=Y(this.id,t);return e.cacheHexString&&(this.__id=n),n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch(n){return!1}},e.prototype.toBinary=function(){return new Z(this.id,Z.SUBTYPE_UUID)},e.generate=function(){var t=A(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,w.from(t)},e.isValid=function(t){return!!t&&(t instanceof e||("string"==typeof t?C(t):!!I(t)&&16===t.length&&64==(240&t[6])&&128==(128&t[8])))},e.createFromHexString=function(t){return new e(J(t))},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(Z),W=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);this.code=e,this.scope=n}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},t}();function X(t){return D(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}Object.defineProperty(W.prototype,"_bsontype",{value:"Code"});var G=function(){function t(e,n,r,i){if(!(this instanceof t))return new t(e,n,r,i);var o=e.split(".");2===o.length&&(r=o.shift(),e=o.shift()),this.collection=e,this.oid=n,this.db=r,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy?e:(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields))},t.fromExtendedJSON=function(e){var n=Object.assign({},e);return delete n.$ref,delete n.$id,delete n.$db,new t(e.$ref,e.$id,e.$db,n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(G.prototype,"_bsontype",{value:"DBRef"});var Q=void 0;try{Q=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Te){}var tt=4294967296,et=0x10000000000000000,nt=et/2,rt={},it={},ot=function(){function t(e,n,r){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,n,r);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!n)):"string"==typeof e?Object.assign(this,t.fromString(e,!!n)):(this.low=0|e,this.high=0|n,this.unsigned=!!r),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromInt=function(e,n){var r,i,o;return n?(o=0<=(e>>>=0)&&e<256)&&(i=it[e])?i:(r=t.fromBits(e,(0|e)<0?-1:0,!0),o&&(it[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(i=rt[e])?i:(r=t.fromBits(e,e<0?-1:0,!1),o&&(rt[e]=r),r)},t.fromNumber=function(e,n){if(isNaN(e))return n?t.UZERO:t.ZERO;if(n){if(e<0)return t.UZERO;if(e>=et)return t.MAX_UNSIGNED_VALUE}else{if(e<=-nt)return t.MIN_VALUE;if(e+1>=nt)return t.MAX_VALUE}return e<0?t.fromNumber(-e,n).neg():t.fromBits(e%tt|0,e/tt|0,n)},t.fromBigInt=function(e,n){return t.fromString(e.toString(),n)},t.fromString=function(e,n,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n?(r=n,n=!1):n=!!n,(r=r||10)<2||36<r)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return t.fromString(e.substring(1),n,r).neg();for(var o=t.fromNumber(Math.pow(r,8)),s=t.ZERO,u=0;u<e.length;u+=8){var f=Math.min(8,e.length-u),a=parseInt(e.substring(u,u+f),r);if(f<8){var h=t.fromNumber(Math.pow(r,f));s=s.mul(h).add(t.fromNumber(a))}else s=(s=s.mul(o)).add(t.fromNumber(a))}return s.unsigned=n,s},t.fromBytes=function(e,n,r){return r?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)},t.isLong=function(t){return D(t)&&!0===t.__isLong__},t.fromValue=function(e,n){return"number"==typeof e?t.fromNumber(e,n):"string"==typeof e?t.fromString(e,n):t.fromBits(e.low,e.high,"boolean"==typeof n?n:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,u=65535&e.high,f=e.low>>>16,a=0,h=0,l=0,c=0;return l+=(c+=o+(65535&e.low))>>>16,c&=65535,h+=(l+=i+f)>>>16,l&=65535,a+=(h+=r+u)>>>16,h&=65535,a+=n+s,a&=65535,t.fromBits(l<<16|c,a<<16|h,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(Q){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var n=(this.unsigned?Q.div_u:Q.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,Q.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var r,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(r)),o=r.add(i.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:Math.pow(2,s-48),f=t.fromNumber(r),a=f.mul(e);a.isNegative()||a.gt(i);)r-=u,a=(f=t.fromNumber(r,this.unsigned)).mul(e);f.isZero()&&(f=t.ONE),o=o.add(f),i=i.sub(a)}return o},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,n=0!==this.high?this.high:this.low;for(e=31;e>0&&0==(n&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),Q){var n=(this.unsigned?Q.rem_u:Q.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,Q.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Q){var n=Q.mul(this.low,this.high,e.low,e.high);return t.fromBits(n,Q.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,u=e.high>>>16,f=65535&e.high,a=e.low>>>16,h=65535&e.low,l=0,c=0,p=0,g=0;return p+=(g+=s*h)>>>16,g&=65535,c+=(p+=o*h)>>>16,p&=65535,c+=(p+=s*a)>>>16,p&=65535,l+=(c+=i*h)>>>16,c&=65535,l+=(c+=o*a)>>>16,c&=65535,l+=(c+=s*f)>>>16,c&=65535,l+=r*h+i*a+o*f+s*u,l&=65535,t.fromBits(p<<16|g,l<<16|c,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;if(e<32){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*tt+(this.low>>>0):this.high*tt+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var n=t.fromNumber(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,u="";;){var f=s.div(o),a=(s.sub(f.mul(o)).toInt()>>>0).toString(e);if((s=f).isZero())return a+u;for(;a.length<6;)a="0"+a;u=""+a+u}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,n){var r=t.fromString(e.$numberLong);return n&&n.relaxed?r.toNumber():r},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(ot.prototype,"__isLong__",{value:!0}),Object.defineProperty(ot.prototype,"_bsontype",{value:"Long"});var st=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,ut=/^(\+|-)?(Infinity|inf)$/i,ft=/^(\+|-)?NaN$/i,at=6111,ht=-6176,lt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),ct=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),pt=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),gt=/^([-+])?(\d+)?$/;function yt(t){return!isNaN(parseInt(t,10))}function dt(t){var e=ot.fromNumber(1e9),n=ot.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new ot(t.parts[r],0)),t.parts[r]=n.div(e).low,n=n.modulo(e);return{quotient:t,rem:n}}function bt(t,e){throw new _('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var wt=function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e)this.bytes=t.fromString(e).bytes;else{if(!I(e))throw new _("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new _("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}return t.fromString=function(e){var n,r=!1,i=!1,o=!1,s=0,u=0,f=0,a=0,h=0,l=[0],c=0,p=0,g=0,y=0,d=0,b=0,m=new ot(0,0),v=new ot(0,0),S=0;if(e.length>=7e3)throw new _(e+" not a valid Decimal128 string");var O=e.match(st),E=e.match(ut),B=e.match(ft);if(!O&&!E&&!B||0===e.length)throw new _(e+" not a valid Decimal128 string");if(O){var N=O[2],x=O[4],A=O[5],U=O[6];x&&void 0===U&&bt(e,"missing exponent power"),x&&void 0===N&&bt(e,"missing exponent base"),void 0===x&&(A||U)&&bt(e,"missing e before exponent")}if("+"!==e[S]&&"-"!==e[S]||(r="-"===e[S++]),!yt(e[S])&&"."!==e[S]){if("i"===e[S]||"I"===e[S])return new t(w.from(r?ct:pt));if("N"===e[S])return new t(w.from(lt))}for(;yt(e[S])||"."===e[S];)"."!==e[S]?(c<34&&("0"!==e[S]||o)&&(o||(h=u),o=!0,l[p++]=parseInt(e[S],10),c+=1),o&&(f+=1),i&&(a+=1),u+=1,S+=1):(i&&bt(e,"contains multiple periods"),i=!0,S+=1);if(i&&!u)throw new _(e+" not a valid Decimal128 string");if("e"===e[S]||"E"===e[S]){var I=e.substr(++S).match(gt);if(!I||!I[2])return new t(w.from(lt));d=parseInt(I[0],10),S+=I[0].length}if(e[S])return new t(w.from(lt));if(g=0,c){if(y=c-1,1!==(s=f))for(;0===l[h+s-1];)s-=1}else g=0,y=0,l[0]=0,f=1,c=1,s=0;for(d<=a&&a-d>16384?d=ht:d-=a;d>at;){if((y+=1)-g>34){if(l.join("").match(/^0+$/)){d=at;break}bt(e,"overflow")}d-=1}for(;d<ht||c<f;){if(0===y&&s<c){d=ht,s=0;break}if(c<f?f-=1:y-=1,d<at)d+=1;else{if(l.join("").match(/^0+$/)){d=at;break}bt(e,"overflow")}}if(y-g+1<s){var j=u;i&&(h+=1,j+=1),r&&(h+=1,j+=1);var L=parseInt(e[h+y+1],10),T=0;if(L>=5&&(T=1,5===L))for(T=l[y]%2==1?1:0,b=h+y+2;b<j;b++)if(parseInt(e[b],10)){T=1;break}if(T)for(var R=y;R>=0;R--)if(++l[R]>9&&(l[R]=0,0===R)){if(!(d<at))return new t(w.from(r?ct:pt));d+=1,l[R]=1}}if(m=ot.fromNumber(0),v=ot.fromNumber(0),0===s)m=ot.fromNumber(0),v=ot.fromNumber(0);else if(y-g<17)for(R=g,v=ot.fromNumber(l[R++]),m=new ot(0,0);R<=y;R++)v=(v=v.multiply(ot.fromNumber(10))).add(ot.fromNumber(l[R]));else{for(R=g,m=ot.fromNumber(l[R++]);R<=y-17;R++)m=(m=m.multiply(ot.fromNumber(10))).add(ot.fromNumber(l[R]));for(v=ot.fromNumber(l[R++]);R<=y;R++)v=(v=v.multiply(ot.fromNumber(10))).add(ot.fromNumber(l[R]))}var D,$,M,P,C=function(t,e){if(!t&&!e)return{high:ot.fromNumber(0),low:ot.fromNumber(0)};var n=t.shiftRightUnsigned(32),r=new ot(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new ot(e.getLowBits(),0),s=n.multiply(i),u=n.multiply(o),f=r.multiply(i),a=r.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new ot(u.getLowBits(),0).add(f).add(a.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:a=u.shiftLeft(32).add(new ot(a.getLowBits(),0))}}(m,ot.fromString("100000000000000000"));C.low=C.low.add(v),D=C.low,$=v,M=D.high>>>0,P=$.high>>>0,(M<P||M===P&&D.low>>>0<$.low>>>0)&&(C.high=C.high.add(ot.fromNumber(1))),n=d+6176;var J={low:ot.fromNumber(0),high:ot.fromNumber(0)};C.high.shiftRightUnsigned(49).and(ot.fromNumber(1)).equals(ot.fromNumber(1))?(J.high=J.high.or(ot.fromNumber(3).shiftLeft(61)),J.high=J.high.or(ot.fromNumber(n).and(ot.fromNumber(16383).shiftLeft(47))),J.high=J.high.or(C.high.and(ot.fromNumber(0x7fffffffffff)))):(J.high=J.high.or(ot.fromNumber(16383&n).shiftLeft(49)),J.high=J.high.or(C.high.and(ot.fromNumber(562949953421311)))),J.low=C.low,r&&(J.high=J.high.or(ot.fromString("9223372036854775808")));var Y=w.alloc(16);return S=0,Y[S++]=255&J.low.low,Y[S++]=J.low.low>>8&255,Y[S++]=J.low.low>>16&255,Y[S++]=J.low.low>>24&255,Y[S++]=255&J.low.high,Y[S++]=J.low.high>>8&255,Y[S++]=J.low.high>>16&255,Y[S++]=J.low.high>>24&255,Y[S++]=255&J.high.low,Y[S++]=J.high.low>>8&255,Y[S++]=J.high.low>>16&255,Y[S++]=J.high.low>>24&255,Y[S++]=255&J.high.high,Y[S++]=J.high.high>>8&255,Y[S++]=J.high.high>>16&255,Y[S++]=J.high.high>>24&255,new t(Y)},t.prototype.toString=function(){for(var t,e=0,n=new Array(36),r=0;r<n.length;r++)n[r]=0;var i,o,s,u=0,f=!1,a={parts:[0,0,0,0]},h=[];u=0;var l=this.bytes,c=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,p=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,g=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,y=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24;u=0,(new ot(c,p),new ot(g,y)).lessThan(ot.ZERO)&&h.push("-");var d=y>>26&31;if(d>>3==3){if(30===d)return h.join("")+"Infinity";if(31===d)return"NaN";t=y>>15&16383,i=8+(y>>14&1)}else i=y>>14&7,t=y>>17&16383;var b=t-6176;if(a.parts[0]=(16383&y)+((15&i)<<14),a.parts[1]=g,a.parts[2]=p,a.parts[3]=c,0===a.parts[0]&&0===a.parts[1]&&0===a.parts[2]&&0===a.parts[3])f=!0;else for(s=3;s>=0;s--){var w=0,m=dt(a);if(a=m.quotient,w=m.rem.low)for(o=8;o>=0;o--)n[9*s+o]=w%10,w=Math.floor(w/10)}if(f)e=1,n[u]=0;else for(e=36;!n[u];)e-=1,u+=1;var v=e-1+b;if(v>=34||v<=-7||b>0){if(e>34)return h.push("".concat(0)),b>0?h.push("E+".concat(b)):b<0&&h.push("E".concat(b)),h.join("");for(h.push("".concat(n[u++])),(e-=1)&&h.push("."),r=0;r<e;r++)h.push("".concat(n[u++]));h.push("E"),v>0?h.push("+".concat(v)):h.push("".concat(v))}else if(b>=0)for(r=0;r<e;r++)h.push("".concat(n[u++]));else{var S=e+b;if(S>0)for(r=0;r<S;r++)h.push("".concat(n[u++]));else h.push("0");for(h.push(".");S++<0;)h.push("0");for(r=0;r<e-Math.max(S-1,0);r++)h.push("".concat(n[u++]))}return h.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(wt.prototype,"_bsontype",{value:"Decimal128"});var mt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:(Number.isInteger(this.value)?(e=this.value.toFixed(1)).length>=13&&(e=this.value.toExponential(13).toUpperCase()):e=this.value.toString(),{$numberDouble:e});var e},t.fromExtendedJSON=function(e,n){var r=parseFloat(e.$numberDouble);return n&&n.relaxed?r:new t(r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},t}();Object.defineProperty(mt.prototype,"_bsontype",{value:"Double"});var vt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=0|+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,n){return n&&n.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(vt.prototype,"_bsontype",{value:"Int32"});var St=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(St.prototype,"_bsontype",{value:"MaxKey"});var Ot=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(Ot.prototype,"_bsontype",{value:"MinKey"});var _t=new RegExp("^[0-9a-fA-F]{24}$"),Et=null,Bt=Symbol("id"),Nt=function(){function t(e){if(!(this instanceof t))return new t(e);var n;if("object"===f(e)&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new _("Argument passed in must have an id that is of type string or Buffer");n="toHexString"in e&&"function"==typeof e.toHexString?w.from(e.toHexString(),"hex"):e.id}else n=e;if(null==n||"number"==typeof n)this[Bt]=t.generate("number"==typeof n?n:void 0);else if(ArrayBuffer.isView(n)&&12===n.byteLength)this[Bt]=n instanceof w?n:M(n);else{if("string"!=typeof n)throw new _("Argument passed in does not match the accepted types");if(12===n.length){var r=w.from(n);if(12!==r.byteLength)throw new _("Argument passed in must be a string of 12 bytes");this[Bt]=r}else{if(24!==n.length||!_t.test(n))throw new _("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[Bt]=w.from(n,"hex")}}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Bt]},set:function(e){this[Bt]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));var n=t.getInc(),r=w.alloc(12);return r.writeUInt32BE(e,0),null===Et&&(Et=A(5)),r[4]=Et[0],r[5]=Et[1],r[6]=Et[2],r[7]=Et[3],r[8]=Et[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(null==e)return!1;if(e instanceof t)return this[Bt][11]===e[Bt][11]&&this[Bt].equals(e[Bt]);if("string"==typeof e&&t.isValid(e)&&12===e.length&&I(this.id))return e===w.prototype.toString.call(this.id,"latin1");if("string"==typeof e&&t.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&t.isValid(e)&&12===e.length)return w.from(e).equals(this.id);if("object"===f(e)&&"toHexString"in e&&"function"==typeof e.toHexString){var n=e.toHexString(),r=this.toHexString().toLowerCase();return"string"==typeof n&&n.toLowerCase()===r}return!1},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var n=w.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n.writeUInt32BE(e,0),new t(n)},t.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new _("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(w.from(e,"hex"))},t.isValid=function(e){if(null==e)return!1;try{return new t(e),!0}catch(Te){return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(16777215*Math.random()),t}();Object.defineProperty(Nt.prototype,"generate",{value:$((function(t){return Nt.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(Nt.prototype,"getInc",{value:$((function(){return Nt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Nt.prototype,"get_inc",{value:$((function(){return Nt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Nt,"get_inc",{value:$((function(){return Nt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Nt.prototype,"_bsontype",{value:"ObjectID"});var xt=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(this.pattern=e,this.options=(null!=n?n:"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new O("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new O("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new O("The regular expression option [".concat(this.options[r],"] is not supported"))}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new _("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(xt.prototype,"_bsontype",{value:"BSONRegExp"});var At=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(At.prototype,"_bsontype",{value:"Symbol"});var Ut=ot,It=function(t){function e(n,r){var i=this;return i instanceof e?(i=ot.isLong(n)?t.call(this,n.low,n.high,!0)||this:D(n)&&void 0!==n.t&&void 0!==n.i?t.call(this,n.i,n.t,!0)||this:t.call(this,n,r,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(n,r)}return v(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(ot.fromInt(t,!0))},e.fromNumber=function(t){return new e(ot.fromNumber(t,!0))},e.fromBits=function(t,n){return new e(t,n)},e.fromString=function(t,n){return new e(ot.fromString(t,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=ot.MAX_UNSIGNED_VALUE,e}(Ut);function jt(t){return D(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}var Lt=2147483647,Tt=-2147483648,Rt=0x8000000000000000,Dt=-0x8000000000000000,$t={$oid:Nt,$binary:Z,$uuid:Z,$symbol:At,$numberInt:vt,$numberDecimal:wt,$numberDouble:mt,$numberLong:ot,$minKey:Ot,$maxKey:St,$regex:xt,$regularExpression:xt,$timestamp:It};function Mt(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=Tt&&t<=Lt)return new vt(t);if(t>=Dt&&t<=Rt)return ot.fromNumber(t)}return new mt(t)}if(null==t||"object"!==f(t))return t;if(t.$undefined)return null;for(var n=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),r=0;r<n.length;r++){var i=$t[n[r]];if(i)return i.fromExtendedJSON(t,e)}if(null!=t.$date){var o=t.$date,s=new Date;return e.legacy?"number"==typeof o?s.setTime(o):"string"==typeof o&&s.setTime(Date.parse(o)):"string"==typeof o?s.setTime(Date.parse(o)):ot.isLong(o)?s.setTime(o.toNumber()):"number"==typeof o&&e.relaxed&&s.setTime(o),s}if(null!=t.$code){var u=Object.assign({},t);return t.$scope&&(u.$scope=Mt(t.$scope)),W.fromExtendedJSON(t)}if(X(t)||t.$dbPointer){var a=t.$ref?t:t.$dbPointer;if(a instanceof G)return a;var h=Object.keys(a).filter((function(t){return t.startsWith("$")})),l=!0;if(h.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(l=!1)})),l)return G.fromExtendedJSON(a)}return t}function Pt(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function Ct(t,e){if(("object"===f(t)||"function"==typeof t)&&null!==t){var n=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==n){var r=e.seenObjects.map((function(t){return t.propertyName})),i=r.slice(0,n).map((function(t){return"".concat(t," -> ")})).join(""),o=r[n],s=" -> "+r.slice(n+1,r.length-1).map((function(t){return"".concat(t," -> ")})).join(""),u=r[r.length-1],a=" ".repeat(i.length+o.length/2),h="-".repeat(s.length+(o.length+u.length)/2-1);throw new _("Converting circular structure to EJSON:\n"+"    ".concat(i).concat(o).concat(s).concat(u,"\n")+"    ".concat(a,"\\").concat(h,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,n){e.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return Ct(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||R(t)){var l=t.getTime(),c=l>-1&&l<2534023188e5;return e.legacy?e.relaxed&&c?{$date:t.getTime()}:{$date:Pt(t)}:e.relaxed&&c?{$date:Pt(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var p=t>=Dt&&t<=Rt;if(t>=Tt&&t<=Lt)return{$numberInt:t.toString()};if(p)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||T(t)){var g=t.flags;if(void 0===g){var y=t.toString().match(/[gimuy]*$/);y&&(g=y[0])}return new xt(t.source,g).toExtendedJSON(e)}return null!=t&&"object"===f(t)?function(t,e){if(null==t||"object"!==f(t))throw new O("not an object instance");var n=t._bsontype;if(void 0===n){var r={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{var o=Ct(t[i],e);"__proto__"===i?Object.defineProperty(r,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):r[i]=o}finally{e.seenObjects.pop()}}return r}if(jt(t)){var s=t;if("function"!=typeof s.toExtendedJSON){var u=Jt[t._bsontype];if(!u)throw new _("Unrecognized or invalid _bsontype: "+t._bsontype);s=u(s)}return"Code"===n&&s.scope?s=new W(s.code,Ct(s.scope,e)):"DBRef"===n&&s.oid&&(s=new G(Ct(s.collection,e),Ct(s.oid,e),Ct(s.db,e),Ct(s.fields,e))),s.toExtendedJSON(e)}throw new O("_bsontype must be a string, but was: "+f(n))}(t,e):t}var Jt={Binary:function(t){return new Z(t.value(),t.sub_type)},Code:function(t){return new W(t.code,t.scope)},DBRef:function(t){return new G(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new wt(t.bytes)},Double:function(t){return new mt(t.value)},Int32:function(t){return new vt(t.value)},Long:function(t){return ot.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new St},MinKey:function(){return new Ot},ObjectID:function(t){return new Nt(t)},ObjectId:function(t){return new Nt(t)},BSONRegExp:function(t){return new xt(t.pattern,t.options)},Symbol:function(t){return new At(t.value)},Timestamp:function(t){return It.fromBits(t.low,t.high)}};t.EJSON=void 0,function(t){function e(t,e){var n=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof n.relaxed&&(n.strict=!n.relaxed),"boolean"==typeof n.strict&&(n.relaxed=!n.strict),JSON.parse(t,(function(t,e){if(-1!==t.indexOf("\0"))throw new O("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(t)));return Mt(e,n)}))}function n(t,e,n,r){null!=n&&"object"===f(n)&&(r=n,n=0),null==e||"object"!==f(e)||Array.isArray(e)||(r=e,e=void 0,n=0);var i=Ct(t,Object.assign({relaxed:!0,legacy:!1},r,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(i,e,n)}t.parse=e,t.stringify=n,t.serialize=function(t,e){return e=e||{},JSON.parse(n(t,e))},t.deserialize=function(t,n){return n=n||{},e(JSON.stringify(t),n)}}(t.EJSON||(t.EJSON={})),t.Map=void 0;var Yt=B();function kt(t,e,n){var r=5;if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=zt(i.toString(),t[i],e,!0,n);else for(var o in"function"==typeof(null==t?void 0:t.toBSON)&&(t=t.toBSON()),t)r+=zt(o,t[o],e,!1,n);return r}function zt(t,e,n,r,i){switch(void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),"function"==typeof(null==e?void 0:e.toBSON)&&(e=e.toBSON()),f(e)){case"string":return 1+w.byteLength(t,"utf8")+1+4+w.byteLength(e,"utf8")+1;case"number":return Math.floor(e)===e&&e>=H&&e<=q&&e>=z&&e<=k?(null!=t?w.byteLength(t,"utf8")+1:0)+5:(null!=t?w.byteLength(t,"utf8")+1:0)+9;case"undefined":return r||!i?(null!=t?w.byteLength(t,"utf8")+1:0)+1:0;case"boolean":return(null!=t?w.byteLength(t,"utf8")+1:0)+2;case"object":if(null==e||"MinKey"===e._bsontype||"MaxKey"===e._bsontype)return(null!=t?w.byteLength(t,"utf8")+1:0)+1;if("ObjectId"===e._bsontype||"ObjectID"===e._bsontype)return(null!=t?w.byteLength(t,"utf8")+1:0)+13;if(e instanceof Date||R(e))return(null!=t?w.byteLength(t,"utf8")+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||U(e))return(null!=t?w.byteLength(t,"utf8")+1:0)+6+e.byteLength;if("Long"===e._bsontype||"Double"===e._bsontype||"Timestamp"===e._bsontype)return(null!=t?w.byteLength(t,"utf8")+1:0)+9;if("Decimal128"===e._bsontype)return(null!=t?w.byteLength(t,"utf8")+1:0)+17;if("Code"===e._bsontype)return null!=e.scope&&Object.keys(e.scope).length>0?(null!=t?w.byteLength(t,"utf8")+1:0)+1+4+4+w.byteLength(e.code.toString(),"utf8")+1+kt(e.scope,n,i):(null!=t?w.byteLength(t,"utf8")+1:0)+1+4+w.byteLength(e.code.toString(),"utf8")+1;if("Binary"===e._bsontype){var o=e;return o.sub_type===Z.SUBTYPE_BYTE_ARRAY?(null!=t?w.byteLength(t,"utf8")+1:0)+(o.position+1+4+1+4):(null!=t?w.byteLength(t,"utf8")+1:0)+(o.position+1+4+1)}if("Symbol"===e._bsontype)return(null!=t?w.byteLength(t,"utf8")+1:0)+w.byteLength(e.value,"utf8")+4+1+1;if("DBRef"===e._bsontype){var s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return null!=e.db&&(s.$db=e.db),(null!=t?w.byteLength(t,"utf8")+1:0)+1+kt(s,n,i)}return e instanceof RegExp||T(e)?(null!=t?w.byteLength(t,"utf8")+1:0)+1+w.byteLength(e.source,"utf8")+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:"BSONRegExp"===e._bsontype?(null!=t?w.byteLength(t,"utf8")+1:0)+1+w.byteLength(e.pattern,"utf8")+1+w.byteLength(e.options,"utf8")+1:(null!=t?w.byteLength(t,"utf8")+1:0)+kt(e,n,i)+1;case"function":if(e instanceof RegExp||T(e)||"[object RegExp]"===String.call(e))return(null!=t?w.byteLength(t,"utf8")+1:0)+1+w.byteLength(e.source,"utf8")+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1;if(n&&null!=e.scope&&Object.keys(e.scope).length>0)return(null!=t?w.byteLength(t,"utf8")+1:0)+1+4+4+w.byteLength(N(e),"utf8")+1+kt(e.scope,n,i);if(n)return(null!=t?w.byteLength(t,"utf8")+1:0)+1+4+w.byteLength(N(e),"utf8")+1}return 0}function Ft(t,e,n){for(var r=0,i=e;i<n;i+=1){var o=t[i];if(r){if(128!=(192&o))return!1;r-=1}else if(128&o)if(192==(224&o))r=1;else if(224==(240&o))r=2;else{if(240!=(248&o))return!1;r=3}}return!r}Yt.Map?t.Map=Yt.Map:t.Map=function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var n=t[e],r=n[0],i=n[1];this._keys.push(r),this._values[r]={v:i,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?[n,t._values[n].v]:void 0,done:void 0===n}}}},t.prototype.forEach=function(t,e){e=e||this;for(var n=0;n<this._keys.length;n++){var r=this._keys[n];t.call(e,this._values[r].v,r,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?n:void 0,done:void 0===n}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?t._values[n].v:void 0,done:void 0===n}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();var Vt=ot.fromNumber(q),qt=ot.fromNumber(H),Ht={};function Zt(t,e,n){var r=(e=null==e?{}:e)&&e.index?e.index:0,i=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;if(i<5)throw new O("bson size must be >= 5, is ".concat(i));if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new O("buffer length ".concat(t.length," must be >= bson size ").concat(i));if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new O("buffer length ".concat(t.length," must === bson size ").concat(i));if(i+r>t.byteLength)throw new O("(bson size ".concat(i," + options.index ").concat(r," must be <= buffer length ").concat(t.byteLength,")"));if(0!==t[r+i-1])throw new O("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Wt(t,r,e,n)}var Kt=/^\$ref$|^\$id$|^\$db$/;function Wt(t,e,n,r){void 0===r&&(r=!1);var i,o=null!=n.evalFunctions&&n.evalFunctions,s=null!=n.cacheFunctions&&n.cacheFunctions,u=null==n.fieldsAsRaw?null:n.fieldsAsRaw,f=null!=n.raw&&n.raw,a="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,h=null!=n.promoteBuffers&&n.promoteBuffers,l=null==n.promoteLongs||n.promoteLongs,c=null==n.promoteValues||n.promoteValues,p=null==n.validation?{utf8:!0}:n.validation,g=!0,y=new Set,d=p.utf8;if("boolean"==typeof d)i=d;else{g=!1;var b=Object.keys(d).map((function(t){return d[t]}));if(0===b.length)throw new O("UTF-8 validation setting cannot be empty");if("boolean"!=typeof b[0])throw new O("Invalid UTF-8 validation option, must specify boolean values");if(i=b[0],!b.every((function(t){return t===i})))throw new O("Invalid UTF-8 validation option - keys must be all true or all false")}if(!g)for(var m=0,v=Object.keys(d);m<v.length;m++){var _=v[m];y.add(_)}var E=e;if(t.length<5)throw new O("corrupt bson message < 5 bytes long");var B=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(B<5||B>t.length)throw new O("corrupt bson message");for(var N=r?[]:{},x=0,A=!r&&null,U=new DataView(t.buffer,t.byteOffset,t.byteLength);;){var I=t[e++];if(0===I)break;for(var j=e;0!==t[j]&&j<t.length;)j++;if(j>=t.byteLength)throw new O("Bad BSON Document: illegal CString");var L=r?x++:t.toString("utf8",e,j),T=!0;T=g||y.has(L)?i:!i,!1!==A&&"$"===L[0]&&(A=Kt.test(L));var R=void 0;if(e=j+1,2===I){if((at=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||at>t.length-e||0!==t[e+at-1])throw new O("bad string length in bson");R=Gt(t,e,e+at-1,T),e+=at}else if(7===I){var D=w.alloc(12);t.copy(D,0,e,e+12),R=new Nt(D),e+=12}else if(16===I&&!1===c)R=new vt(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24);else if(16===I)R=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;else if(1===I&&!1===c)R=new mt(U.getFloat64(e,!0)),e+=8;else if(1===I)R=U.getFloat64(e,!0),e+=8;else if(9===I){var $=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,M=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;R=new Date(new ot($,M).toNumber())}else if(8===I){if(0!==t[e]&&1!==t[e])throw new O("illegal boolean type value");R=1===t[e++]}else if(3===I){var P=e;if((ut=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)<=0||ut>t.length-e)throw new O("bad embedded document length in bson");if(f)R=t.slice(e,e+ut);else{var C=n;g||(C=S(S({},n),{validation:{utf8:T}})),R=Wt(t,P,C,!1)}e+=ut}else if(4===I){P=e;var J=n,Y=e+(ut=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24);if(u&&u[L]){for(var k in J={},n)J[k]=n[k];J.raw=!0}if(g||(J=S(S({},J),{validation:{utf8:T}})),R=Wt(t,P,J,!0),0!==t[(e+=ut)-1])throw new O("invalid array terminator byte");if(e!==Y)throw new O("corrupted array bson")}else if(6===I)R=void 0;else if(10===I)R=null;else if(18===I){$=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,M=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var z=new ot($,M);R=l&&!0===c&&z.lessThanOrEqual(Vt)&&z.greaterThanOrEqual(qt)?z.toNumber():z}else if(19===I){var F=w.alloc(16);t.copy(F,0,e,e+16),e+=16;var V=new wt(F);R="toObject"in V&&"function"==typeof V.toObject?V.toObject():V}else if(5===I){var q=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,H=q,K=t[e++];if(q<0)throw new O("Negative binary type element size found");if(q>t.byteLength)throw new O("Binary type size larger than document size");if(null!=t.slice){if(K===Z.SUBTYPE_BYTE_ARRAY){if((q=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new O("Negative binary type element size found for subtype 0x02");if(q>H-4)throw new O("Binary type with subtype 0x02 contains too long binary size");if(q<H-4)throw new O("Binary type with subtype 0x02 contains too short binary size")}h&&c?R=t.slice(e,e+q):(R=new Z(t.slice(e,e+q),K),4===K&&(R=R.toUUID()))}else{var Q=w.alloc(q);if(K===Z.SUBTYPE_BYTE_ARRAY){if((q=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new O("Negative binary type element size found for subtype 0x02");if(q>H-4)throw new O("Binary type with subtype 0x02 contains too long binary size");if(q<H-4)throw new O("Binary type with subtype 0x02 contains too short binary size")}for(j=0;j<q;j++)Q[j]=t[e+j];R=h&&c?Q:4===K?new Z(t.slice(e,e+q),K).toUUID():new Z(t.slice(e,e+q),K)}e+=q}else if(11===I&&!1===a){for(j=e;0!==t[j]&&j<t.length;)j++;if(j>=t.length)throw new O("Bad BSON Document: illegal CString");var tt=t.toString("utf8",e,j);for(j=e=j+1;0!==t[j]&&j<t.length;)j++;if(j>=t.length)throw new O("Bad BSON Document: illegal CString");var et=t.toString("utf8",e,j);e=j+1;var nt=new Array(et.length);for(j=0;j<et.length;j++)switch(et[j]){case"m":nt[j]="m";break;case"s":nt[j]="g";break;case"i":nt[j]="i"}R=new RegExp(tt,nt.join(""))}else if(11===I&&!0===a){for(j=e;0!==t[j]&&j<t.length;)j++;if(j>=t.length)throw new O("Bad BSON Document: illegal CString");for(tt=t.toString("utf8",e,j),j=e=j+1;0!==t[j]&&j<t.length;)j++;if(j>=t.length)throw new O("Bad BSON Document: illegal CString");et=t.toString("utf8",e,j),e=j+1,R=new xt(tt,et)}else if(14===I){if((at=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||at>t.length-e||0!==t[e+at-1])throw new O("bad string length in bson");var rt=Gt(t,e,e+at-1,T);R=c?rt:new At(rt),e+=at}else if(17===I)$=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,M=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,R=new It($,M);else if(255===I)R=new Ot;else if(127===I)R=new St;else if(13===I){if((at=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||at>t.length-e||0!==t[e+at-1])throw new O("bad string length in bson");var it=Gt(t,e,e+at-1,T);R=o?s?Xt(it,Ht,N):Xt(it):new W(it),e+=at}else if(15===I){var st=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(st<13)throw new O("code_w_scope total size shorter minimum expected length");if((at=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||at>t.length-e||0!==t[e+at-1])throw new O("bad string length in bson");it=Gt(t,e,e+at-1,T),P=e+=at;var ut=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,ft=Wt(t,P,n,!1);if(e+=ut,st<8+ut+at)throw new O("code_w_scope total size is too short, truncating scope");if(st>8+ut+at)throw new O("code_w_scope total size is too long, clips outer document");o?(R=s?Xt(it,Ht,N):Xt(it)).scope=ft:R=new W(it,ft)}else{if(12!==I)throw new O("Detected unknown BSON type ".concat(I.toString(16),' for fieldname "').concat(L,'"'));var at;if((at=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||at>t.length-e||0!==t[e+at-1])throw new O("bad string length in bson");if(null!=p&&p.utf8&&!Ft(t,e,e+at-1))throw new O("Invalid UTF-8 string in BSON document");var ht=t.toString("utf8",e,e+at-1);e+=at;var lt=w.alloc(12);t.copy(lt,0,e,e+12),D=new Nt(lt),e+=12,R=new G(ht,D)}"__proto__"===L?Object.defineProperty(N,L,{value:R,writable:!0,enumerable:!0,configurable:!0}):N[L]=R}if(B!==e-E){if(r)throw new O("corrupt array bson");throw new O("corrupt object bson")}if(!A)return N;if(X(N)){var ct=Object.assign({},N);return delete ct.$ref,delete ct.$id,delete ct.$db,new G(N.$ref,N.$id,N.$db,ct)}return N}function Xt(t,e,n){return e?(null==e[t]&&(e[t]=new Function(t)),e[t].bind(n)):new Function(t)}function Gt(t,e,n,r){var i=t.toString("utf8",e,n);if(r)for(var o=0;o<i.length;o++)if(65533===i.charCodeAt(o)){if(!Ft(t,e,n))throw new O("Invalid UTF-8 string in BSON document");break}return i}var Qt=/\x00/,te=new Set(["$db","$ref","$id","$clusterTime"]);function ee(t,e,n,r,i){t[r++]=2;var o=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8");t[(r=r+o+1)-1]=0;var s=t.write(n,r+4,void 0,"utf8");return t[r+3]=s+1>>24&255,t[r+2]=s+1>>16&255,t[r+1]=s+1>>8&255,t[r]=s+1&255,r=r+4+s,t[r++]=0,r}var ne=new Uint8Array(8),re=new DataView(ne.buffer,ne.byteOffset,ne.byteLength);function ie(t,e,n,r,i){return Number.isInteger(n)&&n>=z&&n<=k?(t[r++]=16,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=n>>16&255,t[r++]=n>>24&255):(t[r++]=1,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,re.setFloat64(0,n,!0),t.set(ne,r),r+=8),r}function oe(t,e,n,r,i){return t[r++]=10,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,r}function se(t,e,n,r,i){return t[r++]=8,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,t[r++]=n?1:0,r}function ue(t,e,n,r,i){t[r++]=9,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var o=ot.fromNumber(n.getTime()),s=o.getLowBits(),u=o.getHighBits();return t[r++]=255&s,t[r++]=s>>8&255,t[r++]=s>>16&255,t[r++]=s>>24&255,t[r++]=255&u,t[r++]=u>>8&255,t[r++]=u>>16&255,t[r++]=u>>24&255,r}function fe(t,e,n,r,i){if(t[r++]=11,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,n.source&&null!=n.source.match(Qt))throw Error("value "+n.source+" must not contain null bytes");return r+=t.write(n.source,r,void 0,"utf8"),t[r++]=0,n.ignoreCase&&(t[r++]=105),n.global&&(t[r++]=115),n.multiline&&(t[r++]=109),t[r++]=0,r}function ae(t,e,n,r,i){if(t[r++]=11,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,null!=n.pattern.match(Qt))throw Error("pattern "+n.pattern+" must not contain null bytes");return r+=t.write(n.pattern,r,void 0,"utf8"),t[r++]=0,r+=t.write(n.options.split("").sort().join(""),r,void 0,"utf8"),t[r++]=0,r}function he(t,e,n,r,i){return null===n?t[r++]=10:"MinKey"===n._bsontype?t[r++]=255:t[r++]=127,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,r}function le(t,e,n,r,i){if(t[r++]=7,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,"string"==typeof n.id)t.write(n.id,r,void 0,"binary");else{if(!I(n.id))throw new _("object ["+JSON.stringify(n)+"] is not a valid ObjectId");t.set(n.id.subarray(0,12),r)}return r+12}function ce(t,e,n,r,i){t[r++]=5,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var o=n.length;return t[r++]=255&o,t[r++]=o>>8&255,t[r++]=o>>16&255,t[r++]=o>>24&255,t[r++]=0,t.set(M(n),r),r+=o}function pe(t,e,n,r,i,o,s,u,f,a){void 0===i&&(i=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===u&&(u=!0),void 0===f&&(f=!1),void 0===a&&(a=[]);for(var h=0;h<a.length;h++)if(a[h]===n)throw new O("cyclic dependency detected");a.push(n),t[r++]=Array.isArray(n)?4:3,r+=f?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var l=_e(t,n,i,r,o+1,s,u,a);return a.pop(),l}function ge(t,e,n,r,i){return t[r++]=19,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,t.set(n.bytes.subarray(0,16),r),r+16}function ye(t,e,n,r,i){t[r++]="Long"===n._bsontype?18:17,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var o=n.getLowBits(),s=n.getHighBits();return t[r++]=255&o,t[r++]=o>>8&255,t[r++]=o>>16&255,t[r++]=o>>24&255,t[r++]=255&s,t[r++]=s>>8&255,t[r++]=s>>16&255,t[r++]=s>>24&255,r}function de(t,e,n,r,i){return n=n.valueOf(),t[r++]=16,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=n>>16&255,t[r++]=n>>24&255,r}function be(t,e,n,r,i){return t[r++]=1,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,re.setFloat64(0,n.value,!0),t.set(ne,r),r+=8}function we(t,e,n,r,i,o,s){t[r++]=13,r+=s?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var u=N(n),f=t.write(u,r+4,void 0,"utf8")+1;return t[r]=255&f,t[r+1]=f>>8&255,t[r+2]=f>>16&255,t[r+3]=f>>24&255,r=r+4+f-1,t[r++]=0,r}function me(t,e,n,r,i,o,s,u,a){if(void 0===i&&(i=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===u&&(u=!0),void 0===a&&(a=!1),n.scope&&"object"===f(n.scope)){t[r++]=15,r+=a?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var h=r,l="string"==typeof n.code?n.code:n.code.toString();r+=4;var c=t.write(l,r+4,void 0,"utf8")+1;t[r]=255&c,t[r+1]=c>>8&255,t[r+2]=c>>16&255,t[r+3]=c>>24&255,t[r+4+c-1]=0,r=r+c+4;var p=_e(t,n.scope,i,r,o+1,s,u);r=p-1;var g=p-h;t[h++]=255&g,t[h++]=g>>8&255,t[h++]=g>>16&255,t[h++]=g>>24&255,t[r++]=0}else{t[r++]=13,r+=a?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0,l=n.code.toString();var y=t.write(l,r+4,void 0,"utf8")+1;t[r]=255&y,t[r+1]=y>>8&255,t[r+2]=y>>16&255,t[r+3]=y>>24&255,r=r+4+y-1,t[r++]=0}return r}function ve(t,e,n,r,i){t[r++]=5,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var o=n.value(!0),s=n.position;return n.sub_type===Z.SUBTYPE_BYTE_ARRAY&&(s+=4),t[r++]=255&s,t[r++]=s>>8&255,t[r++]=s>>16&255,t[r++]=s>>24&255,t[r++]=n.sub_type,n.sub_type===Z.SUBTYPE_BYTE_ARRAY&&(s-=4,t[r++]=255&s,t[r++]=s>>8&255,t[r++]=s>>16&255,t[r++]=s>>24&255),t.set(o,r),r+=n.position}function Se(t,e,n,r,i){t[r++]=14,r+=i?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var o=t.write(n.value,r+4,void 0,"utf8")+1;return t[r]=255&o,t[r+1]=o>>8&255,t[r+2]=o>>16&255,t[r+3]=o>>24&255,r=r+4+o-1,t[r++]=0,r}function Oe(t,e,n,r,i,o,s){t[r++]=3,r+=s?t.write(e,r,void 0,"ascii"):t.write(e,r,void 0,"utf8"),t[r++]=0;var u=r,f={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(f.$db=n.db);var a=_e(t,f=Object.assign(f,n.fields),!1,r,i+1,o),h=a-u;return t[u++]=255&h,t[u++]=h>>8&255,t[u++]=h>>16&255,t[u++]=h>>24&255,a}function _e(e,n,r,i,o,s,u,a){void 0===r&&(r=!1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===u&&(u=!0),void 0===a&&(a=[]),i=i||0,(a=a||[]).push(n);var h,l=i+4;if(Array.isArray(n))for(var c=0;c<n.length;c++){var p="".concat(c);if("function"==typeof(null==(b=n[c])?void 0:b.toBSON)&&(b=b.toBSON()),"string"==typeof b)l=ee(e,p,b,l,!0);else if("number"==typeof b)l=ie(e,p,b,l,!0);else{if("bigint"==typeof b)throw new _("Unsupported type BigInt, please use Decimal128");if("boolean"==typeof b)l=se(e,p,b,l,!0);else if(b instanceof Date||R(b))l=ue(e,p,b,l,!0);else if(void 0===b)l=oe(e,p,0,l,!0);else if(null===b)l=oe(e,p,0,l,!0);else if("ObjectId"===b._bsontype||"ObjectID"===b._bsontype)l=le(e,p,b,l,!0);else if(I(b))l=ce(e,p,b,l,!0);else if(b instanceof RegExp||T(b))l=fe(e,p,b,l,!0);else if("object"===f(b)&&null==b._bsontype)l=pe(e,p,b,l,r,o,s,u,!0,a);else if("object"===f(b)&&jt(b)&&"Decimal128"===b._bsontype)l=ge(e,p,b,l,!0);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)l=ye(e,p,b,l,!0);else if("Double"===b._bsontype)l=be(e,p,b,l,!0);else if("function"==typeof b&&s)l=we(e,p,b,l,0,0,!0);else if("Code"===b._bsontype)l=me(e,p,b,l,r,o,s,u,!0);else if("Binary"===b._bsontype)l=ve(e,p,b,l,!0);else if("Symbol"===b._bsontype)l=Se(e,p,b,l,!0);else if("DBRef"===b._bsontype)l=Oe(e,p,b,l,o,s,!0);else if("BSONRegExp"===b._bsontype)l=ae(e,p,b,l,!0);else if("Int32"===b._bsontype)l=de(e,p,b,l,!0);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)l=he(e,p,b,l,!0);else if(void 0!==b._bsontype)throw new _("Unrecognized or invalid _bsontype: ".concat(String(b._bsontype)))}}else if(n instanceof t.Map||(h=n,"[object Map]"===Object.prototype.toString.call(h)))for(var g=n.entries(),y=!1;!y;){var d=g.next();if(!(y=!!d.done)){p=d.value[0];var b=d.value[1],w=f(b);if("string"==typeof p&&!te.has(p)){if(null!=p.match(Qt))throw Error("key "+p+" must not contain null bytes");if(r){if("$"===p[0])throw Error("key "+p+" must not start with '$'");if(~p.indexOf("."))throw Error("key "+p+" must not contain '.'")}}if("string"===w)l=ee(e,p,b,l);else if("number"===w)l=ie(e,p,b,l);else{if("bigint"===w||j(b)||L(b))throw new _("Unsupported type BigInt, please use Decimal128");if("boolean"===w)l=se(e,p,b,l);else if(b instanceof Date||R(b))l=ue(e,p,b,l);else if(null===b||void 0===b&&!1===u)l=oe(e,p,0,l);else if("ObjectId"===b._bsontype||"ObjectID"===b._bsontype)l=le(e,p,b,l);else if(I(b))l=ce(e,p,b,l);else if(b instanceof RegExp||T(b))l=fe(e,p,b,l);else if("object"===w&&null==b._bsontype)l=pe(e,p,b,l,r,o,s,u,!1,a);else if("object"===w&&"Decimal128"===b._bsontype)l=ge(e,p,b,l);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)l=ye(e,p,b,l);else if("Double"===b._bsontype)l=be(e,p,b,l);else if("Code"===b._bsontype)l=me(e,p,b,l,r,o,s,u);else if("function"==typeof b&&s)l=we(e,p,b,l,0,0,s);else if("Binary"===b._bsontype)l=ve(e,p,b,l);else if("Symbol"===b._bsontype)l=Se(e,p,b,l);else if("DBRef"===b._bsontype)l=Oe(e,p,b,l,o,s);else if("BSONRegExp"===b._bsontype)l=ae(e,p,b,l);else if("Int32"===b._bsontype)l=de(e,p,b,l);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)l=he(e,p,b,l);else if(void 0!==b._bsontype)throw new _("Unrecognized or invalid _bsontype: ".concat(String(b._bsontype)))}}}else{if("function"==typeof(null==n?void 0:n.toBSON)&&null!=(n=n.toBSON())&&"object"!==f(n))throw new _("toBSON function did not return an object");for(var p in n){if("function"==typeof(null==(b=n[p])?void 0:b.toBSON)&&(b=b.toBSON()),w=f(b),"string"==typeof p&&!te.has(p)){if(null!=p.match(Qt))throw Error("key "+p+" must not contain null bytes");if(r){if("$"===p[0])throw Error("key "+p+" must not start with '$'");if(~p.indexOf("."))throw Error("key "+p+" must not contain '.'")}}if("string"===w)l=ee(e,p,b,l);else if("number"===w)l=ie(e,p,b,l);else{if("bigint"===w)throw new _("Unsupported type BigInt, please use Decimal128");if("boolean"===w)l=se(e,p,b,l);else if(b instanceof Date||R(b))l=ue(e,p,b,l);else if(void 0===b)!1===u&&(l=oe(e,p,0,l));else if(null===b)l=oe(e,p,0,l);else if("ObjectId"===b._bsontype||"ObjectID"===b._bsontype)l=le(e,p,b,l);else if(I(b))l=ce(e,p,b,l);else if(b instanceof RegExp||T(b))l=fe(e,p,b,l);else if("object"===w&&null==b._bsontype)l=pe(e,p,b,l,r,o,s,u,!1,a);else if("object"===w&&"Decimal128"===b._bsontype)l=ge(e,p,b,l);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)l=ye(e,p,b,l);else if("Double"===b._bsontype)l=be(e,p,b,l);else if("Code"===b._bsontype)l=me(e,p,b,l,r,o,s,u);else if("function"==typeof b&&s)l=we(e,p,b,l,0,0,s);else if("Binary"===b._bsontype)l=ve(e,p,b,l);else if("Symbol"===b._bsontype)l=Se(e,p,b,l);else if("DBRef"===b._bsontype)l=Oe(e,p,b,l,o,s);else if("BSONRegExp"===b._bsontype)l=ae(e,p,b,l);else if("Int32"===b._bsontype)l=de(e,p,b,l);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)l=he(e,p,b,l);else if(void 0!==b._bsontype)throw new _("Unrecognized or invalid _bsontype: ".concat(String(b._bsontype)))}}}a.pop(),e[l++]=0;var m=l-i;return e[i++]=255&m,e[i++]=m>>8&255,e[i++]=m>>16&255,e[i++]=m>>24&255,l}var Ee=17825792,Be=w.alloc(Ee);function Ne(t){Be.length<t&&(Be=w.alloc(t))}function xe(t,e){void 0===e&&(e={});var n="boolean"==typeof e.checkKeys&&e.checkKeys,r="boolean"==typeof e.serializeFunctions&&e.serializeFunctions,i="boolean"!=typeof e.ignoreUndefined||e.ignoreUndefined,o="number"==typeof e.minInternalBufferSize?e.minInternalBufferSize:Ee;Be.length<o&&(Be=w.alloc(o));var s=_e(Be,t,n,0,0,r,i,[]),u=w.alloc(s);return Be.copy(u,0,0,u.length),u}function Ae(t,e,n){void 0===n&&(n={});var r="boolean"==typeof n.checkKeys&&n.checkKeys,i="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,s="number"==typeof n.index?n.index:0,u=_e(Be,t,r,0,0,i,o);return Be.copy(e,s,0,u),s+u-1}function Ue(t,e){return void 0===e&&(e={}),Zt(t instanceof w?t:M(t),e)}function Ie(t,e){return void 0===e&&(e={}),kt(t,"boolean"==typeof(e=e||{}).serializeFunctions&&e.serializeFunctions,"boolean"!=typeof e.ignoreUndefined||e.ignoreUndefined)}function je(t,e,n,r,i,o){for(var s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},o),u=M(t),f=e,a=0;a<n;a++){var h=u[f]|u[f+1]<<8|u[f+2]<<16|u[f+3]<<24;s.index=f,r[i+a]=Zt(u,s),f+=h}return f}var Le={Binary:Z,Code:W,DBRef:G,Decimal128:wt,Double:mt,Int32:vt,Long:ot,UUID:K,Map:t.Map,MaxKey:St,MinKey:Ot,ObjectId:Nt,ObjectID:Nt,BSONRegExp:xt,BSONSymbol:At,Timestamp:It,EJSON:t.EJSON,setInternalBufferSize:Ne,serialize:xe,serializeWithBufferAndIndex:Ae,deserialize:Ue,calculateObjectSize:Ie,deserializeStream:je,BSONError:O,BSONTypeError:_};t.BSONError=O,t.BSONRegExp=xt,t.BSONSymbol=At,t.BSONTypeError=_,t.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,t.BSON_BINARY_SUBTYPE_COLUMN=7,t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BSON_BINARY_SUBTYPE_ENCRYPTED=6,t.BSON_BINARY_SUBTYPE_FUNCTION=1,t.BSON_BINARY_SUBTYPE_MD5=5,t.BSON_BINARY_SUBTYPE_USER_DEFINED=128,t.BSON_BINARY_SUBTYPE_UUID=3,t.BSON_BINARY_SUBTYPE_UUID_NEW=4,t.BSON_DATA_ARRAY=4,t.BSON_DATA_BINARY=5,t.BSON_DATA_BOOLEAN=8,t.BSON_DATA_CODE=13,t.BSON_DATA_CODE_W_SCOPE=15,t.BSON_DATA_DATE=9,t.BSON_DATA_DBPOINTER=12,t.BSON_DATA_DECIMAL128=19,t.BSON_DATA_INT=16,t.BSON_DATA_LONG=18,t.BSON_DATA_MAX_KEY=127,t.BSON_DATA_MIN_KEY=255,t.BSON_DATA_NULL=10,t.BSON_DATA_NUMBER=1,t.BSON_DATA_OBJECT=3,t.BSON_DATA_OID=7,t.BSON_DATA_REGEXP=11,t.BSON_DATA_STRING=2,t.BSON_DATA_SYMBOL=14,t.BSON_DATA_TIMESTAMP=17,t.BSON_DATA_UNDEFINED=6,t.BSON_INT32_MAX=k,t.BSON_INT32_MIN=z,t.BSON_INT64_MAX=F,t.BSON_INT64_MIN=V,t.Binary=Z,t.Code=W,t.DBRef=G,t.Decimal128=wt,t.Double=mt,t.Int32=vt,t.Long=ot,t.LongWithoutOverridesClass=Ut,t.MaxKey=St,t.MinKey=Ot,t.ObjectID=Nt,t.ObjectId=Nt,t.Timestamp=It,t.UUID=K,t.calculateObjectSize=Ie,t.default=Le,t.deserialize=Ue,t.deserializeStream=je,t.serialize=xe,t.serializeWithBufferAndIndex=Ae,t.setInternalBufferSize=Ne,Object.defineProperty(t,"__esModule",{value:!0})},"object"===f(e)&&void 0!==t?u(e):(o=[e],void 0===(s="function"==typeof(i=u)?i.apply(e,o):i)||(t.exports=s))}).call(this,n(50))}}]);