(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{518:function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"textAddFunctionality",(function(){return p}));i(16),i(18),i(25),i(9),i(26);var n=i(178),o=i(33),r=i(69),s=i(2),c=(i(3),i(51),i(12),i(398),i(88),i(158)),a=i(4),l=["text"];function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(e){var i,u,p=function(){return new e.Shadow({color:"rgba(0,0,0,1)",offsetX:0,offsetY:0,blur:0})},h=["fontFamily","charSpacing","lineHeight","textAlign","textFill","shadow","strokeWidth"].reduce((function(t,e){return f(f({},t),{},Object(s.a)({},e,!0))}),{}),d=void 0===t||!0;return e.CText=e.util.createClass(e.IText,{type:"c-text",__skipDimension:!1,onEditingCanceled:function(){this.set("text",this._textBeforeEdit)}}),e.CText.prototype.keysMap[27]="cancelEditing",e.CText.prototype.cancelEditing=function(){this.exitEditing(),this.fire("editing:canceled")},e.CText.prototype.initialize=(i=e.CText.prototype.initialize,function(t){var n=this,o=t.text,s=Object(r.a)(t,l);i.call(this,o,s),this.on("editing:canceled",this.onEditingCanceled),this.on("added",this.initDimensions),e.util.clearFabricFontCache(),d&&Object(a.setControls)(this,{tr:{cursor:"pointer",action:function(){n.stopFix=!0,n.canvas.trigger("ctext:settings",n),setTimeout((function(){n.stopFix=!1}),100)}}})}),e.CText.prototype.initDimensions=(u=e.CText.prototype.initDimensions,function(){this.__skipDimension=!1,u.call(this),this.__skipDimension=!0,this.setCoords()}),e.CText.prototype.onChangeFix=Object(c.debounce)((function(){!this.stopFix&&this.canvas?(this.canvas.trigger("programmatic"),this.initDimensions()):this.stopFix=!1}),0),e.CText.fromObject=function(t,i){e.Object._fromObject("CText",t,i)},e.CText=new Proxy(e.CText,{construct:function(t,i){var r=Object(n.a)(t,Object(o.a)(i)),s=new Proxy(r,{set:function(t,i,n){switch(i){case"shadow":t.shadow||(t.shadow=p()),t.dirty=Object.keys(n).every((function(e){return Reflect.set(t[i],e,n[e])}));break;case"fontFamily":case"strokeWidth":case"charSpacing":case"lineHeight":case"textAlign":case"fontSize":t.dirty=Reflect.set(t,i,n),t.initDimensions();break;case"strokeColor":t.dirty=Reflect.set(t,"stroke",n);break;case"textFill":t.dirty=Reflect.set(t,"fill",n);break;default:Reflect.set(t,i,n)}return d&&i in h&&t.onChangeFix(),d&&e.request(),!0},get:function(t,e){switch(e){case"shadow":t.shadow||(t.shadow=p());break;case"strokeColor":t[e]=t.stroke;break;case"textFill":t[e]=t.fill}return t[e]}});return s.originalTarget=r,s}}),e}}.call(this,i(38))}}]);