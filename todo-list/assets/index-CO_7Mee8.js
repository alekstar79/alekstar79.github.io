(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function zt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,o)}return e}function R(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?zt(Object(e),!0).forEach(function(o){we(n,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):zt(Object(e)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}return n}function _t(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(t){return typeof t}:_t=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(n)}function we(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function W(){return W=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},W.apply(this,arguments)}function De(n,t){if(n==null)return{};var e={},o=Object.keys(n),i,a;for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function Se(n,t){if(n==null)return{};var e=De(n,t),o,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)o=a[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(e[o]=n[o])}return e}var Te="1.15.2";function X(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var G=X(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xt=X(/Edge/i),Ut=X(/firefox/i),yt=X(/safari/i)&&!X(/chrome/i)&&!X(/android/i),ne=X(/iP(ad|od|hone)/i),ie=X(/chrome/i)&&X(/android/i),ae={capture:!1,passive:!1};function _(n,t,e){n.addEventListener(t,e,!G&&ae)}function v(n,t,e){n.removeEventListener(t,e,!G&&ae)}function St(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ie(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function F(n,t,e,o){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&St(n,t):St(n,t))||o&&n===e)return n;if(n===e)break}while(n=Ie(n))}return null}var Kt=/\s+/g;function P(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var o=(" "+n.className+" ").replace(Kt," ").replace(" "+t+" "," ");n.className=(o+(e?" "+t:"")).replace(Kt," ")}}function h(n,t,e){var o=n&&n.style;if(o){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=e+(typeof e=="string"?"":"px")}}function ot(n,t){var e="";if(typeof n=="string")e=n;else do{var o=h(n,"transform");o&&o!=="none"&&(e=o+" "+e)}while(!t&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(e)}function re(n,t,e){if(n){var o=n.getElementsByTagName(t),i=0,a=o.length;if(e)for(;i<a;i++)e(o[i],i);return o}return[]}function $(){var n=document.scrollingElement;return n||document.documentElement}function S(n,t,e,o,i){if(!(!n.getBoundingClientRect&&n!==window)){var a,r,l,s,d,u,f;if(n!==window&&n.parentNode&&n!==$()?(a=n.getBoundingClientRect(),r=a.top,l=a.left,s=a.bottom,d=a.right,u=a.height,f=a.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(t||e)&&n!==window&&(i=i||n.parentNode,!G))do if(i&&i.getBoundingClientRect&&(h(i,"transform")!=="none"||e&&h(i,"position")!=="static")){var m=i.getBoundingClientRect();r-=m.top+parseInt(h(i,"border-top-width")),l-=m.left+parseInt(h(i,"border-left-width")),s=r+a.height,d=l+a.width;break}while(i=i.parentNode);if(o&&n!==window){var T=ot(i||n),y=T&&T.a,b=T&&T.d;T&&(r/=b,l/=y,f/=y,u/=b,s=r+u,d=l+f)}return{top:r,left:l,bottom:s,right:d,width:f,height:u}}}function Zt(n,t,e){for(var o=Vt(n,!0),i=S(n)[t];o;){var a=S(o)[e],r=void 0;if(e==="top"||e==="left"?r=i>=a:r=i<=a,!r)return o;if(o===$())break;o=Vt(o,!1)}return!1}function nt(n,t,e,o){for(var i=0,a=0,r=n.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==p.ghost&&(o||r[a]!==p.dragged)&&F(r[a],e.draggable,n,!1)){if(i===t)return r[a];i++}a++}return null}function Yt(n,t){for(var e=n.lastElementChild;e&&(e===p.ghost||h(e,"display")==="none"||t&&!St(e,t));)e=e.previousElementSibling;return e||null}function N(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==p.clone&&(!t||St(n,t))&&e++;return e}function Jt(n){var t=0,e=0,o=$();if(n)do{var i=ot(n),a=i.a,r=i.d;t+=n.scrollLeft*a,e+=n.scrollTop*r}while(n!==o&&(n=n.parentNode));return[t,e]}function Ce(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===n[e][o])return Number(e)}return-1}function Vt(n,t){if(!n||!n.getBoundingClientRect)return $();var e=n,o=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var i=h(e);if(e.clientWidth<e.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return $();if(o||t)return e;o=!0}}while(e=e.parentNode);return $()}function xe(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function At(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var Nt;function Oe(n,t){return function(){if(!Nt){var e=arguments,o=this;e.length===1?n.call(o,e[0]):n.apply(o,e),Nt=setTimeout(function(){Nt=void 0},t)}}}function ke(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function le(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function se(n,t,e){var o={};return Array.from(n.children).forEach(function(i){var a,r,l,s;if(!(!F(i,t.draggable,n,!1)||i.animated||i===e)){var d=S(i);o.left=Math.min((a=o.left)!==null&&a!==void 0?a:1/0,d.left),o.top=Math.min((r=o.top)!==null&&r!==void 0?r:1/0,d.top),o.right=Math.max((l=o.right)!==null&&l!==void 0?l:-1/0,d.right),o.bottom=Math.max((s=o.bottom)!==null&&s!==void 0?s:-1/0,d.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var L="Sortable"+new Date().getTime();function Pe(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(h(i,"display")==="none"||i===p.ghost)){n.push({target:i,rect:S(i)});var a=R({},n[n.length-1].rect);if(i.thisAnimationDuration){var r=ot(i,!0);r&&(a.top-=r.f,a.left-=r.e)}i.fromRect=a}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(Ce(n,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var a=!1,r=0;n.forEach(function(l){var s=0,d=l.target,u=d.fromRect,f=S(d),m=d.prevFromRect,T=d.prevToRect,y=l.rect,b=ot(d,!0);b&&(f.top-=b.f,f.left-=b.e),d.toRect=f,d.thisAnimationDuration&&At(m,f)&&!At(u,f)&&(y.top-f.top)/(y.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(s=Ne(y,m,T,i.options)),At(f,u)||(d.prevFromRect=u,d.prevToRect=f,s||(s=i.options.animation),i.animate(d,y,f,s)),s&&(a=!0,r=Math.max(r,s),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},s),d.thisAnimationDuration=s)}),clearTimeout(t),a?t=setTimeout(function(){typeof o=="function"&&o()},r):typeof o=="function"&&o(),n=[]},animate:function(o,i,a,r){if(r){h(o,"transition",""),h(o,"transform","");var l=ot(this.el),s=l&&l.a,d=l&&l.d,u=(i.left-a.left)/(s||1),f=(i.top-a.top)/(d||1);o.animatingX=!!u,o.animatingY=!!f,h(o,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=Ae(o),h(o,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),h(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){h(o,"transition",""),h(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},r)}}}}function Ae(n){return n.offsetWidth}function Ne(n,t,e,o){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*o.animation}var V=[],Lt={initializeByDefault:!0},ht={mount:function(t){for(var e in Lt)Lt.hasOwnProperty(e)&&!(e in t)&&(t[e]=Lt[e]);V.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),V.push(t)},pluginEvent:function(t,e,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var a=t+"Global";V.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][a]&&e[r.pluginName][a](R({sortable:e},o)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](R({sortable:e},o)))})},initializePlugins:function(t,e,o,i){V.forEach(function(l){var s=l.pluginName;if(!(!t.options[s]&&!l.initializeByDefault)){var d=new l(t,e,t.options);d.sortable=t,d.options=t.options,t[s]=d,W(o,d.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var r=this.modifyOption(t,a,t.options[a]);typeof r<"u"&&(t.options[a]=r)}},getEventProperties:function(t,e){var o={};return V.forEach(function(i){typeof i.eventProperties=="function"&&W(o,i.eventProperties.call(e[i.pluginName],t))}),o},modifyOption:function(t,e,o){var i;return V.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(i=a.optionListeners[e].call(t[a.pluginName],o))}),i}};function Le(n){var t=n.sortable,e=n.rootEl,o=n.name,i=n.targetEl,a=n.cloneEl,r=n.toEl,l=n.fromEl,s=n.oldIndex,d=n.newIndex,u=n.oldDraggableIndex,f=n.newDraggableIndex,m=n.originalEvent,T=n.putSortable,y=n.extraEventProperties;if(t=t||e&&e[L],!!t){var b,B=t.options,j="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!G&&!xt?b=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(o,!0,!0)),b.to=r||e,b.from=l||e,b.item=i||e,b.clone=a,b.oldIndex=s,b.newIndex=d,b.oldDraggableIndex=u,b.newDraggableIndex=f,b.originalEvent=m,b.pullMode=T?T.lastPutMode:void 0;var k=R(R({},y),ht.getEventProperties(o,t));for(var z in k)b[z]=k[z];e&&e.dispatchEvent(b),B[j]&&B[j].call(t,b)}}var Me=["evt"],O=function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,a=Se(o,Me);ht.pluginEvent.bind(p)(t,e,R({dragEl:c,parentEl:D,ghostEl:g,rootEl:E,nextEl:Z,lastDownEl:Et,cloneEl:w,cloneHidden:H,dragStarted:st,putSortable:I,activeSortable:p.active,originalEvent:i,oldIndex:et,oldDraggableIndex:ct,newIndex:A,newDraggableIndex:Y,hideGhostForTarget:fe,unhideGhostForTarget:he,cloneNowHidden:function(){H=!0},cloneNowShown:function(){H=!1},dispatchSortableEvent:function(l){x({sortable:e,name:l,originalEvent:i})}},a))};function x(n){Le(R({putSortable:I,cloneEl:w,targetEl:c,rootEl:E,oldIndex:et,oldDraggableIndex:ct,newIndex:A,newDraggableIndex:Y},n))}var c,D,g,E,Z,Et,w,H,et,A,ct,Y,pt,I,tt=!1,Tt=!1,It=[],U,M,Mt,Ft,Qt,te,st,Q,ut,ft=!1,mt=!1,wt,C,Rt=[],qt=!1,Ct=[],Ot=typeof document<"u",vt=ne,ee=xt||G?"cssFloat":"float",Fe=Ot&&!ie&&!ne&&"draggable"in document.createElement("div"),de=function(){if(Ot){if(G)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),ce=function(t,e){var o=h(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=nt(t,0,e),r=nt(t,1,e),l=a&&h(a),s=r&&h(r),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+S(a).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+S(r).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&l.float&&l.float!=="none"){var f=l.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return a&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=i&&o[ee]==="none"||r&&o[ee]==="none"&&d+u>i)?"vertical":"horizontal"},Re=function(t,e,o){var i=o?t.left:t.top,a=o?t.right:t.bottom,r=o?t.width:t.height,l=o?e.left:e.top,s=o?e.right:e.bottom,d=o?e.width:e.height;return i===l||a===s||i+r/2===l+d/2},Be=function(t,e){var o;return It.some(function(i){var a=i[L].options.emptyInsertThreshold;if(!(!a||Yt(i))){var r=S(i),l=t>=r.left-a&&t<=r.right+a,s=e>=r.top-a&&e<=r.bottom+a;if(l&&s)return o=i}}),o},ue=function(t){function e(a,r){return function(l,s,d,u){var f=l.options.group.name&&s.options.group.name&&l.options.group.name===s.options.group.name;if(a==null&&(r||f))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return e(a(l,s,d,u),r)(l,s,d,u);var m=(r?l:s).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var o={},i=t.group;(!i||_t(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=e(i.pull,!0),o.checkPut=e(i.put),o.revertClone=i.revertClone,t.group=o},fe=function(){!de&&g&&h(g,"display","none")},he=function(){!de&&g&&h(g,"display","")};Ot&&!ie&&document.addEventListener("click",function(n){if(Tt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Tt=!1,!1},!0);var K=function(t){if(c){t=t.touches?t.touches[0]:t;var e=Be(t.clientX,t.clientY);if(e){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[L]._onDragOver(o)}}},qe=function(t){c&&c.parentNode[L]._isOutsideThisEl(t.target)};function p(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=W({},t),n[L]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ce(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,l){r.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&!yt,emptyInsertThreshold:5};ht.initializePlugins(this,n,e);for(var o in e)!(o in t)&&(t[o]=e[o]);ue(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Fe,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_(n,"pointerdown",this._onTapStart):(_(n,"mousedown",this._onTapStart),_(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(n,"dragover",this),_(n,"dragenter",this)),It.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),W(this,Pe())}p.prototype={constructor:p,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Q=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,c):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,i=this.options,a=i.preventOnFilter,r=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(l||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=i.filter;if(ze(o),!c&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&yt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=F(s,i.draggable,o,!1),!(s&&s.animated)&&Et!==s)){if(et=N(s),ct=N(s,i.draggable),typeof u=="function"){if(u.call(this,t,s,this)){x({sortable:e,rootEl:d,name:"filter",targetEl:s,toEl:o,fromEl:o}),O("filter",e,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=F(d,f.trim(),o,!1),f)return x({sortable:e,rootEl:f,name:"filter",targetEl:s,fromEl:o,toEl:o}),O("filter",e,{evt:t}),!0}),u)){a&&t.cancelable&&t.preventDefault();return}i.handle&&!F(d,i.handle,o,!1)||this._prepareDragStart(t,l,s)}}},_prepareDragStart:function(t,e,o){var i=this,a=i.el,r=i.options,l=a.ownerDocument,s;if(o&&!c&&o.parentNode===a){var d=S(o);if(E=a,c=o,D=c.parentNode,Z=c.nextSibling,Et=o,pt=r.group,p.dragged=c,U={target:c,clientX:(e||t).clientX,clientY:(e||t).clientY},Qt=U.clientX-d.left,te=U.clientY-d.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,c.style["will-change"]="all",s=function(){if(O("delayEnded",i,{evt:t}),p.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Ut&&i.nativeDraggable&&(c.draggable=!0),i._triggerDragStart(t,e),x({sortable:i,name:"choose",originalEvent:t}),P(c,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){re(c,u.trim(),Bt)}),_(l,"dragover",K),_(l,"mousemove",K),_(l,"touchmove",K),_(l,"mouseup",i._onDrop),_(l,"touchend",i._onDrop),_(l,"touchcancel",i._onDrop),Ut&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),O("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(xt||G))){if(p.eventCanceled){this._onDrop();return}_(l,"mouseup",i._disableDelayedDrag),_(l,"touchend",i._disableDelayedDrag),_(l,"touchcancel",i._disableDelayedDrag),_(l,"mousemove",i._delayedDragTouchMoveHandler),_(l,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&_(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&Bt(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._disableDelayedDrag),v(t,"touchend",this._disableDelayedDrag),v(t,"touchcancel",this._disableDelayedDrag),v(t,"mousemove",this._delayedDragTouchMoveHandler),v(t,"touchmove",this._delayedDragTouchMoveHandler),v(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):e?_(document,"touchmove",this._onTouchMove):_(document,"mousemove",this._onTouchMove):(_(c,"dragend",this),_(E,"dragstart",this._onDragStart));try{document.selection?Dt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(tt=!1,E&&c){O("dragStarted",this,{evt:e}),this.nativeDraggable&&_(document,"dragover",qe);var o=this.options;!t&&P(c,o.dragClass,!1),P(c,o.ghostClass,!0),p.active=this,t&&this._appendGhost(),x({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(M){this._lastX=M.clientX,this._lastY=M.clientY,fe();for(var t=document.elementFromPoint(M.clientX,M.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(M.clientX,M.clientY),t!==e);)e=t;if(c.parentNode[L]._isOutsideThisEl(t),e)do{if(e[L]){var o=void 0;if(o=e[L]._onDragOver({clientX:M.clientX,clientY:M.clientY,target:t,rootEl:e}),o&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);he()}},_onTouchMove:function(t){if(U){var e=this.options,o=e.fallbackTolerance,i=e.fallbackOffset,a=t.touches?t.touches[0]:t,r=g&&ot(g,!0),l=g&&r&&r.a,s=g&&r&&r.d,d=vt&&C&&Jt(C),u=(a.clientX-U.clientX+i.x)/(l||1)+(d?d[0]-Rt[0]:0)/(l||1),f=(a.clientY-U.clientY+i.y)/(s||1)+(d?d[1]-Rt[1]:0)/(s||1);if(!p.active&&!tt){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(g){r?(r.e+=u-(Mt||0),r.f+=f-(Ft||0)):r={a:1,b:0,c:0,d:1,e:u,f};var m="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");h(g,"webkitTransform",m),h(g,"mozTransform",m),h(g,"msTransform",m),h(g,"transform",m),Mt=u,Ft=f,M=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!g){var t=this.options.fallbackOnBody?document.body:E,e=S(c,!0,vt,!0,t),o=this.options;if(vt){for(C=t;h(C,"position")==="static"&&h(C,"transform")==="none"&&C!==document;)C=C.parentNode;C!==document.body&&C!==document.documentElement?(C===document&&(C=$()),e.top+=C.scrollTop,e.left+=C.scrollLeft):C=$(),Rt=Jt(C)}g=c.cloneNode(!0),P(g,o.ghostClass,!1),P(g,o.fallbackClass,!0),P(g,o.dragClass,!0),h(g,"transition",""),h(g,"transform",""),h(g,"box-sizing","border-box"),h(g,"margin",0),h(g,"top",e.top),h(g,"left",e.left),h(g,"width",e.width),h(g,"height",e.height),h(g,"opacity","0.8"),h(g,"position",vt?"absolute":"fixed"),h(g,"zIndex","100000"),h(g,"pointerEvents","none"),p.ghost=g,t.appendChild(g),h(g,"transform-origin",Qt/parseInt(g.style.width)*100+"% "+te/parseInt(g.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,i=t.dataTransfer,a=o.options;if(O("dragStart",this,{evt:t}),p.eventCanceled){this._onDrop();return}O("setupClone",this),p.eventCanceled||(w=le(c),w.removeAttribute("id"),w.draggable=!1,w.style["will-change"]="",this._hideClone(),P(w,this.options.chosenClass,!1),p.clone=w),o.cloneId=Dt(function(){O("clone",o),!p.eventCanceled&&(o.options.removeCloneOnHide||E.insertBefore(w,c),o._hideClone(),x({sortable:o,name:"clone"}))}),!e&&P(c,a.dragClass,!0),e?(Tt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(v(document,"mouseup",o._onDrop),v(document,"touchend",o._onDrop),v(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(o,i,c)),_(document,"drop",o),h(c,"transform","translateZ(0)")),tt=!0,o._dragStartId=Dt(o._dragStarted.bind(o,e,t)),_(document,"selectstart",o),st=!0,yt&&h(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,o=t.target,i,a,r,l=this.options,s=l.group,d=p.active,u=pt===s,f=l.sort,m=I||d,T,y=this,b=!1;if(qt)return;function B(lt,ye){O(lt,y,R({evt:t,isOwner:u,axis:T?"vertical":"horizontal",revert:r,dragRect:i,targetRect:a,canSort:f,fromSortable:m,target:o,completed:k,onMove:function(jt,Ee){return bt(E,e,c,i,jt,S(jt),t,Ee)},changed:z},ye))}function j(){B("dragOverAnimationCapture"),y.captureAnimationState(),y!==m&&m.captureAnimationState()}function k(lt){return B("dragOverCompleted",{insertion:lt}),lt&&(u?d._hideClone():d._showClone(y),y!==m&&(P(c,I?I.options.ghostClass:d.options.ghostClass,!1),P(c,l.ghostClass,!0)),I!==y&&y!==p.active?I=y:y===p.active&&I&&(I=null),m===y&&(y._ignoreWhileAnimating=o),y.animateAll(function(){B("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(o===c&&!c.animated||o===e&&!o.animated)&&(Q=null),!l.dragoverBubble&&!t.rootEl&&o!==document&&(c.parentNode[L]._isOutsideThisEl(t.target),!lt&&K(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function z(){A=N(c),Y=N(c,l.draggable),x({sortable:y,name:"change",toEl:e,newIndex:A,newDraggableIndex:Y,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=F(o,l.draggable,e,!0),B("dragOver"),p.eventCanceled)return b;if(c.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||y._ignoreWhileAnimating===o)return k(!1);if(Tt=!1,d&&!l.disabled&&(u?f||(r=D!==E):I===this||(this.lastPutMode=pt.checkPull(this,d,c,t))&&s.checkPut(this,d,c,t))){if(T=this._getDirection(t,o)==="vertical",i=S(c),B("dragOverValid"),p.eventCanceled)return b;if(r)return D=E,j(),this._hideClone(),B("revert"),p.eventCanceled||(Z?E.insertBefore(c,Z):E.appendChild(c)),k(!0);var q=Yt(e,l.draggable);if(!q||$e(t,T,this)&&!q.animated){if(q===c)return k(!1);if(q&&e===t.target&&(o=q),o&&(a=S(o)),bt(E,e,c,i,o,a,t,!!o)!==!1)return j(),q&&q.nextSibling?e.insertBefore(c,q.nextSibling):e.appendChild(c),D=e,z(),k(!0)}else if(q&&He(t,T,this)){var kt=nt(e,0,l,!0);if(kt===c)return k(!1);if(o=kt,a=S(o),bt(E,e,c,i,o,a,t,!1)!==!1)return j(),e.insertBefore(c,kt),D=e,z(),k(!0)}else if(o.parentNode===e){a=S(o);var J=0,Pt,be=c.parentNode!==e,Ht=!Re(c.animated&&c.toRect||i,o.animated&&o.toRect||a,T),$t=T?"top":"left",it=Zt(o,"top","top")||Zt(c,"top","top"),_e=it?it.scrollTop:void 0;Q!==o&&(Pt=a[$t],ft=!1,mt=!Ht&&l.invertSwap||be),J=We(t,o,a,T,Ht?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,mt,Q===o);var at;if(J!==0){var Wt=N(c);do Wt-=J,at=D.children[Wt];while(at&&(h(at,"display")==="none"||at===g))}if(J===0||at===o)return k(!1);Q=o,ut=J;var Gt=o.nextElementSibling,rt=!1;rt=J===1;var gt=bt(E,e,c,i,o,a,t,rt);if(gt!==!1)return(gt===1||gt===-1)&&(rt=gt===1),qt=!0,setTimeout(Ye,30),j(),rt&&!Gt?e.appendChild(c):o.parentNode.insertBefore(c,rt?Gt:o),it&&ke(it,0,_e-it.scrollTop),D=c.parentNode,Pt!==void 0&&!mt&&(wt=Math.abs(Pt-S(o)[$t])),z(),k(!0)}if(e.contains(c))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",K),v(document,"mousemove",K),v(document,"touchmove",K)},_offUpEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._onDrop),v(t,"touchend",this._onDrop),v(t,"pointerup",this._onDrop),v(t,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;if(A=N(c),Y=N(c,o.draggable),O("drop",this,{evt:t}),D=c&&c.parentNode,A=N(c),Y=N(c,o.draggable),p.eventCanceled){this._nulling();return}tt=!1,mt=!1,ft=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Xt(this.cloneId),Xt(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yt&&h(document.body,"user-select",""),h(c,"transform",""),t&&(st&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(E===D||I&&I.lastPutMode!=="clone")&&w&&w.parentNode&&w.parentNode.removeChild(w),c&&(this.nativeDraggable&&v(c,"dragend",this),Bt(c),c.style["will-change"]="",st&&!tt&&P(c,I?I.options.ghostClass:this.options.ghostClass,!1),P(c,this.options.chosenClass,!1),x({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:t}),E!==D?(A>=0&&(x({rootEl:D,name:"add",toEl:D,fromEl:E,originalEvent:t}),x({sortable:this,name:"remove",toEl:D,originalEvent:t}),x({rootEl:D,name:"sort",toEl:D,fromEl:E,originalEvent:t}),x({sortable:this,name:"sort",toEl:D,originalEvent:t})),I&&I.save()):A!==et&&A>=0&&(x({sortable:this,name:"update",toEl:D,originalEvent:t}),x({sortable:this,name:"sort",toEl:D,originalEvent:t})),p.active&&((A==null||A===-1)&&(A=et,Y=ct),x({sortable:this,name:"end",toEl:D,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){O("nulling",this),E=c=D=g=Z=w=Et=H=U=M=st=A=Y=et=ct=Q=ut=I=pt=p.dragged=p.ghost=p.clone=p.active=null,Ct.forEach(function(t){t.checked=!0}),Ct.length=Mt=Ft=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":c&&(this._onDragOver(t),Xe(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,o=this.el.children,i=0,a=o.length,r=this.options;i<a;i++)e=o[i],F(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||je(e));return t},sort:function(t,e){var o={},i=this.el;this.toArray().forEach(function(a,r){var l=i.children[r];F(l,this.options.draggable,i,!1)&&(o[a]=l)},this),e&&this.captureAnimationState(),t.forEach(function(a){o[a]&&(i.removeChild(o[a]),i.appendChild(o[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return F(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(e===void 0)return o[t];var i=ht.modifyOption(this,t,e);typeof i<"u"?o[t]=i:o[t]=e,t==="group"&&ue(o)},destroy:function(){O("destroy",this);var t=this.el;t[L]=null,v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart),v(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),It.splice(It.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!H){if(O("hideClone",this),p.eventCanceled)return;h(w,"display","none"),this.options.removeCloneOnHide&&w.parentNode&&w.parentNode.removeChild(w),H=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(H){if(O("showClone",this),p.eventCanceled)return;c.parentNode==E&&!this.options.group.revertClone?E.insertBefore(w,c):Z?E.insertBefore(w,Z):E.appendChild(w),this.options.group.revertClone&&this.animate(c,w),h(w,"display",""),H=!1}}};function Xe(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function bt(n,t,e,o,i,a,r,l){var s,d=n[L],u=d.options.onMove,f;return window.CustomEvent&&!G&&!xt?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=t,s.from=n,s.dragged=e,s.draggedRect=o,s.related=i||t,s.relatedRect=a||S(t),s.willInsertAfter=l,s.originalEvent=r,n.dispatchEvent(s),u&&(f=u.call(d,s,r)),f}function Bt(n){n.draggable=!1}function Ye(){qt=!1}function He(n,t,e){var o=S(nt(e.el,0,e.options,!0)),i=se(e.el,e.options,g),a=10;return t?n.clientX<i.left-a||n.clientY<o.top&&n.clientX<o.right:n.clientY<i.top-a||n.clientY<o.bottom&&n.clientX<o.left}function $e(n,t,e){var o=S(Yt(e.el,e.options.draggable)),i=se(e.el,e.options,g),a=10;return t?n.clientX>i.right+a||n.clientY>o.bottom&&n.clientX>o.left:n.clientY>i.bottom+a||n.clientX>o.right&&n.clientY>o.top}function We(n,t,e,o,i,a,r,l){var s=o?n.clientY:n.clientX,d=o?e.height:e.width,u=o?e.top:e.left,f=o?e.bottom:e.right,m=!1;if(!r){if(l&&wt<d*i){if(!ft&&(ut===1?s>u+d*a/2:s<f-d*a/2)&&(ft=!0),ft)m=!0;else if(ut===1?s<u+wt:s>f-wt)return-ut}else if(s>u+d*(1-i)/2&&s<f-d*(1-i)/2)return Ge(t)}return m=m||r,m&&(s<u+d*a/2||s>f-d*a/2)?s>u+d/2?1:-1:0}function Ge(n){return N(c)<N(n)?1:-1}function je(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,o=0;e--;)o+=t.charCodeAt(e);return o.toString(36)}function ze(n){Ct.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var o=t[e];o.checked&&Ct.push(o)}}function Dt(n){return setTimeout(n,0)}function Xt(n){return clearTimeout(n)}Ot&&_(document,"touchmove",function(n){(p.active||tt)&&n.cancelable&&n.preventDefault()});p.utils={on:_,off:v,css:h,find:re,is:function(t,e){return!!F(t,e,t,!1)},extend:xe,throttle:Oe,closest:F,toggleClass:P,clone:le,index:N,nextTick:Dt,cancelNextTick:Xt,detectDirection:ce,getChild:nt};p.get=function(n){return n[L]};p.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(p.utils=R(R({},p.utils),o.utils)),ht.mount(o)})};p.create=function(n,t){return new p(n,t)};p.version=Te;var ge=function(t){var e=t.originalEvent,o=t.putSortable,i=t.dragEl,a=t.activeSortable,r=t.dispatchSortableEvent,l=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var d=o||a;l();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,f=document.elementFromPoint(u.clientX,u.clientY);s(),d&&!d.el.contains(f)&&(r("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function pe(){}pe.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=nt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:ge};W(pe,{pluginName:"revertOnSpill"});function me(){}me.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable,i=o||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:ge};W(me,{pluginName:"removeOnSpill"});const ve=()=>String(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,""),Ue=(n,t)=>{const e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return n.replace(e,`<a class="${t}" href="$1">$1</a>`)},oe=n=>{const t=window.getComputedStyle(n);n.style.height="auto",n.style.height=n.scrollHeight+parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth)+"px"},dt=()=>{const t=(JSON.parse(localStorage.getItem("todo"))||[]).filter(a=>a.checked!==!0).length,e=document.createElement("canvas");e.height=64,e.width=64;const o=e.getContext("2d"),i=new Image;i.onload=()=>{if(o.drawImage(i,0,0),t>0){const l=new Path2D;let s=22,d=1;t<10&&(s=18,d=10),l.arc(20,45,s,0,2*Math.PI),o.fillStyle="#2b81fa",o.fill(l),o.fillStyle="#FFFFFF",o.font="bold 34px sans-serif",o.fillText(`${t}`,d,57)}const a=document.querySelector('link[rel="icon"]'),r=document.createElement("link");r.href=e.toDataURL(),r.rel="icon",document.querySelector("head").replaceChild(r,a)},i.src="/favicon.png"},Ke=n=>new Promise(t=>setTimeout(t,n)),Ze=async()=>{document.body.classList.add("loading");const n=[];try{await Ke(1e3);let e=await(await fetch("https://jsonplaceholder.typicode.com/todos/")).json();e&&(e=e.slice(40,47),e.forEach(o=>{n.push({id:ve(),text:o.title,date:new Date,checked:!1})}))}catch(t){alert(`К сожалению, произошла ошибка:

`+t)}return document.body.classList.remove("loading"),n};class Je{constructor(){const t=this;t.data=JSON.parse(localStorage.getItem("todo"))||[],t.todoEl=document.querySelector(".todo"),t.todoList=document.querySelector(".todo__list"),t.actionsPanel=document.querySelector(".todo__actions"),t.toggleAll=document.querySelector(".todo__toggle-all .checkbox__input"),t.deleteDone=document.querySelector(".todo__delete-done"),t.addForm=document.querySelector(".todo__form"),t.input=t.addForm.elements.text,t.submit=t.addForm.elements.submit,t.todoEdit=document.querySelector(".todo-edit"),t.todoEditForm=document.querySelector(".todo-edit__form"),t.todoEditInput=document.querySelector(".todo-edit__input"),t.testData=document.querySelector(".test-data"),t.testDataBtn=document.querySelector(".test-data__btn"),t.toggleTestDataBtn(),t.render(),p.create(t.todoList,{handle:".todo__move",animation:250,ghostClass:"todo__move--ghost",onEnd:e=>{const o=t.data,i=o[e.oldIndex],a=o[e.newIndex];t.data[e.newIndex]=i,t.data[e.oldIndex]=a,t.sortByCheckedUnchecked(),t.saveDataToStorage(),t.render()}}),document.addEventListener("click",async e=>{const o=e.target;if(o===t.testDataBtn&&await t.addTodoItem(!0),o.matches(".todo__delete-done")){const i=document.querySelectorAll(".todo__item--done");for(const a of i){const r=a.dataset.id;t.removeTodoItem(r)}t.toggleCheckboxAll(),t.toggleDeleteDone()}if(o.matches(".todo__expand")&&t.toggleExpandTodoItem(o),o.matches(".todo__menu-toggle")&&t.toggleTodoItemMenu(o),o.matches(".todo__edit")&&(t.openTodoItemEditModal(o),document.querySelector(".menu-active").classList.remove("menu-active")),o.matches(".todo__delete")){const i=o.dataset.id;t.removeTodoItem(i)}t.closeTodoItemMenu(o),(o.closest(".todo-edit__close")||o.matches(".todo-edit__save"))&&t.closeTodoItemEditModal()}),document.addEventListener("mousedown",e=>{e.target.matches(".todo-edit")&&t.closeTodoItemEditModal()}),document.addEventListener("change",e=>{const o=e.target;o.matches(".checkbox__input")&&(o.closest(".todo__toggle-all")?(t.onChangeCheckboxAll(o),dt()):t.onChangeCheckbox(o))}),document.addEventListener("keydown",async e=>{const o=e.target;if(t.todoEdit.matches(".active")&&e.code==="Escape"&&t.closeTodoItemEditModal(),e.target===t.input&&(e.code==="Enter"&&!e.ctrlKey?await t.onSubmitNewTodo(e):e.code==="Enter"&&e.ctrlKey&&(t.input.value+=`
`,oe(o))),e.target===t.todoEditInput&&(e.ctrlKey&&e.code==="Enter"&&t.onSaveTodoItem(e),e.ctrlKey&&e.code==="KeyB")){e.preventDefault();const i=window.getSelection().toString(),a=`<b>${i}</b>`;t.todoEditInput.value=t.todoEditInput.value.replace(i,a)}}),document.addEventListener("input",e=>{const o=e.target;o===t.input&&oe(o)}),document.addEventListener("focusin",e=>{e.target===t.input&&t.todoEl.classList.add("todo--focus-within")}),document.addEventListener("focusout",e=>{e.target===t.input&&t.todoEl.classList.remove("todo--focus-within")}),document.addEventListener("submit",async e=>{const o=e.target;o===t.addForm&&await t.onSubmitNewTodo(e),o===t.todoEditForm&&t.onSaveTodoItem(e)})}onRendered(){const t=this;t.toggleActionsPanel(),t.toggleCheckboxAll(),t.toggleDeleteDone()}toggleActionsPanel(){const t=this;t.data.length>0?t.actionsPanel.classList.add("todo__actions--visible"):t.actionsPanel.classList.remove("todo__actions--visible")}toggleExpandTodoItem(t){const e=document.querySelectorAll(".todo__item");t.classList.toggle("todo__expand--active");for(const o of e)o.classList.toggle("todo__item--expanded")}toggleTodoItemMenu(t){t.closest(".todo__item").classList.toggle("menu-active")}closeTodoItemMenu(t){const e=document.querySelectorAll(".menu-active");for(const o of e)!t.closest(".todo__menu-toggle")&&!t.closest(".menu")&&o.classList.remove("menu-active"),o.dataset.id!==t.dataset.id&&!t.closest(".menu")&&o.classList.remove("menu-active")}openTodoItemEditModal(t){const e=this,o=t.dataset.id,i=e.data.find(a=>a.id===o);e.todoEdit.classList.add("active"),e.todoEdit.dataset.id=o,e.todoEditInput.value=i.text,setTimeout(()=>{e.todoEditInput.focus()},100)}closeTodoItemEditModal(){this.todoEdit.classList.remove("active")}async onSubmitNewTodo(t){const e=this;t.preventDefault(),e.input.value!==""&&(await e.addTodoItem(),e.input.style.height="auto")}saveDataToStorage(){const t=this;localStorage.setItem("todo",JSON.stringify(t.data))}async addTodoItem(t=!1){const e=this;t?e.data=await Ze():e.data.push({id:ve(),text:e.input.value,date:new Date,checked:!1}),e.sortByCheckedUnchecked(),e.saveDataToStorage(),e.render(),e.addForm.reset(),e.toggleTestDataBtn(),dt()}removeTodoItem(t){const e=this,o=document.querySelector(`.todo__item[data-id="${t}"]`);o.parentNode.removeChild(o),e.data=e.data.filter(i=>i.id!==t),e.saveDataToStorage(),e.toggleTestDataBtn(),e.toggleActionsPanel(),dt()}toggleTestDataBtn(){const t=this;t.testData.classList[t.data.length<1?"add":"remove"]("show")}toggleCheckboxAll(){const t=this,e=document.querySelectorAll(".checkbox:not(.todo__toggle-all) .checkbox__input:checked");t.data.length>0&&e.length===t.data.length&&(t.toggleAll.checked=!t.toggleAll.checked),t.data.length===0&&(t.toggleAll.checked=!1)}onChangeCheckboxAll(t){const e=this,o=document.querySelectorAll(".checkbox:not(.todo__toggle-all) .checkbox__input");t.matches(":checked")?o.forEach(i=>{const a=i.dataset.id;i.matches(":checked")||(i.checked=!i.checked,e.data.map(r=>{r.id===a&&(r.checked=!0)}),document.querySelector(`.todo__item[data-id="${a}"]`).classList.add("todo__item--done"))}):o.forEach(i=>{const a=i.dataset.id;i.checked=!i.checked,e.data.map(r=>{r.id===a&&(r.checked=!1)}),document.querySelector(`.todo__item[data-id="${a}"]`).classList.remove("todo__item--done")}),e.saveDataToStorage(),e.toggleDeleteDone()}onChangeCheckbox(t){const e=this,o=t.dataset.id,i=!e.data.find(a=>a.id===o).checked;e.data.map(a=>{a.id===o&&(a.checked=i)}),e.sortByCheckedUnchecked(),i===!1&&(e.toggleAll.checked=!1),setTimeout(()=>{e.render()},350),e.saveDataToStorage(),document.querySelector(`.todo__item[data-id="${o}"]`).classList.toggle("todo__item--done"),e.toggleDeleteDone(),dt()}toggleDeleteDone(){const t=this;document.querySelectorAll(".todo__item--done").length>0?t.deleteDone.style.display="block":t.deleteDone.style.display="none",t.toggleActionsPanel()}sortByCheckedUnchecked(){const t=this,e=t.data,o=e.filter(a=>a.checked===!0),i=e.filter(a=>a.checked!==!0);t.data=[...i,...o]}onSaveTodoItem(t){t.preventDefault();const e=this,o=e.todoEdit.dataset.id;e.data.map(i=>{i.id===o&&(i.text=e.todoEditInput.value)}),e.saveDataToStorage(),e.closeTodoItemEditModal(t),e.render()}render(){const t=this;let e="";for(const o of t.data){const i=o.id;let a=o.text;const r=new Date(o.date).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),l=new Date(o.date).toLocaleString("ru-RU",{hour:"numeric",minute:"numeric"});a=a.replace(/\n/g,"<br>"),a=Ue(a,"todo__link"),e+=`
        <li class="todo__item${o.checked?" todo__item--done":""}" data-id="${i}">
          <div class="todo__move">
            <svg width="26" height="26">
              <use xlink:href="./sprite.svg#icon-move" />
            </svg>
          </div>

          <label class="checkbox todo__check">
            <input
              class="checkbox__input visually-hidden"
              type="checkbox"
              data-id="${i}"
              ${o.checked?"checked":""}
            >
            <svg class="checkbox__svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 18 18" fill="none">
              <path class="checkbox__path" d="M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"></path>
              <polyline class="checkbox__polyline" points="1 9 7 14 15 4"></polyline>
            </svg>
          </label>

          <div class="todo__content">
            <div class="todo__text">
              <p class="todo__text-inner">${a}</p>
            </div>
            <p class="todo__date">Добавлено: ${r} в ${l}</p>
          </div>

          <button class="todo__menu-toggle" type="button" data-id="${i}">
            <svg class="todo__menu-toggle-icon" width="24" height="24">
              <use xlink:href="./sprite.svg#icon-dots" />
            </svg>
          </button>

          <ul class="menu">
            <li class="menu__item">
              <button class="menu__btn todo__edit" type="button" data-id="${i}">
                <svg class="menu__btn-icon" width="20" height="20">
                  <use xlink:href="./sprite.svg#icon-edit" />
                </svg>
                Редактировать
              </button>
            </li>
            <li class="menu__item">
              <button class="menu__btn todo__delete" type="button" data-id="${i}">
                <svg class="menu__btn-icon" width="20" height="20">
                  <use xlink:href="./sprite.svg#icon-delete" />
                </svg>
                Удалить
              </button>
            </li>
          </ul>
        </li>
      `}t.todoList.replaceChildren(),t.todoList.insertAdjacentHTML("beforeend",e),t.onRendered()}}new Je;dt();
