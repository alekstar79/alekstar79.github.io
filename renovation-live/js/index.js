(()=>{"use strict";class e{constructor(e,t){this._body=document.querySelector("body"),this._classOpen=t,this._listLinks=[],this._countOpen=0,document.querySelectorAll("."+e).forEach((e=>{this._listLinks.push(e)}))}open(e){const t=this._listLinks.find((t=>t.classList.contains(e)));t&&(this._countOpen||(this._body.style.overflow="hidden"),t.classList.add(this._classOpen),this._countOpen++)}close(e){const t=this._listLinks.find((t=>t===e));t&&(t.classList.remove(this._classOpen),this._countOpen--,this._countOpen||(this._body.style.overflow=""))}}class t{constructor({url:e,urlDemo:t,errorMessageResponse:i,headers:s}){i||="Ошибка сервера",s||={"Content-Type":"application/json"},this._url=e,this._urlDemo=t,this._errorMessageResponse=i,this._headers=s}async request(e="GET",t="",i={}){document.preloader.start();try{const s={method:e,headers:this._headers};let r;"POST PATCH PUT".includes(e)&&(s.body=JSON.stringify(i));try{if(r=await fetch(this._url+t,s),!r.ok)throw new Error(this._errorMessageResponse)}catch(e){if(r=await fetch(this._urlDemo+t,s),!r.ok)throw new Error(this._errorMessageResponse);console.error("Страница переключена на демонстрационный режим"),document.taskDemo=1}const l=await r.json();return document.preloader.stop(),l}catch(e){throw document.preloader.stop(),new Error(this._errorMessageResponse)}}use(e){return this.request("GET",e?`/${e}`:"")}filter(e){return this.request("GET",`?${e}`)}useSort(e){return this.request("GET",`?_sort=${e.field}&_order=${e.order}`)}add(e){return this.request("POST","",e)}delete(e){return this.request("DELETE",`/${e}`)}edit(e,t){return this.request("PUT",`/${e}`,t)}change(e,t){return this.request("PATCH",`/${e}`,t)}}class i{constructor(e,t="_"){this._mask=e.replace(/d/g,t),this._placeholder=t,this._mapBuffer=[],e.split("").forEach(((e,t)=>"d"===e?this._mapBuffer.push(t):null)),this._buffer="".padEnd(this._mapBuffer.length,t),this._value=this._mask.split("")}get mask(){return this._mask}start(e){return this._buffer=e.replace(/\D/g,"").slice(0,this._mapBuffer.length).padEnd(this._mapBuffer.length,this._placeholder),this._value=this._mask.split(""),this._buffer.split("").forEach(((e,t)=>this._value[this._mapBuffer[t]]=e)),this._mask}edit(e,t){let i=e.selectionStart;t||(e.value=this.start(e.value));const s=e=>{const t=this._buffer;this._buffer=((e?t.slice(0,e):"")+t.slice(e+1,t.length)).padEnd(this._mapBuffer.length,this._placeholder),this._mapBuffer.forEach(((e,t)=>this._value.splice(e,1,this._buffer.slice(t,t+1)))),e<this._mapBuffer.length&&(i=this._mapBuffer[e])};if("insertText"===t){const t=e.value.slice(i-1,i).replace(/\D/,""),s=t?this._mapBuffer.findIndex((e=>e>=i-1)):-1;if(~s){const e=this._buffer;if(e.slice(s,s+1)===this._placeholder){const i=e.split("");i[s]=t,this._buffer=i.join("")}else this._buffer=(s?e.slice(0,s):"")+t+e.slice(s,e.length-1);this._mapBuffer.forEach(((e,t)=>{this._value.splice(e,1,this._buffer.slice(t,t+1))})),s+1<this._mapBuffer.length&&(i=this._mapBuffer[s+1])}else i--}else if("deleteContentForward"===t){const e=this._mapBuffer.findIndex((e=>e>=i));~e&&s(e)}else if("deleteContentBackward"===t){const e=this._mapBuffer.filter((e=>e<=i)).length-1;~e?s(e):i++}e.value=this._value.join(""),e.setSelectionRange(i,i)}}const s=({draw:e,duration:t=1e3,timingplane:i="linear"})=>{const s={linear:e=>e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeOutQuart:e=>1-Math.pow(1-e,5),aseOutExpo:e=>1===e?1:1-Math.pow(2,-10*e)};i in s||(i="linear");const r=Math.max(Math.round(t/16.7),1);let l=0;requestAnimationFrame((function t(){let n=0===l?0:l>r-1?1:s[i](l/r);e(n),l<r&&(l++,requestAnimationFrame(t))}))},r=(e,t=1e3)=>{const i=window.scrollY,r=document.querySelector(e).getBoundingClientRect().top;s({timingplane:"easeOutCubic",duration:t,draw(e){window.scrollTo(0,i+r*e)}})};class l{constructor({url:e,errorMessageResponse:i="Ошибка сервера.",optionals:s={}}){this._dataForm=new t({url:e,errorMessageResponse:i}),this._optionals=s}send(e){const t=e.querySelector(".feedback-block__form-input_name"),i=e.querySelector(".checkbox__input"),s=e.querySelector('input[name="phone"]'),r=e.closest(".popup"),l=new FormData(e),n={};l.forEach(((e,t)=>{n[t]="phone"===t?e.replace(/\D+/g,""):e})),i.checked&&(!t||t.value.trim().length>2)&&11===s.value.replace(/\D+/g,"").length?(e.id in this._optionals&&this._optionals[e.id].forEach((e=>{let t;"name"in e&&"assign"in e&&("select"in e?(t=document.querySelector(e.select))&&(n[e.name]=e.assign in t?t[e.assign]:e.assign):n[e.name]=e.assign)})),r&&document.modalList.close(r),this._dataForm.add(n).then((()=>{i.checked=!1,s.value="",t&&(t.value=""),document.modalList.open("popup-thank")})).catch((()=>{document.modalList.open("popup-thank-error")}))):(i.checked||i.parentNode.classList.add("error-input"),t&&t.value.trim()<3&&t.classList.add("error-input"),11!==s.value.replace(/\D+/g,"").length&&s.classList.add("error-input"))}}const n={isTouch:()=>"ontouchstart"in window,int:e=>+/-?\d+/.exec(e),noComments:e=>e.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),up0:e=>e.replace(/^./,e[0].toUpperCase()),toCamel:e=>e.replace(/-[a-z]+/g,(e=>n.up0(e.slice(1)))),ofCamel:e=>e.replace(/[A-Z]/g,"-$&").toLowerCase(),styleToJS:e=>n.noComments(e).replace(/\s+/g,"").split(";").reduce(((e,t)=>{if(t){let i=t.split(":");e[n.toCamel(i[0])]=i[1]||""}return e}),{}),jsToStyle:e=>{let t="";for(let i in e)t+=`${n.ofCamel(i)}: ${e[i]}; `;return t}};class o{constructor(e,t){Object.defineProperty(this,"parent",{value:t}),Object.defineProperty(t,"_dataList",{value:{}});for(let t in e){const i=t,s=e[i];Object.defineProperty(this,i,{enumerable:!0,get(){return i in this.parent._dataList?this.parent._dataList[i]:s},set(e){this.group={[i]:e}}})}Object.defineProperty(this,"default",{enumerable:!0,get:()=>e})}set text(e){this.parent.attributeChangedCallback("param",this.text,e)}get text(){let e="";return Object.keys(this).filter((e=>!isNaN(+e))).forEach((t=>{e+=`${n.ofCamel(this[t])}: ${this.parent._dataList[this[t]]}; `})),e.slice(0,-1)}set group(e){this.parent.attributeChangedCallback("param",this.text,n.jsToStyle(Object.assign({},this.group,e)))}get group(){const e={};return Object.keys(this).filter((e=>!isNaN(+e))).forEach((t=>{Object.assign(e,{[this[t]]:this.parent._dataList[this[t]]})})),e}set(){this.parent.setAttribute("param",this.text)}changedCallback(e,t,i){let s={},r=this.default,l=e?n.styleToJS(e):{};for(let e in l)if(e in r){let t=l[e].replace(/\s+/g,""),i=this[e],s=r[e],n=typeof s;if("boolean"===n){let r=["","true","false"].indexOf(t);l[e]=r<0?i:[s,!0,!1][r]}else l[e]="number"===n?isNaN(+t)?i:+t:t||s}let o=Object.assign({},l),a={},d=Object.keys(this);for(let e in this)d.includes(e)||(a[e]=this[e]);if(t)for(let e in l)o[e]=e in r?t(e,o[e],this[e],r[e]):null,null===o[e]&&delete o[e];i&&i(o,Object.assign({},a));let c=this.parent._dataList;Object.keys(this).filter((e=>!isNaN(+e))).forEach((e=>{delete c[this[e]],delete this[e]}));let h=0;for(let e in o)null!==o[e]&&(Object.defineProperty(this,`${h}`,{value:e,enumerable:!0,configurable:!0}),h++,Object.defineProperty(c,`${e}`,{value:o[e],configurable:!0}));for(let e in a){let t=this[e],i=a[e],r=e in l?l[e]:i;r===i&&r===t||(s[e]={ask:r,old:i,new:t})}return s}}class a extends o{constructor(e){super({xSide:"s",xDepend:"inverse",xHide:!1,xQty:0,x:0,xStep:1,ySide:"e",yDepend:"inverse",yHide:!1,yQty:0,y:0,yStep:1},e)}}class d extends HTMLElement{constructor(){super();const e=this,t=e.attachShadow({mode:"open"}),i=document.createElement("div");i.setAttribute("id","client"),i.lgxyWidth=i.lgxyHeight=0,t.append(document.createElement("style"),document.createElement("style"),i),Object.defineProperty(e,"param",{value:Object.create(new a(e))}),e.resizeObserver=new window.ResizeObserver((t=>{t.forEach((t=>{let s,r;t.borderBoxSize?(s=t.borderBoxSize[0].inlineSize,r=t.borderBoxSize[0].blockSize):(s=t.contentRect.width,r=t.contentRect.height),i.lgxyWidth=Math.round(s),i.lgxyHeight=Math.round(r),e.update("level")}))})),this.resizeObserver.observe(i)}connectedCallback(){const e=this;e._isRender||(e.param.set(),e.update("strip"),this.shadowRoot.childNodes[2].innerHTML="<slot></slot>",e.event(),Object.defineProperty(e,"_isRender",{value:!0}))}disconnectedCallback(){this.resizeObserver.disconnect(),this.event(!1)}adoptedCallback(){}static get observedAttributes(){return["param"]}attributeChangedCallback(e,t,i){let s=this.param.changedCallback(i,((e,t,i,s)=>{const r=typeof t;if("number"===r)t=Math.max(s,n.int(t));else if("string"===r){let s=e=>!e.includes(t);("xSide"===e&&s(["n","s","none","none-n","none-s"])||"ySide"===e&&s(["w","e","none","none-w","none-e"])||"xDepend"===e&&s(["directly","inverse"])||"yDepend"===e&&s(["directly","inverse"]))&&(t=i)}return t}),(e=>{["x","y"].forEach((t=>{let i=t in e?e[t]:0,s=Math.max(0,(t+"Qty"in e?e[t+"Qty"]:0)-1);i>s&&(e[t]=s)}))}));Object.keys(s).length&&this._isRender&&(this.update(("xSide"in s||"ySide"in s||"xHide"in s||"yHide"in s?"strip ":"")+"level"),this.dispatchEvent(new CustomEvent("lgxy",{detail:s,bubbles:!1,cancelable:!1})))}event(e=!0){if(e&&!this._eventList){let e=this;Object.defineProperty(this,"_eventList",{value:Object.create({},{down:{value:t=>function(e,t){if(e.target!==t)return;if(!n.isTouch()&&e.which>1)return;let i=n.isTouch()?e.changedTouches[0]:e,s=i.clientX,r=i.clientY;e.preventDefault();let l=t.shadowRoot.getElementById("client").getBoundingClientRect(),o=t.param,a=["n","none-n","none","none-s","s"].indexOf(o.xSide)-2,d=["w","none-w","none","none-e","e"].indexOf(o.ySide)-2,c=a>0?r>Math.trunc(l.bottom):r<=Math.trunc(l.top),h=d>0?s>Math.trunc(l.right):s<=Math.trunc(l.left);function u(e="remove"){e+="EventListener",n.isTouch()?(t[e]("touchmove",f,{passive:!1}),t[e]("touchend",p,!1),t[e]("touchcancel",p,!1)):(t[e]("mousemove",f),t[e]("mouseup",p),t[e]("mouseleave",p)),window[e]("resize",p,!1)}function p(){u()}function f(e){let t=n.isTouch()?e.changedTouches[0]:e,i=t.clientX,s=t.clientY;e.preventDefault(),m(i,s)}function m(e,t){if(!d||c&&!h){let t=e<=l.left?0:e>=l.right-1?o.xQty:Math.ceil((e-l.left)*o.xQty/l.width);o.x=(d>-1?"inverse"===o.xDepend:"directly"===o.xDepend)?t-1:o.xQty-t}if(!a||h&&!c){let e=t<=l.top?0:t>=l.bottom-1?o.yQty:Math.ceil((t-l.top)*o.yQty/l.height);o.y=(a>-1?"inverse"===o.yDepend:"directly"===o.yDepend)?e-1:o.yQty-e}}m(s,r),u("add")}(t,e)},wheel:{value:t=>function(e,t){if(e.ctrlKey||e.altKey||e.buttons)return;let i=e.deltaY>0?1:-1,s=t.param;e.shiftKey?s.x+=i*s.xStep:s.y+=i*s.yStep}(t,e)}})})}let t=this._eventList,i=(e?"add":"remove")+"EventListener";this[i](n.isTouch()?"touchstart":"mousedown",t.down,!1),this[i]("wheel",t.wheel,{passive:!1})}update(e="level"){const t=this,i=t.param;let s=["n","none-n"].includes(i.xSide)?-1:1,r=["w","none-w"].includes(i.ySide)?-1:1;const l=t.shadowRoot.childNodes;if(e.includes("strip")){let e=!i.xHide&&!i.xSide.includes("none"),n=!i.yHide&&!i.ySide.includes("none");l[0].textContent=`\n:host {\n  --color-xy: var( --lgxy-color-xy, transparent ) !important;\n  --color-level: var( --lgxy-color-level, rgba(100,100,100,0.3) );\n  --color-hover: var( --lgxy-color-hover, rgba(100,100,100,0.7) ) !important;\n  --wxy:${e||n?"calc( var( --lgxy-width, 0.8vw ) + 0px)":"0px"} !important;\n  --wx: ${e?"var( --wxy )":"0px"} !important;\n  --wy: ${n?"var( --wxy )":"0px"} !important;\n  \n  position: ${t.parentElement&&"body"===t.parentElement.localName?"fixed":"relative"};\n  display: flex !important;\n  flex-direction: column !important;\n  ${s>0?"":"justify-content: flex-end !important;"}\n  overflow: hidden !important;\n  contain: layout !important;\n  box-shadow: var(--color-xy) ${-r}px ${-s}px 1px ,\n              var(--color-xy) calc(${-.75*r} * var(--wy)) calc( ${-.75*s} * var(--wx))\n              var(--wxy) inset !important;\n  top: 0;\n  left: 0;\n  width:  100%;\n  height: 100%;\n}\n\n#client {\n  flex-shrink: 0;\n  align-self: flex-${r>0?"start;":"end;"}\n  position: relative;\n  width:  calc( 100% - var(--wy) );\n  height: calc( 100% - var(--wx) );\n  contain: size layout;\n}\n\n:host(:hover) {\n  --color-level: var(--color-hover);\n}`}if(e.includes("level")){let e=i.x,n=i.xQty,o=i.y,a=i.yQty,d="inverse"===i.xDepend?e+1:n-e-1,c="inverse"===i.yDepend?o+1:a-o-1,h=t.shadowRoot.childNodes[2],u=h.lgxyWidth,p=h.lgxyHeight,f=n?d===n?u:Math.ceil(d*u/n):0,m=a?c===a?p:Math.ceil(c*p/a):0;l[1].textContent=`\n#client {\n  box-shadow:\n    var(--color-level) ${.5*r}px ${.5*s}px 1px 0px ,\n    var(--color-level) ${r*u}px ${s*p}px 0px 0px ,\n    var(--color-level) calc( ${r} * ( var(--wxy) + ${f}px)) calc(${s} * (var(--wxy) + ${m}px)) 0px var(--wxy);\n}`}}}window.customElements.define("lgxy-box",d);const c=()=>{class e extends o{constructor(e){super({lgxy:"auto",gapCol:2,gapRow:2,rowHeight:22,headingHeight:24,footingHeight:0,divisionLine:2,go:"s"},e)}}class t{constructor(e){Object.defineProperty(this,"tds",{value:e}),Object.defineProperty(this,"list",{value:[]})}add(e={},t=this.list.length,i=!1){const s=this.tds,r=this.list.length,l=function(e,t){const i={id:"col"+e,width:100,widthMin:20,widthMax:null,head:void 0,headSay:void 0,when:()=>!1,cell:void 0,cellSay:void 0,cellGet:void 0,sortKey:void 0,foot:"",footSay:void 0,renew:[e=>e,0],shadow:!1,hidden:!1};return Object.assign(i,t),i.head||(i.head=i.id),i.headSay||(i.headSay=i.head),i.cellSay||(i.cellSay=i.cell),i.cellGet||(i.cellGet=i.cell),i.sortKey||(i.sortKey=i.cell),i.footSay||(i.footSay=i.foot),s.records.sortSet[i.id]=i.sortKey,delete i.sortKey,i.widthMin<6&&(i.widthMin=6),null!==i.widthMax&&i.widthMax<i.widthMin&&(i.widthMax=i.widthMin),i.width<i.widthMin&&(i.width=i.widthMin),null!==i.widthMax&&i.width>i.widthMax&&(i.width=i.widthMax),i}(r,e);!function(e,t,i){const s=e.links.templateCol.cloneNode();s.setAttribute("data-col",t),s.id=i.id,s.hidden=!0;const r=s.cloneNode();r.innerHTML="string"==typeof i.headSay?i.headSay:i.headSay(),r.classList.add("-tds-heading-col");const l=s.cloneNode();l.innerHTML=i.footSay,l.classList.add("-tds-footing-col"),e.links.headingSlide.append(r),e.links.footingSlide.append(l),e.links.templateRow.Slide.append(s.cloneNode());for(let t=0;t<e.rowMax+1;t++)e.links.dataSlide.children[t].append(s.cloneNode())}(s,r,l),this.list.push(l),l.hidden||s.listX.splice(s.listX.length-(i?0:s.fixedRight),0,r),s.xMax>-1&&s.updateData(void 0,void 0,r),null!==t&&(s.controlCol(!0,t),s.render=1)}moveLeft(){const e=this.tds,t=e.listX,i=e.x;i>(i<e.xLeft?0:i<e.xRight?e.xLeft:e.xRight)&&([t[i-1],t[i]]=[t[i],t[i-1]],e.controlCol(!1))}moveRight(){const e=this.tds,t=e.listX,i=e.x;i<(i<e.xLeft?e.xLeft-1:i<e.xRight?e.xRight-1:t.length-1)&&([t[i],t[i+1]]=[t[i+1],t[i]],e.controlCol(!1))}moveOff(){const e=this.tds,t=e.listX;let i=t.slice(0,e.xLeft).sort(((e,t)=>e-t)),s=t.slice(e.xRight).sort(((e,t)=>e-t)),r=t.slice(e.xLeft,e.xRight).sort(((e,t)=>e-t));i.concat(r,s).forEach(((e,i)=>t[i]=e)),e.controlCol(!1)}pinnedLeft(){const e=this.tds,t=e.listX,i=e.x,s=t[i];let r;if(r=i<e.xLeft){let r=t.slice(e.xLeft,e.xRight);r.push(s),r.sort(((e,t)=>e-t)),t.splice(e.xLeft-1+r.indexOf(t[i]),0,t.splice(i,1)[0]),e.fixedLeft--}else(r=i>=e.xRight)?(t.splice(e.xLeft,0,t.splice(i,1)[0]),e.fixedLeft++,e.fixedRight--):(r=e.xRight-e.xLeft>1)&&(t.splice(e.xLeft,0,t.splice(i,1)[0]),e.fixedLeft++);r&&e.controlCol()}pinnedRight(){const e=this.tds,t=e.listX,i=e.x,s=t[i];let r;if(r=i>=e.xRight){let r=t.slice(e.xLeft,e.xRight);r.push(s),r.sort(((e,t)=>e-t)),t.splice(e.xLeft+r.indexOf(t[i]),0,t.splice(i,1)[0]),e.fixedRight--}else(r=i<e.xLeft)?(t.splice(e.xRight-1,0,t.splice(i,1)[0]),e.fixedLeft--,e.fixedRight++):(r=e.xRight-e.xLeft>1)&&(t.splice(e.xRight-1,0,t.splice(i,1)[0]),e.fixedRight++);r&&e.controlCol()}fixedLeft(){const e=this.tds,t=e.x,i=e.listX;if(t<e.xLeft){let s=i.slice(t,e.xRight).sort(((e,t)=>e-t));i.splice(t,e.xLeft-t).sort(((e,t)=>e-t)).forEach((e=>{i.splice(t+s.indexOf(e),0,e)}))}else t>=e.xRight&&(e.fixedRight-=t-e.xRight);e.fixedLeft!==t&&(e.fixedLeft=t,e.controlCol())}fixedRight(){const e=this.tds,t=e.listX,i=e.xMax-e.x,s=i?e.x:t.length-1;if(s>=e.xRight){let i=t.slice(e.xLeft,s+1).sort(((e,t)=>e-t));t.splice(e.xRight,s-e.xRight+1).sort(((e,t)=>e-t)).forEach((s=>{t.splice(e.xLeft+i.indexOf(s),0,s)}))}else s<e.xLeft&&(e.fixedLeft=s);e.fixedRight!==i&&(e.fixedRight=i,e.controlCol())}shadow(){const e=this.list,t=this.tds,i=t.listX[t.x];e[i].shadow=!e[i].shadow,t.controlCol()}hidden(e){const t=this.tds,i=t.listX,s="number"==typeof e?i.indexOf(e):t.x,r=t.xRight,l=t.xLeft;if(s<0);else if(s>=r||s<l||r-l>1){let e;i.splice(s,1),(e=s>=r)?t.fixedRight--:(e=s<l)?t.fixedLeft--:e=r-l>1,e&&t.controlCol()}}hiddenOff(e){const t=this.list,i=this.tds,s=i.listX,r=s.indexOf(e);if(e>-1&&e<t.length&&!~r){let t=s.slice(i.xLeft,i.xRight);t.push(e),t.sort(((e,t)=>e-t)),s.splice(i.xLeft+t.indexOf(e),0,e),i.controlCol(!0,e)}}}class i{constructor(e){Object.defineProperty(this,"tds",{value:e}),Object.defineProperty(this,"sortSet",{value:{}}),Object.defineProperty(this,"sortApply",{value:[]});const t=(e,t)=>{switch(typeof e){case"string":return t[e]+"";case"function":return e(t)+"";default:return""}};Object.defineProperty(this,"filterSet",{value:{tds0:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),s.includes(r)},tds1:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),s===r},tds2:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),isNaN(+s)||isNaN(+r)?s>r:+s>+r},tds3:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),isNaN(+s)||isNaN(+r)?s<r:+s<+r},tds4:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),(isNaN(+s)||isNaN(+r)?s>r:+s>+r)||s===r},tds5:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),(isNaN(+s)||isNaN(+r)?s<r:+s<+r)||s===r},tds6:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),s!==r},tds7:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),s=s.slice(0,r.length),s===r},tds8:(e,i)=>{let s=t(e.cell,i),r=e.compare;return e.loose&&(s=s.trim().toLowerCase(),r=r.trim().toLowerCase()),!s.includes(r)}}}),Object.defineProperty(this,"filterApply",{value:[]})}sort(e,t=1,i=!1){const s=this.tds;e||=s.columns.list[s.listX[s.x]].id,this.sortMulty([{tag:e,mode:t}],i)}sortMulty(e=[],t=!1){const i=this.sortSet,s=this.sortApply,r=s.length;t||(s.length=0),e.forEach((e=>{if(e.tag in i){let t="mode"in e?e.mode:1,i=s.findIndex((t=>t.tag===e.tag));i>-1?t?s[i].mode=t:s.splice(i,1):t&&s.push({tag:e.tag,mode:t})}else console.error(`TDS.records: sortMulty() tag "${e.tag}" не зарегестрирован в sortSet`)})),s.length?this.sortRefrech():r&&this.sortOff()}sortRefrech(){const e=this.tds,t=e.listY,i=this.sortApply,s=this.sortSet;if(!i.length||!t.length)return;let r=t[e.y],l=(e,t)=>{switch(typeof e){case"string":return t[e]+"";case"function":return e(t)+"";default:return""}};const n=e.data;let o=i.map((e=>{let t=s[e.tag],i=l(t,n[r]);return{values:[],mode:e.mode,key:t,type:isNaN(+i)?"string":"number"}})),a=o.length;o.push([]),t.forEach(((e,t)=>{o[a].push([t,e]);let i=n[e];o.forEach(((e,t)=>{if(t<a){let s=l(e.key,i);o[t].values.push("string"===e.type?s.toUpperCase():+s)}}))})),o[a].sort(((e,t)=>{let i;for(let n=0;n<a&&(s=o[n].values[e[0]],r=o[n].values[t[0]],l=o[n].mode,!(i=s<r?-l:s>r?l:0));n++);var s,r,l;return i})),t.length=0,o[a].forEach((e=>t.push(e[1]))),e.updateData(),e.y=t.indexOf(r)}sortOff(){const e=this.tds,t=e.listY,i=this.sortApply;let s=t[e.y];t.sort(((e,t)=>e-t)),i.length=0,e.updateData(),e.y=t.indexOf(s)}filter(e="tds0",t={},i=!1){return this.filterMulty([{tag:e,param:t}],i)}filterMulty(e=[],t=!1){const i=this.tds,s=i.columns.list,r=this.filterSet,l=this.filterApply;let n=0;return t||(l.length=0),e.forEach((e=>{if(e.tag in r)if("tds"===e.tag.slice(0,3)){let t=i.listX[i.x];"colId"in e.param?t=s.findIndex((t=>t.id===e.param.colId)):e.param.colId=s[t].id,t<0?console.error(`TDS.records: filterMulty() столбец с colId "${e.param.colId}" не зарегестрирован в TDS.columns`):(e.param.cell=s[t].cell,"loose"in e.param||(e.param.loose=!0),"compare"in e.param||(e.param.compare=""),e.param.compare+="",l.push(e),n++)}else l.push(e),n++;else console.error(`TDS.records: filterMulty() tag "${e.tag}" не зарегестрирован в filterSet`)})),(t?i.listY.length:i.data.length)?t?n?this.filterRefrech(n):-1:n?this.filterRefrech():this.filterOff()||-1:-1}filterRefrech(e=0){const t=this.tds,i=t.data,s=t.listY,r=this.filterSet,l=this.filterApply;let n=s[t.y];const o=[];if(e){let t=l.slice(-e);s.forEach((e=>{t.find((t=>!(0,r[t.tag])(t.param,i[e])))||o.push(e)}))}else i.forEach(((e,t)=>{l.find((t=>!(0,r[t.tag])(t.param,e)))||o.push(t)}));return s.length=0,o.forEach((e=>s.push(e))),t.lgxy.param.group={yQty:s.length,y:Math.max(s.indexOf(n),0)},t.updateData(),s.length}filterOff(){const e=this.tds,t=e.data,i=e.listY,s=i[e.y],r=this.filterApply;i.length=0,t.forEach(((e,t)=>i.push(t))),r.length=0,e.lgxy.param.group={yQty:i.length,y:Math.max(i.indexOf(s),0)},this.sortRefrech()}current(){const e=this.tds.listY[this.tds.y];return{recno:e,data:this.tds.data[e]}}append(e){const t=this.tds,i=t.data,s=t.listY;i.push(e),s.push(i.length-1),t.lgxy.param.group={yQty:s.length,y:Math.max(s.length-1,0)},this.sortRefrech()}change(e){const t=this.tds.listY[this.tds.y],i=this.tds.data[t];for(let s in i)s in e&&(this.tds.data[t][s]=e[s]);this.tds.updateData(this.tds.row,this.tds.row),this.sortRefrech()}delete(){const e=this.tds,t=e.data,i=e.listY,s=i[e.y];t.splice(s,1),i.splice(e.y,1),i.forEach(((e,t)=>{e>s&&(i[t]=e-1)})),e.lgxy.param.group={yQty:i.length,y:e.y}}}class s extends HTMLElement{constructor(){super();const t=this;Object.defineProperty(t,"render",{writable:!0,value:-1});const i=new d,s=document.createElement("div");s.setAttribute("class","-tds-table");let r=document.createElement("style"),l=[r,r.cloneNode(),r.cloneNode(),r.cloneNode(),r.cloneNode(),i];Object.defineProperty(t,"lgxy",{value:i}),Object.defineProperty(t,"links",{value:{table:s}}),["heading","data","footing"].forEach((e=>{let i=document.createElement("div");i.setAttribute("class","-tds-"+e);let r=new Array(3);["left","slide","right"].forEach(((i,s)=>{let l;r[s]=document.createElement("div"),r[s].setAttribute("class","-tds-"+i),"data"===e?(l=document.createElement("div"),l.classList.add("-tds-roll"),r[s].append(l)):"heading"===e?(l=document.createElement("div"),l.classList.add("-tds-roll","-tds-heading-row"),r[s].append(l)):"footing"===e?(l=document.createElement("div"),l.classList.add("-tds-roll","-tds-footing-row"),r[s].append(l)):l=r[s],t.links[e+n.up0(i)]=l})),i.append(...r),s.append(i)})),i.append(s),t.attachShadow({mode:"open"}).append(...l);const o=t.links.dataSlide.parentElement;o.tdsWidth=0,o.tdsHeight=0,t.links.client=o,t.resize=()=>{},t.resizeObserver=new window.ResizeObserver((e=>{let i=0,s=0;e.forEach((e=>{let r,l;e.borderBoxSize?(r=Math.round(e.borderBoxSize[0].inlineSize),l=Math.round(e.borderBoxSize[0].blockSize)):(r=Math.round(e.contentRect.width),l=Math.round(e.contentRect.height)),i=r-(o.tdsWidth||0),s=l-(o.tdsHeight||0),o.tdsWidth=r,o.tdsHeight=l,t.render>0&&(i&&t.controlCol(!1,-1,i),s&&t.controlRow(!0,s),(i||s)&&window.setTimeout((()=>t.resize(r,l)),0))}))})),t.resizeObserver.observe(o),Object.defineProperty(t,"param",{value:Object.create(new e(t))});let a=document.createElement("div");a.classList.add("-tds-row"),t.links.templateRow={Slide:a,Left:a.cloneNode(!1),Right:a.cloneNode(!1)};let c=document.createElement("div");c.classList.add("-tds-cell"),t.links.templateCol=c}connectedCallback(){const e=this;if(e.render<0){e.tabIndex=0,e.param.set(),["hidden","auto"].includes(e.param.lgxy)&&(e.lgxy.param.group={xHide:!0,yHide:!0}),Object.defineProperty(e,"columns",{value:new t(e)}),Object.defineProperty(e,"records",{value:new i(e)}),Object.defineProperty(e,"listX",{value:[]}),Object.defineProperty(e,"listY",{value:[]}),Object.defineProperty(e,"fixedLeft",{writable:!0,value:0}),Object.defineProperty(e,"fixedRight",{writable:!0,value:0});const s=getComputedStyle(e),r=/"+/g,l=e=>s.getPropertyValue(e).replace(r,"");Object.defineProperty(e,"paramRoll",{value:{rows:0,hideRow:0,row:0,left:0,top:0,cssCursor:l("--tds-cursor-focusout"),cssActive:l("--tds-cursor-focusin"),cssLine:l("--tds-cursor-line"),cssShadow:l("--tds-col-shadow"),cssHeading:l("--tds-cell-heading"),cssData:l("--tds-cell-data"),cssFooting:l("--tds-cell-footing")}}),e.updateStyle("init"),e.event(),e.render=0}}disconnectedCallback(){this.resizeObserver.disconnect(),this.event(!1)}adoptedCallback(){}static get observedAttributes(){return["param"]}attributeChangedCallback(e,t,i){const s=this;let r,l,o,a,d=s.param.changedCallback(i,((e,t,i,s)=>("number"==typeof t?t=Math.max(n.int(t),e.includes("gap")||e.includes("Height")?0:s):("lgxy"===e&&!["auto","visible","hidden"].includes(t)||"go"===e&&!["s","r","d","l","u"].includes(t))&&(t=i),t)),(()=>{}));if(Object.keys(d).length&&!(s.render<1)&&s.columns.list.length){if("lgxy"in d)if("auto"===d.lgxy.new)l=o=!0;else{let e="hidden"===d.lgxy.new;s.lgxy.param.group={xHide:e,yHide:e}}"gapCol"in d&&(r=l=!0),("gapRow"in d||"rowHeight"in d)&&(r=a=!0),("headingHeight"in d||"footingHeight"in d||"divisionLine"in d)&&(r=!0),r&&s.updateStyle("init"),l&&s.controlCol(!1),a?s.controlRow(!0):o&&s.controlRow(!1),s.dispatchEvent(new CustomEvent("tds",{detail:d,bubbles:!1,cancelable:!1}))}}set row(e){this.paramRoll.row=e<0||this.rowMax<0?0:e>this.rowMax?this.rowMax:e}get row(){return this.paramRoll.row}get rowMax(){return this.paramRoll.rows-1}set x(e){this.lgxy.param.x=e}get x(){return this.lgxy.param.x}set xMax(e){this.lgxy.param.xQty=e+1}get xMax(){return this.lgxy.param.xQty-1}get xLeft(){return this.fixedLeft}get xRight(){return this.listX.length-this.fixedRight}set y(e){this.lgxy.param.y=e}get y(){return this.lgxy.param.y}set yMax(e){this.lgxy.param.yQty=e+1}get yMax(){return this.lgxy.param.yQty-1}get yBeginSlide(){return this.y-this.row}get yEndSlide(){return this.yBeginSlide+this.rowMax}set data(e){const t=this;t._data=e;const i=t.listY;i.length=0,e.forEach(((e,t)=>{i.push(t)})),t.render>0&&(t.lgxy.param.group={yQty:e.length,y:0},t.updateData())}get data(){return this._data}use(e){if("object"!=typeof e)return;const t=this;t.render=0,t.data=e.data,"hrefCSS"in e&&fetch(e.hrefCSS).then((e=>e.text())).then((e=>t.shadowRoot.childNodes[4].textContent=e)),t.fixedLeft="fixedLeft"in e?e.fixedLeft:0,t.fixedRight="fixedRight"in e?e.fixedRight:0;for(let i in t.param.default)i in e&&(t.param[i]=e[i]);if("columns"in e&&e.columns.length>0){"data"in e||(e.data=[]);for(let i=0;i<e.columns.length;i++)t.columns.add(e.columns[i],null,!0)}else{if(!("data"in e&&Array.isArray(e.data)&&e.data.length))return;{const i=e.data[0];let s=0;for(let e in i){const r=e,l=i[r];t.columns.add({id:r,head:r,cell:r,cellSay:e=>`<span class="-tds-type-${typeof l}">${e[r]}</span>`,width:100},null,!0),s++}}}t.updateStyle("init"),t.controlCol(!0,0),t.lgxy.param.group={yQty:e.data.length,y:0},t.render=1}updateData(e=0,t=this.rowMax,i=-1){if(t<e)return;const s=this;let r=(e,t)=>{let i=s.data[s.listY[e]];switch(typeof t){case"string":return i[t];case"function":return t(i);default:return""}},l=(e,t)=>{let i=s.yBeginSlide+e,l=[].concat(Array.from(s.links.dataLeft.children[e].children),Array.from(s.links.dataSlide.children[e].children),Array.from(s.links.dataRight.children[e].children)),n=[];for(let e=0;e<l.length;e++){let o=l[e],a=+o.dataset.col;if(t<0||t===a){let e=s.columns.list[a].cellSay;n.push({cell:o,content:r(i,e)})}if(t===a)break}return n},n=[];for(let s=e;s<t+1;s++)n.push(l(s,i));n.forEach((e=>e.forEach((e=>e.cell.innerHTML=e.content))))}controlRow(e=!0,t=0){const i=this;if(!i.columns.list.length)return;let s=i.paramRoll.rows;e&&function(){const e=i.param.rowHeight,r=i.param.gapRow,l=i.paramRoll;t||(l.top=0);let n=l.top,o=i.row,a=i.links.client.tdsHeight,d=e+r,c=e>0?Math.min(i.listY.length,Math.ceil(a/d)):0;l.rows=c;let h=(c?c*d-r:0)-a;l.hideRow=h;let u=s-o-1,p=i.yMax-i.y-u,f={slide:i.links.dataSlide,left:i.links.dataLeft,right:i.links.dataRight},m={ins:0,del:0},g=c-s;if(g<0){for(let e=0;e<-g;e++){let t=!e&&n>0||e>=u?"firstChild":"lastChild";f.left[t].remove(),f.slide[t].remove(),f.right[t].remove(),"firstChild"===t&&(m.del++,o--)}i.row=o}else if(g>0){let e=i.links.templateRow,t={pre:{slide:[],left:[],right:[]},add:{slide:[],left:[],right:[]}};for(let i=0;i<g;i++){let s=i<p?"add":"pre";t[s].left.push(e.Left.cloneNode(!0)),t[s].slide.push(e.Slide.cloneNode(!0)),t[s].right.push(e.Right.cloneNode(!0))}m.ins=t.pre.slide.length,m.ins&&(f.left.prepend(...t.pre.left),f.slide.prepend(...t.pre.slide),f.right.prepend(...t.pre.right),o+=m.ins,i.row=o,i.updateData(0,m.ins-1)),t.add.slide.length&&(f.left.append(...t.add.left),f.slide.append(...t.add.slide),f.right.append(...t.add.right),i.updateData(c-t.add.slide.length,c-1))}if(g>0||t>0){let s=i.listY.length*d-r;if(m.ins)n=i.yBeginSlide?h:h<0?0:h;else if(n>0){let i=e-1;n=i-(i-n+Math.min(t,n))%d}i.yBeginSlide*d+n>0&&(!m.ins&&n<0&&(n=(r+n+Math.min(t,-n))%d-r),s-(i.yBeginSlide*d+n)-a<=0&&(n=h))}else(g<0||t<0)&&(m.del?n=~i.rowMax?h:0:n>0&&(n=(r+n+Math.min(-t,n))%d-r),(i.row+1)*d-r+(n<0?-n:n)>=a&&(n=h));l.top=n}(),e&&(t>0&&!s||!t)?i.cursor():i.updateStyle("scroll-row")}controlCol(e=!0,t=-1,i=0){const s=this,r=s.listX,l=s.columns.list;(e=function(e){l.forEach((e=>e.hidden=!0));let t=[],i=l.length-1;for(let s=r.length-1;s>-1;s--){let n=r[s];n>i||n<0||t.includes(n)?(r.splice(s,1),e=!0):(t.push(n),l[n].hidden=!1)}const n=Math.max(r.length-1,0);return s.fixedLeft>n&&(e=!0,s.fixedLeft=n),s.fixedRight>n-s.fixedLeft&&(e=!0,s.fixedRight=n-s.fixedLeft),e}(e))&&function(){const e=s.fixedLeft,t=s.fixedRight;let i=s.links.templateRow,n={Left:Array.from(i.Left.children,(e=>+e.dataset.col)),Slide:Array.from(i.Slide.children,(e=>+e.dataset.col)),Right:Array.from(i.Right.children,(e=>+e.dataset.col))},o=((e,t,i)=>{let r={Left:[],Slide:[],Right:[]},l=e.length,n=s.columns.list.length;for(let i=0;i<t;i++)r.Left[i]=e[i];r.Left.sort(((e,t)=>e-t));for(let t=l-i;t<l;t++)r.Right.push(e[t]);r.Right.sort(((e,t)=>e-t));for(let e=0;e<n;e++)r.Left.includes(e)||r.Right.includes(e)||r.Slide.push(e);return r})(r,e,t),a=(e,t)=>{let r=[];r.push(i[e].children[t]),r.push(s.links["heading"+e].children[t]);let l=s.links["data"+e].children;for(let e=0;e<s.rowMax+1;e++)r.push(l[e].children[t]);return r.push(s.links["footing"+e].children[t]),r};const d="-tds-col-shadow";["Left","Right","Slide"].forEach((e=>{for(let t=0;t<n[e].length;t++){const s=n[e][t],r=i[e].children[t],o=l[s].shadow,c=r.classList.contains(d),h=l[s].hidden,u=r.hidden;o===c&&h===u||a(e,t).forEach((e=>{o&&!c?e.classList.add(d):!o&&c&&e.classList.remove(d),h&&!u?e.hidden=!0:!h&&u&&(e.hidden=!1)}))}}));let c=[],h=(e,t,i,s,r)=>{c.push({mode:e,fromSele:t,fromPos:i,toSele:s,toPos:r})};["Left","Right","Slide"].forEach(((e,t)=>{let i=["Left","Right","Slide"];i.splice(t,1);for(let t=0;t<n[e].length;t++){const s=n[e][t];if(!o[e].includes(s)){n[e].splice(t,1);let r=o[i[0]].includes(s)?i[0]:o[i[1]].includes(s)?i[1]:"";if(r){let i=n[r].findIndex((e=>e>s)),l=~i?"before":"append";~i?n[r].splice(i,0,s):n[r].push(s),h(l,e,t,r,i),t--}}}}));let u=s.paramRoll.rows;c.forEach((e=>{let[t,r,l,n,o]=[e.mode,e.fromSele,e.fromPos,e.toSele,e.toPos],[a,d]=[s.links["heading"+n],s.links["heading"+r]],[c,h]=[s.links["footing"+n],s.links["footing"+r]],[p,f]=[s.links["data"+n],s.links["data"+r]];if("append"===t){a.append(d.children[l]),c.append(h.children[l]);for(let e=0;e<u;e++)p.children[e].append(f.children[e].children[l]);i[n].append(i[r].children[l])}else{a.children[o].before(d.children[l]),c.children[o].before(h.children[l]);for(let e=0;e<u;e++)p.children[e].children[o].before(f.children[e].children[l]);i[n].children[o].before(i[r].children[l])}})),s.xMax-r.length+1&&(s.xMax=r.length-1)}(),s.updateStyle("cols"+(i?"+scroll-col":""));const n=s.links.currentCell,o=s.fixedLeft;setTimeout((()=>{let e=~t?r.indexOf(t):n?r.indexOf(+n.dataset.col):o;e<0||~t&&s.x===e?s.cursor():s.x=e}),0)}cursor(){const e=this;let t=e.links.currentCell,i=e.links.currentLine;if(t&&(t.classList.remove("-tds-cursor","-tds-active"),i.left.classList.remove("-tds-line"),i.slide.classList.remove("-tds-line"),i.right.classList.remove("-tds-line"),i=void 0),!~e.rowMax)return;let s,r=e.listX,l=e.x,n=e.row,o=l<e.xLeft?"dataLeft":l<e.xRight?"dataSlide":"dataRight",a=r[l],d=e.links[o].children[n].children;for(let e=0;e<d.length;e++)if(+d[e].dataset.col===a){s=d[e];break}e.links.currentCell=s,s&&(i={left:e.links.dataLeft.children[n],slide:e.links.dataSlide.children[n],right:e.links.dataRight.children[n]},i.left.classList.add("-tds-line"),i.slide.classList.add("-tds-line"),i.right.classList.add("-tds-line"),e.links.currentLine=i,s.classList.add("-tds-cursor"),document.activeElement===e&&s.classList.add("-tds-active"),0===e.row&&e.rowMax>0?e.paramRoll.top=0:e.row===e.rowMax&&(e.paramRoll.top=Math.max(e.paramRoll.hideRow,0)),this.updateStyle("scroll-col+scroll-row "))}event(e=!0){if(e&&!this._eventList){let e=this;Object.defineProperty(this,"_eventList",{value:Object.create({},{lgxy:{value:t=>function(e,t){document.activeElement!==t&&("x"in e.detail||"y"in e.detail)&&t.focus();let i,s=!1;if(i="yQty"in e.detail){t.controlRow(!0);let i="y"in e.detail?e.detail.y.new:t.y;i>t.rowMax?t.yEndSlide>t.yMax&&(t.row+=t.yEndSlide-t.yMax):t.row=i,s=!0}else if("y"in e.detail){let r=e.detail.y.ask<0,l=!e.detail.y.new,n=e.detail.y.new===t.yMax,o=e.detail.y.ask>e.detail.y.new,a=e.detail.y.new-e.detail.y.old,d=r&&!l||o&&!n||t.row+a<0||t.row+a>t.rowMax;a&&(r||l?t.row=0:o||n?t.row=t.rowMax:d?t.yBeginSlide<0?t.row+=t.yBeginSlide:t.yEndSlide>t.yMax&&(t.row+=t.yEndSlide-t.yMax):t.row+=a,d&&(i=!0),s=!0)}"x"in e.detail&&e.detail.x.new===e.detail.x.ask&&(s=!0),i&&t.updateData(),s&&t.cursor()}(t,e)},keydown:{value:t=>function(e,t){let i=!0,s=e.key;switch(e.ctrlKey||e.altKey||!(e.code.includes("Key")||e.code.includes("Digit")||e.code.includes("Numpad")||["Backquote","Minus","Equal","IntlYen","BracketLeft","BracketRight","Backslash","Semicolon","Quote","IntlBackslash","Comma","Period","Slash","IntlRo"].includes(e.code))||(s="Enter"),s){case"ArrowRight":t.x++;break;case"ArrowLeft":t.x--;break;case"ArrowDown":e.ctrlKey?t.y=t.yMax:t.y++;break;case"ArrowUp":e.ctrlKey?t.y=0:t.y--;break;case"Home":e.ctrlKey?t.lgxy.param.group={x:0,y:0}:t.x=0;break;case"End":e.ctrlKey?t.lgxy.param.group={x:t.xMax,y:t.yMax}:t.x=t.xMax;break;case"PageDown":t.y+=t.paramRoll.rows-(t.paramRoll.hideRow>0?1:0);break;case"PageUp":t.y-=t.paramRoll.rows-(t.paramRoll.hideRow>0?1:0);break;case"Enter":let s=t.columns.list,r=t.listX,l=t.param.go,n=e=>{let t=0;if("r"===l){let i=r.length;for(let l=e;l<i&&s[r[l]].shadow;l++)t++;t===i-e&&(t=null)}else if("l"===l){for(let i=e;i>-1&&s[r[i]].shadow;i--)t--;e+1+t!==0&&(t=null)}return t},o=!1;if("r"===l||"l"===l){let e=n(t.x);e&&(t.x+=e,o=!0)}let a=s[r[t.x]],d=t.data[t.listY[t.y]],c=!a.shadow&&a.when(d);if("s"===l);else if("d"===l)t.y++;else if("u"===l)t.y--;else if(c||!o){let e="r"===l?1:-1,i=n(t.x+e);null===i||(t.x+=e+i)}break;default:i=!1}i&&e.preventDefault()}(t,e)},down:{value:t=>s(t,e,n.isTouch()?"touchstart":"mousedown")},dbldown:{value:t=>s(t,e,"dblclick")},focus:{value:()=>{let t=e.links.currentCell;t&&!t.classList.contains("-tds-active")&&t.classList.add("-tds-active")}},blur:{value:()=>{let t=e.links.currentCell;t&&t.classList.contains("-tds-active")&&t.classList.remove("-tds-active")}}})})}let t=this._eventList,i=(e?"add":"remove")+"EventListener";function s(e,t,i){if(e.target!==t)return;if(!n.isTouch()&&e.which>1)return;e.preventDefault(),document.activeElement!==t&&t.focus();let s=(e=>{for(;e&&(e.classList.value.includes("-tds-type")||!e.classList.value.includes("-tds-"));)e=e.parentElement;return e})(e.composedPath()[0]),r=s?s.classList.value:"";if(r.includes("-tds-heading-col")){let l=e.clientX;t.x=t.listX.indexOf(+s.dataset.col);let o=t.columns.list[+s.dataset.col];function a(e){e.preventDefault();let i=e.clientX-l;l=e.clientX;let s=!1,r=o.width;r+i<o.widthMin&&(i=o.widthMin-r,s=!0),null!==o.widthMax&&r+i>o.widthMax&&(i=o.widthMax-r,s=!0),i&&(o.width=r+i,t.controlCol(!1)),s&&d()}function d(){s.removeEventListener("mouseleave",d),s.removeEventListener("mouseup",d),s.removeEventListener("mousemove",a),t.event(),s.style.cursor=""}"mousedown"===i&&o.widthMin!==o.widthMax&&(s.style.cursor="col-resize",t.event(!1),s.addEventListener("mousemove",a),s.addEventListener("mouseup",d),s.addEventListener("mouseleave",d))}else if(r.includes("-tds-footing-col"))t.x=t.listX.indexOf(+s.dataset.col);else if(r.includes("-tds-cell")){let c=s.parentElement,h=t.listX.indexOf(+s.dataset.col),u=[].slice.apply(c.parentElement.children).indexOf(c)-t.row;h!==t.x&&u?t.lgxy.param.group={x:h,y:t.y+u}:h!==t.x?t.x=h:u&&(t.y+=u)}}this.lgxy[i]("lgxy",t.lgxy,!1),this[i]("keydown",t.keydown,!1),this[i]("focus",t.focus,!0),this[i]("blur",t.blur,!0),this[i](n.isTouch()?"touchstart":"mousedown",t.down,!1),this[i]("dblclick",t.dbldown,!1)}updateStyle(e="init+cols+scroll-col+scroll-row"){const t=this,i=t.param,s=t.paramRoll,r=i.gapCol,l=i.gapRow,n=t.columns.list,o=t.listX,a=t.links,d=t.shadowRoot.childNodes;if(e.includes("init")){const e=i.divisionLine,n=i.rowHeight,o=s.cssCursor||"outline: 1px solid rgb(80,135,215); outline-offset: -1px;",a=s.cssActive||"filter: brightness( 80%);",c=s.cssLine||"filter: brightness( 90%);",h=s.cssShadow||"filter: brightness( 75%);",u=s.cssData||"background-color: rgb(255,255,255);",p=s.cssHeading||"text-align: center; "+u,f=s.cssFooting||u;d[0].textContent=`\n:host {\n  --gap-color:   var( --tds-gap-color, rgb(218,218,218) ) !important;\n  --fixed-color: var( --tds-fixed-color, rgb(80,135,215) ) !important;\n  cursor:default !important;\n  contain: layout !important;\n  outline: none !important;\n  position: ${t.parentElement&&"body"===t.parentElement.localName?"fixed":"relative"};\n  width:100%; height:100%;\n  top:  0;\n  left: 0;\n}\n\n.-tds-table {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow: hidden;\n  background: var( --gap-color );\n  width: 100%;\n  height: 100%;\n}\n\n.-tds-heading, .-tds-data, .-tds-footing {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n.-tds-data { flex: 1;  height: 100%; }\n.-tds-heading, .-tds-footing { flex-shrink: 0; }\n.-tds-heading { height: ${i.headingHeight}px;}\n.-tds-footing { height: ${i.footingHeight}px; }\n\n.-tds-left, .-tds-slide, .-tds-right {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n}\n.-tds-left, .-tds-right { flex-shrink: 0; }\n.-tds-slide { flex:1; }\n\n\n.-tds-roll { position: absolute; }\n.-tds-data .-tds-roll {\n  display: grid;\n  grid-auto-rows: ${n}px;\n  row-gap: ${l}px;\n}\n.-tds-heading .-tds-roll, .-tds-footing .-tds-roll {\n  height: 100%;\n}\n\n.-tds-row, .-tds-heading-row, .-tds-footing-row {\n  display: grid;\n  column-gap: ${r}px;\n}\n.-tds-heading-row {\n  box-sizing: border-box ;\n  overflow: hidden;\n  border-bottom: ${e}px solid var( --gap-color );\n}\n.-tds-footing-row {\n  box-sizing: border-box ;\n  overflow: hidden;\n  border-top: ${e}px solid var( --gap-color );\n}\n\n.-tds-cell {\n  overflow: hidden;\n  padding: 2px;\n  user-select: none;\n }\n.-tds-data .-tds-cell {\n  contain: layout;\n  ${u}\n}\n.-tds-data .-tds-cell[hidden] {\n  display: none;\n}\n.-tds-heading-col { ${p} }\n.-tds-heading-col[hidden] {\n  display: none;\n}\n.-tds-footing-col { ${f} }\n.-tds-footing-col[hidden] {\n  display: none;\n}\n.-tds-data .-tds-line .-tds-cell { ${c} }\n.-tds-data .-tds-line .-tds-col-shadow, .-tds-col-shadow {\n  ${h}\n}\n.-tds-data .-tds-line .-tds-cursor {\n  ${o}\n}\n.-tds-data .-tds-line .-tds-active {\n  ${a}\n}\n\n.-tds-type-string  {}\n.-tds-type-number  { text-align: right;  }\n.-tds-type-boolean { text-align: center; }\n.-tds-type-object  {}\n}`}if(e.includes("cols")){let e={dataLeft:"",dataSlide:"",dataRight:""},i={dataLeft:"",dataSlide:"",dataRight:""},s={dataLeft:-r,dataSlide:-r,dataRight:-r},l="";for(let a=0;a<o.length;a++){let d=o[a],c=n[d].width,h=a<t.xLeft?"dataLeft":a<t.xRight?"dataSlide":"dataRight";e[h]+="col"+d+" ",i[h]+=c+"px ",s[h]+=c+r,l+=`.-tds-cell[data-col="${d}"] { grid-area: col${d}; }`}let a=0;if(["dataLeft","dataSlide","dataRight"].forEach((e=>{s[e]>0?a+=s[e]+("dataSlide"===e?0:r):s[e]=0})),"auto"===t.param.lgxy&&!t.lgxy.param.xSide.includes("none")){let e=a<t.links.client.tdsWidth;e!==t.lgxy.param.xHide&&(t.lgxy.param.xHide=e)}s.dataLeft&&(l+=`\n.-tds-left {\n  width: ${s.dataLeft}px;\n  min-width: ${Math.min(20,s.dataLeft)}px;\n  max-width: calc(100% - ${Math.min(20,s.dataSlide)+Math.min(20,s.dataRight)}px);\n  border-right: ${r}px solid var(--fixed-color);\n}\n.-tds-left .-tds-roll {right: 0;}\n\n.-tds-heading .-tds-left .-tds-heading-row,\n.-tds-footing .-tds-left .-tds-footing-row,\n.-tds-data .-tds-left .-tds-row {\n  grid-template-areas: "${e.dataLeft}";\n  grid-template-columns: ${i.dataLeft};\n}`),s.dataSlide&&(l+=`\n.-tds-slide { min-width: ${Math.min(20,s.dataSlide)}px; }\n.-tds-heading .-tds-slide .-tds-heading-row,\n.-tds-footing .-tds-slide .-tds-footing-row,\n.-tds-data    .-tds-slide .-tds-row {\n  grid-template-areas: "${e.dataSlide}";\n  grid-template-columns: ${i.dataSlide};\n}`),s.dataRight&&(l+=`\n.-tds-right {\n  width: ${s.dataRight}px;\n  min-width: ${Math.min(20,s.dataRight)}px;\n  max-width: calc(100% - ${Math.min(20,s.dataSlide)}px);\n  border-left: ${r}px solid var(--fixed-color) ;\n}\n.-tds-heading .-tds-right .-tds-heading-row,\n.-tds-footing .-tds-right .-tds-footing-row,\n.-tds-data .-tds-right .-tds-row {\n\n  grid-template-areas: "${e.dataRight}";\n  grid-template-columns: ${i.dataRight};\n}`),d[1].textContent=l}if(e.includes("scroll")&&t.render>0){if(e.includes("scroll-row")){if("auto"===t.param.lgxy&&!t.lgxy.param.ySide.includes("none")){let e=t.paramRoll.rows===t.listY.length&&t.paramRoll.hideRow<=0;e!==t.lgxy.param.yHide&&(t.lgxy.param.yHide=e)}d[2].textContent=`.-tds-data .-tds-roll { top: ${-s.top}px; }`}if(e.includes("scroll-col")&&a.currentCell){let e=+a.currentCell.dataset.col,i=o.indexOf(e),l=a.client.tdsWidth,c=0,h=-r;for(let e=t.xLeft;e<t.xRight;e++){let t=n[o[e]].width+r;e<i&&(c+=t),h+=t}let u=s.left,p=Math.max(0,c+n[e].width-l);p>c&&(p=c),(u<p||u>c)&&(u=p),u=Math.max(0,u-Math.max(0,l-(h-u))),s.left=u,d[3].textContent=`.-tds-slide .-tds-roll { left: ${-u}px; }`}}}}window.customElements.define("tds-box",s)},h=()=>{const e=document.querySelector(".portfolio-slider-wrap"),t=e.querySelector(".portfolio-wrap-desktop"),i=t.querySelector(".portfolio-slider"),l=i.querySelectorAll(".portfolio-slider__slide-frame"),n=e.querySelector(".portfolio-wrap-mobile"),o=n.querySelector(".portfolio-slider-mobile"),a=o.querySelectorAll(".portfolio-slider__slide-frame"),d=a.length,c=d/2,h=e.querySelector("#portfolio-arrow_left"),u=e.querySelector("#portfolio-arrow_right"),p=e.querySelector("#portfolio-arrow-mobile_left"),f=e.querySelector("#portfolio-arrow-mobile_right"),m=n.querySelector(".slider-counter"),g=m.querySelector(".slider-counter-content__current"),y=m.querySelector(".slider-counter-content__total"),x=()=>{const e=-parseInt(i.style.left),s=i.currentWidth/c,r=Math.ceil((document.portfolioCurrentSlide+1)/2),l=Math.max(0,r*s-t.currentWidth),n=(r-1)*s-Math.max(0,t.currentWidth-(c-r+1)*s);e<l?i.style.left=-l+"px":e>n&&(i.style.left=-n+"px")},w=()=>{x(),o.style.left=100*-document.portfolioCurrentSlide+"%",g.textContent=document.portfolioCurrentSlide+1,h.classList.remove("hide"),u.classList.remove("hide"),p.classList.remove("hide"),f.classList.remove("hide"),document.portfolioCurrentSlide<2&&h.classList.add("hide"),document.portfolioCurrentSlide>d-3&&u.classList.add("hide"),0===document.portfolioCurrentSlide&&p.classList.add("hide"),document.portfolioCurrentSlide===d-1&&f.classList.add("hide")};e.addEventListener("click",(l=>{const n=l.target.closest(".mobile-hide");let a;(a=l.target.closest(".slider-arrow"))?n?(e=>{const r=-parseInt(i.style.left),l=i.currentWidth/c;let n,o;e>0?(n=Math.min(c,Math.round((r+t.currentWidth+l)/l)),o=r+(t.currentWidth-n*l)):(n=Math.max(1,Math.round(r/l)),o=r-(n-1)*l),document.portfolioCurrentSlide=2*(n-1)+(document.portfolioCurrentSlide%2?1:0),s({timingplane:"easeInOutCubic",duration:400,draw(e){i.style.left=o*e-r+"px",1===e&&w()}})})(a.classList.contains("slider-arrow_right")?1:-1):(e=>{const t=-100*document.portfolioCurrentSlide,i=-100*e;document.portfolioCurrentSlide=e>0?Math.min(d-1,document.portfolioCurrentSlide+1):Math.max(0,document.portfolioCurrentSlide-1),s({timingplane:"easeInOutCubic",duration:400,draw(e){o.style.left=t+i*e+"%",1===e&&w()}})})(a.classList.contains("slider-arrow_right")?1:-1):(a=l.target.closest(".portfolio-slider__slide-frame"))&&(document.portfolioCurrentSlide=a.number,((e,t)=>{const i=document.querySelector(".popup-portfolio"),l=i.querySelector(".popup-portfolio-slider"),n=i.querySelector(".popup-portfolio-slider-text"),o=l.querySelectorAll(".popup-portfolio-slider__slide").length,a=i.querySelector(".nav-arrow_left"),d=i.querySelector(".nav-arrow_right"),c=i.querySelector(".slider-counter"),h=c.querySelector(".slider-counter-content__current"),u=c.querySelector(".slider-counter-content__total"),p=()=>{l.style.left=100*-document.portfolioCurrentSlide+"%",n.style.left=100*-document.portfolioCurrentSlide+"%",h.textContent=document.portfolioCurrentSlide+1,a.classList.remove("hide"),d.classList.remove("hide"),0===document.portfolioCurrentSlide&&a.classList.add("hide"),document.portfolioCurrentSlide===o-1&&d.classList.add("hide")},f=a=>{let d;(d=a.target.closest(".nav-arrow"))?(e=>{const t=-100*document.portfolioCurrentSlide,i=-100*e;document.portfolioCurrentSlide=e>0?Math.min(o-1,document.portfolioCurrentSlide+1):Math.max(0,document.portfolioCurrentSlide-1),s({timingplane:"easeInOutCubic",duration:400,draw(e){l.style.left=t+i*e+"%",n.style.left=t+i*e+"%",1===e&&p()}})})(d.classList.contains("nav-arrow_right")?1:-1):(a.target.closest(".close")||a.target.closest(".popup")&&a.target.classList.contains("active-popup"))&&(i.removeEventListener("click",f),e.classList.remove("hide"),t(),r(".portfolio-title"))};i.addEventListener("click",f),u.textContent=`${o}`,p(),e.classList.add("hide")})(e,w),document.modalList.open("popup-portfolio"))})),e.resizeObserver=new window.ResizeObserver((e=>{e.forEach((e=>{const i=e.borderBoxSize?Math.round(e.borderBoxSize[0].inlineSize):Math.round(e.contentRect.width),s=i-(e.target.currentWidth||0);e.target.currentWidth=i,e.target===t&&i&&s&&x()}))})),e.resizeObserver.observe(i),e.resizeObserver.observe(t),y.textContent=`${d}`,document.portfolioCurrentSlide=0,i.style.left="0px",l.forEach(((e,t)=>e.number=t)),a.forEach(((e,t)=>e.number=t))},u=()=>{const e=document.querySelector(".reviews"),t=e.querySelector(".slider-arrow_right"),i=e.querySelector(".slider-arrow_left"),r=e.querySelector(".reviews-slider"),l=r.querySelectorAll(".reviews-slider__slide").length;let n=0;e.addEventListener("click",(({target:e})=>{let o;(o=e.closest(".slider-arrow"))&&(e=>{const o=-100*n,a=-100*e;n=e>0?Math.min(l-1,n+1):Math.max(0,n-1),s({timingplane:"easeInOutCubic",duration:400,draw(e){r.style.left=o+a*e+"%",1===e&&(r.style.left=100*-n+"%",i.classList.remove("hide"),t.classList.remove("hide"),0===n&&i.classList.add("hide"),n===l-1&&t.classList.add("hide"))}})})(o.classList.contains("slider-arrow_right")?1:-1)}))},p=(e,t,i)=>{e.classList.remove("hide"),t.classList.remove("hide"),0===document.transparencyCurrentSlide&&e.classList.add("hide"),document.transparencyCurrentSlide===i-1&&t.classList.add("hide")},f=()=>{const e=document.querySelector(".transparency-slider"),t=e.querySelector("#transparency-arrow_right"),i=e.querySelector("#transparency-arrow_left"),l=e.querySelector(".transparency-slider-wrap").querySelector(".row"),n=l.querySelectorAll(".transparency-item"),o=n.length,a=()=>{l.style.left=100*-document.transparencyCurrentSlide+"%",p(i,t,o)};e.addEventListener("click",(t=>{let i;(i=t.target.closest(".slider-arrow"))?(e=>{const t=-100*document.transparencyCurrentSlide,i=-100*e;document.transparencyCurrentSlide=e>0?Math.min(o-1,document.transparencyCurrentSlide+1):Math.max(0,document.transparencyCurrentSlide-1),s({timingplane:"easeInOutCubic",duration:400,draw(e){l.style.left=t+i*e+"%",1===e&&a()}})})(i.classList.contains("slider-arrow_right")?1:-1):(i=t.target.closest(".transparency-item"))&&(document.transparencyCurrentSlide=i.number,((e,t)=>{const i=document.querySelector(".popup-transparency"),l=i.querySelector(".nav-arrow_right"),n=i.querySelector(".nav-arrow_left"),o=i.querySelector(".popup-transparency-slider"),a=o.querySelectorAll(".popup-transparency-slider__slide").length,d=i.querySelector("#transparency-popup-counter"),c=d.querySelector(".slider-counter-content__current"),h=d.querySelector(".slider-counter-content__total"),u=()=>{o.style.left=100*-document.transparencyCurrentSlide+"%",c.textContent=document.transparencyCurrentSlide+1,p(n,l,a)},f=l=>{let n;(n=l.target.closest(".nav-arrow"))?(e=>{const t=-100*document.transparencyCurrentSlide,i=-100*e;document.transparencyCurrentSlide=e>0?Math.min(a-1,document.transparencyCurrentSlide+1):Math.max(0,document.transparencyCurrentSlide-1),s({timingplane:"easeInOutCubic",duration:400,draw(e){o.style.left=t+i*e+"%",1===e&&u()}})})(n.classList.contains("nav-arrow_right")?1:-1):(l.target.closest(".close")||l.target.closest(".popup")&&l.target.classList.contains("active-popup"))&&(i.removeEventListener("click",f),e.classList.remove("hide"),t(),r(".transparency-title"))};i.addEventListener("click",f),h.textContent=`${a}`,u(),e.classList.add("hide")})(e,a),document.modalList.open("popup-transparency"))})),n.forEach(((e,t)=>e.number=t)),document.transparencyCurrentSlide=0,a()};class m{constructor(){const e=document.createElement("div"),t=document.createElement("div");let i=document.createElement("div");e.classList.add("preloader"),t.classList.add("preloader__row"),i.classList.add("preloader__item"),t.append(i),t.append(i.cloneNode(!1)),e.append(t),document.querySelector("body").append(e),this._preloader=e}start(){this._preloader.classList.add("working")}stop(){window.setTimeout((()=>{this._preloader.classList.remove("working")}),500)}}!async function(){c(),await customElements.whenDefined("tds-box"),(()=>{const e=document.querySelector(".popup-menu"),t=e.querySelector(".popup-dialog-menu");document.querySelector("body").addEventListener("click",(i=>{let s,l,n=null;i.target.closest(".menu")&&!i.target.closest(".menu-phone-icon")||i.target.closest(".close-menu")||(n=i.target.closest(".popup-menu-nav__item"))||(s=i.target.closest(".link-list-menu"))||!i.target.closest(".popup-dialog-menu")&&e.classList.contains("active-popup")?(i.preventDefault(),e.classList.contains("active-popup")?(t.classList.remove("active-menu"),window.setTimeout((()=>{e.classList.remove("active-popup")}),1e3)):(e.classList.add("active-popup"),window.setTimeout((()=>{t.classList.add("active-menu")}),0))):(l=i.target.closest(".button-footer"))?(i.preventDefault(),r(l.firstElementChild.getAttribute("href"))):i.target.closest(".link-privacy")?document.modalList.open("popup-privacy"):i.target.closest(".button_wide")?document.modalList.open("popup-consultation"):(s=i.target.closest(".link-list-repair"))||(i.target.closest(".popup .close")||i.target.closest(".popup")&&i.target.classList.contains("active-popup"))&&document.modalList.close(i.target.closest(".popup")),n&&(i.preventDefault(),r(n.firstElementChild.getAttribute("href"))),s&&document.modalList.open("popup-repair-types")})),document.querySelector("body").addEventListener("submit",(e=>{e.preventDefault(),document.sendForm.send(e.target)}))})(),document.modalList=new e("popup","active-popup"),document.preloader=new m,(()=>{const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),i=t.querySelector(".header-contacts__phone-number");e.addEventListener("click",(()=>{e.classList.toggle("open"),t.classList.toggle("open"),i.classList.toggle("open")}))})(),(()=>{const e=document.querySelector("body"),t=/[^а-яё\s\-]+/gi,s=/(^[\s\-]+|^)(.*?)(?:([\s\-]+$)|$)/i,r=/(\s{2,})|(-{2,})/g,l=/((^|\s-|\s|-)[а-я])([а-я]*)/gi;document.querySelectorAll('input[name="phone"]').forEach((e=>{e.maskPhone=new i("+7 (ddd) ddd-dd-dd")})),e.addEventListener("input",(e=>{e.target instanceof HTMLElement&&(e.target.closest('input[name="phone"]')?(e.target.maskPhone.edit(e.target,e.inputType),e.target.classList.remove("error-input")):e.target.closest(".feedback-block__form-input_name")?(e.target.value=e.target.value.replace(t,""),e.target.classList.remove("error-input")):e.target.closest(".checkbox__input")&&e.target.parentNode.classList.remove("error-input"))})),e.addEventListener("focusout",(({target:e})=>{if(e.closest(".feedback-block__form-input_name")){let t=e.value;t=t.replace(l,((e,t,i,s)=>t.toUpperCase()+s.toLowerCase())),t=t.replace(s,((e,t,i)=>`${i}`)),t=t.replace(r,((e,t,i)=>(t?" ":"")+(i?"-":""))),e.value=t}})),e.addEventListener("cut",(e=>{e.target.closest('input[name="phone"]')&&e.preventDefault()})),e.addEventListener("paste",(e=>{e.target.closest('input[name="phone"]')&&e.preventDefault()}))})(),document.sendForm=new l({url:"https://jsonplaceholder.typicode.com/posts",optionals:{feedback1:[{name:"form",assign:"feedback1"}],feedback2:[{name:"form",assign:"feedback2"}],feedback3:[{name:"form",assign:"feedback3"}],feedback4:[{name:"form",assign:"feedback4"}],feedback5:[{name:"form",assign:"feedback5"}],feedback6:[{name:"form",assign:"feedback6"}]}}),(()=>{const e=document.querySelector(".formula"),t=e.querySelector(".formula-slider"),i=e.querySelectorAll(".formula-slider__slide"),r=e.querySelector("#formula-arrow_left"),l=e.querySelector("#formula-arrow_right");let n=null,o=1;i[0].classList.add("active-item"),r.classList.add("hide"),e.addEventListener("mouseover",(({target:e})=>{if(e.closest(".formula-item__icon")){n&&n.classList.remove("active-item","rotate"),n=e.classList.contains("formula-item__icon")?e.parentElement:e.parentElement.parentElement;const t=n.querySelector(".formula-item-popup"),i=n.getBoundingClientRect().top>t.offsetHeight;n.classList.add("active-item"),i&&n.classList.add("rotate")}})),e.addEventListener("mouseout",(({target:e})=>{e.closest(".formula-item__icon")&&(n&&n.classList.remove("active-item","rotate"),n=null)})),e.addEventListener("click",(({target:e})=>{if(e.closest(".slider-arrow")){const n=-100*(o-1),a=e.closest("#formula-arrow_right")?-100:100;i[o-1].classList.remove("active-item"),a<0?o++:o--,r.classList.remove("hide"),l.classList.remove("hide"),1===o&&r.classList.add("hide"),6===o&&l.classList.add("hide"),s({timingplane:"easeInOutCubic",duration:500,draw(e){t.style.left=n+a*e+"%",1===e&&i[o-1].classList.add("active-item")}})}}))})(),(()=>{const e=document.getElementById("repair-types"),t=e.querySelector(".nav-list-repair"),i=[...e.querySelectorAll(".repair-types-nav__item")],r=e.querySelector(".slider-arrow_left"),l=e.querySelector(".slider-arrow_right"),n=e.querySelector(".nav-arrow_left"),o=e.querySelector(".nav-arrow_right"),a=e.querySelector(".slider-counter-responsive"),d=a.querySelector(".slider-counter-content__current"),c=a.querySelector(".slider-counter-content__total"),h=e=>+e.className.replace(/\D+/g,"")-1;let u=null;const p=()=>{r.classList.remove("hide"),l.classList.remove("hide"),0===u.currentSlide&&r.classList.add("hide"),u.currentSlide+1===u.slides.length&&l.classList.add("hide")},f=e=>{e!==u&&(u&&(u.slides[u.currentSlide].classList.remove("repair-slide-current"),u.classList.remove("active")),u=e,u.classList.add("active"),u.slides[u.currentSlide].classList.add("repair-slide-current"),d.textContent=`${u.currentSlide+1}`,c.textContent=`${u.slides.length}`,p(),t.style.left=-100*h(u)+"%",(()=>{const e=h(u);n.classList.remove("hide"),o.classList.remove("hide"),0===e&&n.classList.add("hide"),e===i.length-1&&o.classList.add("hide")})())};e.addEventListener("click",(e=>{let r;var l;(r=e.target.closest(".repair-types-nav__item"))?f(r):(r=e.target.closest(".slider-arrow"))?(l=r.classList.contains("slider-arrow_right")?1:-1,u.slides[u.currentSlide].classList.remove("repair-slide-current"),u.currentSlide=l>0?Math.min(u.slides.length-1,u.currentSlide+1):Math.max(0,u.currentSlide-1),u.slides[u.currentSlide].classList.add("repair-slide-current"),d.textContent=`${u.currentSlide+1}`,p()):(r=e.target.closest(".nav-arrow"))&&(e=>{const r=h(u),l=-100*r,n=-100*e;s({timingplane:"easeInOutCubic",duration:300,draw(s){t.style.left=l+n*s+"%",1===s&&f(i[r+e])}})})(r.classList.contains("nav-arrow_right")?1:-1)})),i.forEach(((t,i)=>{t.slides=[],t.sliders=e.querySelector(".types-repair"+(i+1)),t.currentSlide=0,t.sliders.querySelectorAll(".repair-types-slider__slide").forEach((e=>{t.slides.push(e)}))})),f(i[0])})(),document.taskDemo=0,document.dataCatalog=new t({url:"http://localhost:4545/items",urlDemo:"./db-demo/items.json",errorMessageResponse:"Сервер базы данных недоступен. Запрос отменен."}),(()=>{const e=document.querySelector(".popup-repair-types"),t=e.querySelector(".nav-list-popup-repair"),i=e.querySelector(".popup-repair-types-content__head-title"),r=e.querySelector("#catalog"),l=e.querySelector(".nav-arrow_left"),n=e.querySelector(".nav-arrow_right"),o=e=>+e.className.replace(/\D+/g,"")-1;let a=null;const d=(e,t)=>{const i=e.querySelector(".icon-sort");i&&(t||=i.classList.contains("asc")?"desc":i.classList.contains("desc")?"none":"asc",r.shadowRoot.querySelectorAll(".icon-sort").forEach((e=>{e.classList.remove("asc","desc")})),"none"===t?r.records.sortOff():"asc"===t?(i.classList.add("asc"),r.records.sort("",1)):(i.classList.add("desc"),r.records.sort("",-1)))},c=s=>{var c;s!==a&&(a&&a.classList.remove("active"),a=s,a.classList.add("active"),i.textContent=a.textContent.trim(),c=a.textContent.trim(),r.data=e.data.filter((e=>e.type===c)),d(r.shadowRoot.querySelector(".column-head"),"asc"),r.y=0,t.style.left=-100*o(a)+"%",(()=>{const e=o(a);l.classList.remove("hide"),n.classList.remove("hide"),0===e&&l.classList.add("hide"),e===t.childElementCount-1&&n.classList.add("hide")})())};e.addEventListener("click",(({target:e})=>{let i;(i=e.closest(".popup-repair-types-nav__item"))?c(i):(i=e.closest(".nav-arrow"))&&(e=>{const i=o(a),r=-100*i,l=-100*e;s({timingplane:"easeInOutCubic",duration:300,draw(s){t.style.left=r+l*s+"%",1===s&&c(t.children[i+e])}})})(i.classList.contains("nav-arrow_right")?1:-1)})),r.shadowRoot.addEventListener("click",(({target:e})=>{const t=e.closest(".column-head");t&&d(t)})),(e=>{e.use({data:[],headingHeight:50,rowHeight:50,gapCol:0,hrefCSS:"./css/catalogHidden.css",columns:[{id:"name",width:345,widthMin:343,widthMax:343,when:()=>!0,head:()=>'<div class="column-head">Виды работ<span class="icon-sort">&#129093</span></div>',cell:"name"},{id:"units",width:100,widthMin:100,widthMax:100,when:()=>!0,head:()=>'\n          <div class="column-head">\n            <div class="min-width">Единицы измерения</div>\n            <span class="icon-sort">&#129093</span>\n          </div>',cell:"units",cellSay:e=>`<span class="units">${e.units}</span>`},{id:"cost",width:100,widthMin:100,widthMax:100,when:()=>!0,head:()=>'\n          <div class="column-head">\n            <div class="min-width">Цена за единицу</div>\n            <span class="icon-sort">&#129093</span>\n          </div>',cell:e=>+(e.cost+"").replace(/\D+/g,""),cellSay:e=>`<span class="cost">${e.cost} руб</span>`},{id:"mini",width:300,widthMin:300,widthMax:300,when:()=>!0,head:" ",cellSay:e=>`<div class="mini-cell"><div class="mini-title">вид работы:</div><div class="mini-name">${e.name}</div><div class="mini-block"><div class="mini-units"><div class="mini-title mini-title-units">единица измерения:</div><div>${e.units}</div></div><div class="mini-cost"><div class="mini-title mini-title-cost">цена за единицу:</div><div>${e.cost} руб</div></div></div></div>`,hidden:!0}]})})(r),r.resize=e=>{const t=r.bigSize;t&&e<500?(r.columns.hiddenOff(3),r.columns.hidden(0),r.columns.hidden(1),r.columns.hidden(2),r.param.group={headingHeight:2,rowHeight:60},r.bigSize=!1):!t&&e>499&&(r.columns.hiddenOff(0),r.columns.hiddenOff(1),r.columns.hiddenOff(2),r.columns.hidden(3),r.param.group={headingHeight:50,rowHeight:50},r.bigSize=!0)},r.lgxy.param.xSide="none",r.bigSize=!0,document.dataCatalog.use().then((i=>{e.data=i,(()=>{const i=new Set;let s="";e.data.forEach((e=>i.add(e.type))),[...i].sort().forEach(((e,t)=>{s+=`\n      <button class="button_o popup-repair-types-nav__item popup__item_${t+1}">${e}\n        <svg width="259" height="46" fill="none" viewBox="0 0 259 46" preserveAspectRatio="none">\n          <path d="M33.5 1h-10c-12.15 0-22 9.85-22 22s9.85 22 22 22h187M48.5 1h187c12.15 0 22 9.85 22 22s-9.85 22-22 22h-17.1" stroke="#EEEBE5" stroke-width="2" stroke-linecap="round"></path>\n        </svg>\n      </button>`})),t.innerHTML=s,t.style.width=100*t.childElementCount+"%",c(t.firstElementChild)})()}))})(),h(),u(),f(),(()=>{const e=document.querySelector(".accordion"),t=[...e.children];let i=-1;e.addEventListener("click",(e=>{const s=e.target.closest("h2");s&&(e=>{const s=t.findIndex((t=>t===e)),l="accordion-more-active",n=~i?t[i].firstElementChild.nextElementSibling:null,o=i===s?null:e.firstElementChild.nextElementSibling;~i&&(i<s&&(n.style.transition="max-height 0s ease-out",window.scrollTo(0,window.scrollY-parseInt(n.style.maxHeight))),t[i].classList.remove(l),n.style.maxHeight=""),i===s?i=-1:(e.classList.add(l),o.style.maxHeight=o.scrollHeight+"px",window.setTimeout((()=>{r(".accordion-more-active",500),~i&&(n.style.transition=""),i=s}),0))})(s.parentElement)}))})()}()})();