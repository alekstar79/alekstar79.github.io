(function(){"use strict";var e={8219:function(e,t,r){var s=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("main",{attrs:{id:"app"}},[t(r.AppHeader),r.show?[t(r.AppBody)]:e._e()],2)},a=[];const o="fetchApplicantsList",n="setApplicantsList",c="setScreenMode",l="toggleSort";var i=r(6318);class u{static read(){return JSON.parse(localStorage.getItem(u.KEY)||"{}")}static write(e){const t=JSON.parse(localStorage.getItem(u.KEY)||"{}");Object.assign(t,e),localStorage.setItem(u.KEY,JSON.stringify(t))}}(0,i.Z)(u,"KEY","sort");const p={RED:{MIN:0,MAX:50},ORANGE:{MIN:51,MAX:75},GREEN:{MIN:76,MAX:100}},d={RED:"#FF0000",ORANGE:"#FFA200",GREEN:"#01AA88"},_={day:"2-digit",month:"2-digit",year:"numeric"},m={lang:0,math:1,comp:2},f=360,v=15,g=5,y={name:"ФИО",date:"Дата подачи заявления",lang:"Балл по русскому",math:"Балл по математике",comp:"Балл по информатике",total:"Суммарный балл",percent:"Процент"},h={PERCENT:"percent",TOTAL:"total",NAME:"name",DATE:"date",LANG:"lang",MATH:"math",COMP:"comp"};var w=r(408),b=r(7195);b.ZP.use(w.ZP);const x=(e,t)=>({...e,[t]:"asc"}),C=u.read();C.by||Object.assign(C,{...Object.values(h).reduce(x,{}),by:"name"});const A=new w.ZP.Store({state:()=>({endpoint:"/api/v1/applicants.json",isMobile:!0,orderBy:C,list:[]}),getters:{isMobile:e=>e.isMobile,orderBy:e=>e.orderBy,applicants:e=>e.list},mutations:{[l](e,t){const{by:r,...s}=e.orderBy,a=t.order?{by:r,...Object.keys(s).reduce(((e,r)=>({...e,[r]:t.order})),{})}:{...e.orderBy,...t};u.write(a),e.orderBy=a},[n](e,t){e.list=t},[c](e,t){e.isMobile=t}},actions:{async[o]({state:e,commit:t}){const r=await fetch(e.endpoint),s=await r.json();t(n,s.map((e=>{const[t,r,s]=e.subjects;return t.mark="lang",r.mark="math",s.mark="comp",e.subjects=[t,r,s],e})))}}}),O=()=>A;var B=A;function E(){const e=O(),t=async()=>{await e.dispatch(o)};return{fetchApplicantsList:t}}var L=function(e,t){return t._m(0)},k=[function(e,t){return e("header",{staticClass:"header-container header-container--sticky"},[e("section",{staticClass:"container"},[e("figure",{staticClass:"header-container__logo"},[e("img",{staticClass:"header-container__image",attrs:{src:r(9574),alt:"Logo",width:"41",height:"33"}}),e("figcaption",[t._v(" Система таблиц ")])]),e("figure",{staticClass:"header-container__employee"},[e("figcaption",[t._v(" Светлана "),e("span",[t._v("Сотрудник")])]),e("img",{staticClass:"header-container__image",attrs:{src:r(4937),alt:"Logo",width:"44",height:"44"}})])])])}],M=r(1001),S={},D=(0,M.Z)(S,L,k,!0,null,"35041355",null),P=D.exports,j=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("section",{staticClass:"container"},[t("h1",{staticClass:"applicants__title"},[e._v("Список заявлений")]),t("applicants-search",{staticClass:"applicants__finder"},[t("img",{staticClass:"applicants__search-icon",attrs:{src:r(9262),alt:"Search",height:"15",width:"15"}}),t("input",{attrs:{placeholder:"Поиск",type:"text"},on:{input:s.searchHandler}})]),t("applicants-list",{staticClass:"applicants__list"},[s.isMobile?[t(s.PortraitHeader),t(s.PortraitBody)]:[t(s.LandscapeHeader),t(s.LandscapeBody)]],2)],1)},N=[],T=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("list-item",{staticClass:"applicants__list-header applicants__list-header--landscape"},[t("item-cell",{staticClass:"cell cell__name",on:{click:function(e){return r.toggleSort("name")}}},[t("summary",[e._v(e._s(r.convert("name")))]),"name"===r.orderBy.by?[t(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:e._e()],2),t("item-cell",{staticClass:"cell cell__date",on:{click:function(e){return r.toggleSort("date")}}},[t("summary",[e._v(e._s(r.convert("date")))]),"date"===r.orderBy.by?[t(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:e._e()],2),e._l(["lang","math","comp"],(function(s,a){return[t("item-cell",{key:`${s}-${a}`,class:`cell cell__score cell__score--${s}`,on:{click:function(e){return r.toggleSort(s)}}},[t("summary",[e._v(e._s(r.convert(s)))]),r.orderBy.by===s?[t(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:e._e()],2)]})),t("item-cell",{staticClass:"cell cell__total",on:{click:function(e){return r.toggleSort("total")}}},[t("summary",[e._v(e._s(r.convert("total")))]),"total"===r.orderBy.by?[t(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:e._e()],2),t("item-cell",{staticClass:"cell cell__percent",on:{click:function(e){return r.toggleSort("percent")}}},[t("summary",[e._v(e._s(r.convert("percent")))]),"percent"===r.orderBy.by?[t(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:e._e()],2)],2)},H=[];const R=e=>[].concat(e.map(Z));function Z({subjects:e,...t}){return Object.assign({},t,e&&{subjects:R(e)})}function F(){const e=O(),t=R(e.getters.applicants),r=(0,b.Fl)((()=>e.getters.orderBy)),s=(0,b.Fl)({set(t){e.commit(n,t)},get(){return e.getters.applicants}}),a=e=>y[e],o=(e,t)=>(e+=+t.score,e),c=({subjects:e})=>e.reduce(o,0),i=({subjects:e})=>{const t=100*c({subjects:e})/v;return+t.toFixed(0)},u=e=>new Date(e).toLocaleString("ru-RU",_),f=e=>e.sort(((e,t)=>e.name.localeCompare(t.name))),g=e=>e.sort(((e,t)=>new Date(e.date)-new Date(t.date))),w=(e,t)=>{const r=m[t];return e.sort(((e,t)=>Number(e.subjects[r].score)-Number(t.subjects[r].score)))},x=(e,t)=>{const r="total"===t?c:i;return e.sort(((e,t)=>r(e)-r(t)))},C=(e,t,r)=>{switch(r||="asc",t||="name",t){case h.LANG:case h.MATH:case h.COMP:e=w(e,t);break;case h.PERCENT:case h.TOTAL:e=x(e,t);break;case h.NAME:e=f(e);break;case h.DATE:e=g(e);break}return"desc"===r?e.reverse():e},A=()=>C(s.value,r.value.by,r.value[r.value.by]),B=t=>{e.commit(l,{by:t,[t]:"asc"===r.value[t]?"desc":"asc"})},E=t=>{e.commit(l,{order:t})},L=t=>{e.commit(l,{by:t})},k=({target:e})=>{const r=e.value.toLowerCase();s.value=t.filter((({name:e})=>e.toLowerCase().includes(r))),s.value=A()},M=(e,t,r)=>e>=t&&e<=r,S=(e,t)=>{e*=100/t;let r,s=d.RED;return Object.entries(p).some((([t,{MIN:s,MAX:a}])=>!!M(e,s,a)&&(r=t,!0)))&&(s=d[r]),s};return(0,b.YP)(r,(()=>{s.value=A()}),{immediate:!0}),{orderBy:r,listOfApplicants:s,searchHandler:k,localeDate:u,toggleSort:B,setOrder:E,setSort:L,getColor:S,convert:a,percent:i,total:c}}var X=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"order__arrow",class:{offset:e.offset}},["asc"===e.order?t("svg",{staticClass:"order__arrow--asc",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",height:"8",width:"8"}},[t("path",{attrs:{d:"M4 8L7.5 4L0.5 4L4 8Z"}}),t("path",{attrs:{d:"M4 0L4 4","stroke-width":"2"}})]):t("svg",{staticClass:"order__arrow--desc",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",height:"8",width:"8"}},[t("path",{attrs:{d:"M3.5 0.5L7 4.5L-1.74846e-07 4.5L3.5 0.5Z"}}),t("path",{attrs:{d:"M3.5 8.5L3.5 4.5","stroke-width":"2"}})])])},$=[],G={__name:"OrderArrow",props:{offset:{type:Boolean,default:!0},order:{type:String,required:!0}},setup(e){return{__sfc:!0}}},I=G,K=(0,M.Z)(I,X,$,!1,null,"515c3854",null),Y=K.exports,q={__name:"LandscapeHeader",setup(e){const{orderBy:t,toggleSort:r,convert:s}=F();return{__sfc:!0,orderBy:t,toggleSort:r,convert:s,OrderArrow:Y}}},J=q,W=(0,M.Z)(J,T,H,!1,null,null,null),U=W.exports,z=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",{staticClass:"list__wrapper"},e._l(r.listOfApplicants,(function(s){return t("list-item",{key:s.id,staticClass:"applicants__list-item",attrs:{set:r.totalScore=r.total(s)}},[t("item-cell",{staticClass:"cell cell__name"},[e._v(" "+e._s(s.name)+" ")]),t("item-cell",{staticClass:"cell cell__date"},[e._v(" "+e._s(r.localeDate(s.date))+" ")]),e._l(s.subjects,(function({score:a,mark:o},n){return[t("item-cell",{key:`${s.id}-${n}`,class:`cell cell__score cell__score--${o}`,style:{color:r.getColor(a,r.MAX_SCORE)}},[e._v(" "+e._s(a)+" ")])]})),t("item-cell",{staticClass:"cell cell__total",style:{color:r.getColor(r.totalScore,r.MAX_TOTAL)}},[e._v(" "+e._s(r.totalScore)+" ")]),t("item-cell",{staticClass:"cell cell__percent"},[t(r.CircularPercentageBar,{attrs:{progress:r.percent(s)}})],1)],2)})),1)},Q=[],V=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("svg",{staticClass:"circle-container",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"2 -2 28 36"}},[t("circle",{staticClass:"circle-container__background",attrs:{cx:"16",cy:"16",r:"16"}}),t("circle",{staticClass:"circle-container__progress",attrs:{cx:"16",cy:"16",r:"16"}}),t("text",{staticClass:"circle-container__text",attrs:{dy:"-13",dx:r.dx}},[e._v(" "+e._s(r.progress)+"% ")])])},ee=[],te={__name:"CircularPercentageBar",props:{progress:{type:Number,required:!0}},setup(e){const t=e;(0,b.sj)(((e,t)=>({b2691ba2:t.stroke,"0ef87e34":t.strokeDashoffset})));const{progress:r}=(0,b.BK)(t),s=(0,b.Fl)((()=>r.value>=100?3.5:6.5)),a=(0,b.Fl)((()=>100-r.value)),o=(0,b.Fl)((()=>r.value<=25?d.RED:r.value<=50?d.ORANGE:d.GREEN));return{__sfc:!0,props:t,progress:r,dx:s,strokeDashoffset:a,stroke:o}}},re=te,se=(0,M.Z)(re,V,ee,!1,null,"130f42e0",null),ae=se.exports,oe={__name:"LandscapeBody",setup(e){let t;const{listOfApplicants:r,localeDate:s,getColor:a,percent:o,total:n}=F();return{__sfc:!0,totalScore:t,listOfApplicants:r,localeDate:s,getColor:a,percent:o,total:n,CircularPercentageBar:ae,MAX_SCORE:g,MAX_TOTAL:v}}},ne=oe,ce=(0,M.Z)(ne,z,Q,!1,null,"409d4a61",null),le=ce.exports,ie=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("section",{staticClass:"applicants__list-header applicants__list-header--portrait"},[t("div",{staticClass:"dropdown"},[t("button",{ref:"dropDownBtn",staticClass:"dropdown__button",attrs:{type:"button"},on:{click:r.toggleDropDown}},[t("sup",[e._v("Сортировать по")]),e._v(" "+e._s(r.convert(r.orderBy.by))+" ")]),t("ul",{ref:"dropDownList",staticClass:"dropdown__list",on:{click:r.closeDropDown}},e._l(r.list,(function({text:s,by:a}){return t("li",{key:a,staticClass:"dropdown__list-item",class:{"dropdown__list-item--active":a===r.orderBy.by},on:{click:function(e){return r.setSort(a)}}},[e._v(" "+e._s(s)+" ")])})),0)]),t("button",{class:{active:"asc"===r.orderBy[r.orderBy.by]},on:{click:function(e){return r.setOrder("asc")}}},[t(r.OrderArrow,{attrs:{order:"asc",offset:!1}})],1),t("button",{class:{active:"desc"===r.orderBy[r.orderBy.by]},on:{click:function(e){return r.setOrder("desc")}}},[t(r.OrderArrow,{attrs:{order:"desc",offset:!1}})],1)])},ue=[],pe={__name:"PortraitHeader",setup(e){const t=Object.entries(y).map((([e,t])=>({text:t,by:e}))),{orderBy:r,convert:s,setSort:a,setOrder:o}=F(),n=(0,b.iH)(null),c=(0,b.iH)(null);function l(){n.value?.classList.toggle("dropdown__list--visible"),c.value?.classList.toggle("dropdown__button--active")}function i(){n.value?.classList.remove("dropdown__list--visible"),c.value?.classList.remove("dropdown__button--active")}return(0,b.bv)((()=>{document.addEventListener("keydown",(e=>{"Escape"===e.key&&i()})),document.addEventListener("click",(e=>{e.target!==c.value&&i()}))})),{__sfc:!0,list:t,orderBy:r,convert:s,setSort:a,setOrder:o,dropDownList:n,dropDownBtn:c,toggleDropDown:l,closeDropDown:i,OrderArrow:Y}}},de=pe,_e=(0,M.Z)(de,ie,ue,!1,null,null,null),me=_e.exports,fe=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",{staticClass:"list__wrapper"},e._l(r.listOfApplicants,(function(s){return t("list-item",{key:s.id,staticClass:"applicants__list-item",attrs:{set:r.totalScore=r.total(s)}},[t("item-cell",{staticClass:"cell cell__name"},[t("summary",[e._v(e._s(r.convert("name")))]),e._v(" "+e._s(s.name)+" ")]),t("item-cell",{staticClass:"cell cell__date"},[t("summary",[e._v(e._s(r.convert("date")))]),e._v(" "+e._s(r.localeDate(s.date))+" ")]),e._l(s.subjects,(function({score:a,mark:o},n){return[t("item-cell",{key:`${s.id}-${n}`,class:`cell cell__score cell__score--${o}`,style:{color:r.getColor(a,r.MAX_SCORE)}},[t("summary",[e._v(e._s(r.convert(o)))]),e._v(" "+e._s(a)+" ")])]})),t("item-cell",{staticClass:"cell cell__total",style:{color:r.getColor(r.totalScore,r.MAX_TOTAL)}},[t("summary",[e._v(e._s(r.convert("total")))]),e._v(" "+e._s(r.totalScore)+" ")]),t("item-cell",{staticClass:"cell cell__percent"},[t("summary",[e._v(e._s(r.convert("percent")))]),t(r.LinearPercentageBar,{attrs:{progress:r.percent(s)}})],1)],2)})),1)},ve=[],ge=function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("span",{staticClass:"linear-bar"},[e._v(" "+e._s(r.progress)+"% "),t("svg",{staticClass:"line-container",attrs:{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:"0 0 100 14",height:"14px",width:"100%"}},[t("line",{staticClass:"line-container__background",attrs:{"stroke-linecap":"round","stroke-width":"4px",x1:"4px",x2:"97%",y2:"7px",y1:"7px"}}),t("line",{staticClass:"line-container__progress",attrs:{"stroke-linecap":"round","stroke-width":"4px",x2:.97*r.progress+"%",x1:"4px",y2:"7px",y1:"7px"}})])])},ye=[],he={__name:"LinearPercentageBar",props:{progress:{type:Number,required:!0}},setup(e){const t=e;(0,b.sj)(((e,t)=>({"9d076208":t.stroke})));const{progress:r}=(0,b.BK)(t),s=(0,b.Fl)((()=>r.value<=25?d.RED:r.value<=50?d.ORANGE:d.GREEN));return{__sfc:!0,props:t,progress:r,stroke:s}}},we=he,be=(0,M.Z)(we,ge,ye,!1,null,"e38357be",null),xe=be.exports,Ce={__name:"PortraitBody",setup(e){let t;const{listOfApplicants:r,localeDate:s,getColor:a,percent:o,convert:n,total:c}=F();return{__sfc:!0,totalScore:t,listOfApplicants:r,localeDate:s,getColor:a,percent:o,convert:n,total:c,LinearPercentageBar:xe,MAX_SCORE:g,MAX_TOTAL:v}}},Ae=Ce,Oe=(0,M.Z)(Ae,fe,ve,!1,null,"7e0a252a",null),Be=Oe.exports;class Ee{constructor(e){this.maxWidth=window.matchMedia(`(max-width: ${e}px)`)}setHandler(e){this.maxWidth.addEventListener("change",(t=>{e(t.matches)}))}}function Le(e=f){const t=O(),r=new Ee(e),s=(0,b.Fl)({set(e){t.commit(c,e)},get(){return t.getters.isMobile}}),a=e=>s.value=e;return a(r.maxWidth.matches),r.setHandler(a),{mediaScreen:a,isMobile:s,media:r}}var ke={__name:"AppBody",setup(e){const{searchHandler:t}=F(),{isMobile:r}=Le();return{__sfc:!0,searchHandler:t,isMobile:r,LandscapeHeader:U,LandscapeBody:le,PortraitHeader:me,PortraitBody:Be}}},Me=ke,Se=(0,M.Z)(Me,j,N,!1,null,"4f25e8c6",null),De=Se.exports,Pe={__name:"App",setup(e){const{fetchApplicantsList:t}=E(),r=(0,b.iH)(!1);return(async()=>{await t(),r.value=!0})(),{__sfc:!0,fetchApplicantsList:t,show:r,AppHeader:P,AppBody:De}}},je=Pe,Ne=(0,M.Z)(je,s,a,!1,null,null,null),Te=Ne.exports;class He extends HTMLFormElement{}class Re extends HTMLUListElement{}class Ze extends HTMLLIElement{}class Fe extends HTMLDetailsElement{}customElements.define("applicants-search",He,{extends:"form"}),customElements.define("applicants-list",Re,{extends:"ul"}),customElements.define("list-item",Ze,{extends:"li"}),customElements.define("item-cell",Fe,{extends:"div"}),b.ZP.config.ignoredElements=[/-\w*/],b.ZP.config.productionTip=!1,async function(){const e=new b.ZP({store:B,render:e=>e(Te)});await Promise.all([customElements.whenDefined("applicants-search"),customElements.whenDefined("applicants-list"),customElements.whenDefined("list-item"),customElements.whenDefined("item-cell")]),e.$mount("#app")}()},9262:function(e,t,r){e.exports=r.p+"img/search.08ae940a.svg"},9574:function(e,t,r){e.exports=r.p+"img/logo.9db96fad.svg"},4937:function(e,t,r){e.exports=r.p+"img/avatar.2f22990a.jpg"}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],o=e[u][2];for(var c=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(c=!1,o<n&&(n=o));if(c){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.p=""}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],c=s[1],l=s[2],i=0;if(n.some((function(t){return 0!==e[t]}))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var u=l(r)}for(t&&t(s);i<n.length;i++)o=n[i],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},s=self["webpackChunkapplicants_list"]=self["webpackChunkapplicants_list"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(8219)}));s=r.O(s)})();
//# sourceMappingURL=app.2647e70f.js.map