(function(){"use strict";var t={3917:function(t,e,r){var s=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("main",{attrs:{id:"app"}},[e(r.AppHeader),r.show?[e(r.AppBody)]:t._e()],2)},a=[];const o="fetchApplicantsList",n="setApplicantsList",c="setScreenMode",l="toggleSort";var i=r(6318);class u{static read(){return JSON.parse(localStorage.getItem(u.KEY)||"{}")}static write(t){const e=JSON.parse(localStorage.getItem(u.KEY)||"{}");Object.assign(e,t),localStorage.setItem(u.KEY,JSON.stringify(e))}}(0,i.Z)(u,"KEY","sort");const p={RED:{MIN:0,MAX:49},ORANGE:{MIN:50,MAX:74},GREEN:{MIN:75,MAX:100}},d={RED:"#FF0000",ORANGE:"#FFA200",GREEN:"#01AA88"},_={day:"2-digit",month:"2-digit",year:"numeric"},m={lang:0,math:1,comp:2},f="/applicants-list",v=360,g=15,y=5,h={name:"ФИО",date:"Дата подачи заявления",lang:"Балл по русскому",math:"Балл по математике",comp:"Балл по информатике",total:"Суммарный балл",percent:"Процент"},w={PERCENT:"percent",TOTAL:"total",NAME:"name",DATE:"date",LANG:"lang",MATH:"math",COMP:"comp"};async function b(t){const e=await fetch(`${f}${t}`);return await e.json()}var x=r(408),C=r(7195);C.ZP.use(x.ZP);const A=(t,e)=>({...t,[e]:"asc"}),O=u.read();O.by||Object.assign(O,{...Object.values(w).reduce(A,{}),by:"name"});const B=new x.ZP.Store({state:()=>({endpoint:"/api/v1/applicants.json",isMobile:!0,orderBy:O,list:[]}),getters:{isMobile:t=>t.isMobile,orderBy:t=>t.orderBy,applicants:t=>t.list},mutations:{[l](t,e){const{by:r,...s}=t.orderBy,a=e.order?{by:r,...Object.keys(s).reduce(((t,r)=>({...t,[r]:e.order})),{})}:{...t.orderBy,...e};u.write(a),t.orderBy=a},[n](t,e){t.list=e},[c](t,e){t.isMobile=e}},actions:{async[o]({state:t,commit:e}){const r=await b(t.endpoint);e(n,r.map((t=>{const[e,r,s]=t.subjects;return e.mark="lang",r.mark="math",s.mark="comp",t.subjects=[e,r,s],t})))}}}),E=()=>B;var L=B;function k(){const t=E(),e=async()=>{await t.dispatch(o)};return{fetchApplicantsList:e}}var D=function(t,e){return e._m(0)},M=[function(t,e){return t("header",{staticClass:"header-container header-container--sticky"},[t("section",{staticClass:"container"},[t("figure",{staticClass:"header-container__logo"},[t("img",{staticClass:"header-container__image",attrs:{src:r(9574),alt:"Logo",width:"41",height:"33"}}),t("figcaption",[e._v(" Система таблиц ")])]),t("figure",{staticClass:"header-container__employee"},[t("figcaption",[e._v(" Светлана "),t("span",[e._v("Сотрудник")])]),t("img",{staticClass:"header-container__image",attrs:{src:r(4937),alt:"Logo",width:"44",height:"44"}})])])])}],S=r(1001),P={},j=(0,S.Z)(P,D,M,!0,null,"35041355",null),N=j.exports,T=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("section",{staticClass:"container"},[e("h1",{staticClass:"applicants__title"},[t._v("Список заявлений")]),e("applicants-search",{staticClass:"applicants__finder"},[e("img",{staticClass:"applicants__search-icon",attrs:{src:r(9262),alt:"Search",height:"15",width:"15"}}),e("input",{attrs:{placeholder:"Поиск",type:"text"},on:{input:s.searchHandler}})]),e("applicants-list",{staticClass:"applicants__list"},[s.isMobile?[e(s.PortraitHeader),e(s.PortraitBody)]:[e(s.LandscapeHeader),e(s.LandscapeBody)]],2)],1)},H=[],R=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("list-item",{staticClass:"applicants__list-header applicants__list-header--landscape"},[e("item-cell",{staticClass:"cell cell__name",on:{click:function(t){return r.toggleSort("name")}}},[e("summary",[t._v(t._s(r.convert("name")))]),"name"===r.orderBy.by?[e(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:t._e()],2),e("item-cell",{staticClass:"cell cell__date",on:{click:function(t){return r.toggleSort("date")}}},[e("summary",[t._v(t._s(r.convert("date")))]),"date"===r.orderBy.by?[e(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:t._e()],2),t._l(["lang","math","comp"],(function(s,a){return[e("item-cell",{key:`${s}-${a}`,class:`cell cell__score cell__score--${s}`,on:{click:function(t){return r.toggleSort(s)}}},[e("summary",[t._v(t._s(r.convert(s)))]),r.orderBy.by===s?[e(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:t._e()],2)]})),e("item-cell",{staticClass:"cell cell__total",on:{click:function(t){return r.toggleSort("total")}}},[e("summary",[t._v(t._s(r.convert("total")))]),"total"===r.orderBy.by?[e(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:t._e()],2),e("item-cell",{staticClass:"cell cell__percent",on:{click:function(t){return r.toggleSort("percent")}}},[e("summary",[t._v(t._s(r.convert("percent")))]),"percent"===r.orderBy.by?[e(r.OrderArrow,{attrs:{order:r.orderBy[r.orderBy.by]}})]:t._e()],2)],2)},Z=[];const F=t=>[].concat(t.map($));function $({subjects:t,...e}){return Object.assign({},e,t&&{subjects:F(t)})}function X(){const t=E(),e=F(t.getters.applicants),r=(0,C.Fl)((()=>t.getters.orderBy)),s=(0,C.Fl)({set(e){t.commit(n,e)},get(){return t.getters.applicants}}),a=t=>h[t],o=(t,e)=>(t+=+e.score,t),c=({subjects:t})=>t.reduce(o,0),i=({subjects:t})=>{const e=100*c({subjects:t})/g;return+e.toFixed(0)},u=t=>new Date(t).toLocaleString("ru-RU",_),f=t=>t.sort(((t,e)=>t.name.localeCompare(e.name))),v=t=>t.sort(((t,e)=>new Date(t.date)-new Date(e.date))),y=(t,e)=>{const r=m[e];return t.sort(((t,e)=>Number(t.subjects[r].score)-Number(e.subjects[r].score)))},b=(t,e)=>{const r="total"===e?c:i;return t.sort(((t,e)=>r(t)-r(e)))},x=(t,e,r)=>{switch(r||="asc",e||="name",e){case w.LANG:case w.MATH:case w.COMP:t=y(t,e);break;case w.PERCENT:case w.TOTAL:t=b(t,e);break;case w.NAME:t=f(t);break;case w.DATE:t=v(t);break}return"desc"===r?t.reverse():t},A=()=>x(s.value,r.value.by,r.value[r.value.by]),O=e=>{t.commit(l,{by:e,[e]:"asc"===r.value[e]?"desc":"asc"})},B=e=>{t.commit(l,{order:e})},L=e=>{t.commit(l,{by:e})},k=({target:t})=>{const r=t.value.toLowerCase();s.value=e.filter((({name:t})=>t.toLowerCase().includes(r))),s.value=A()},D=(t,e,r)=>t>=e&&t<=r,M=(t,e)=>{t*=100/e;let r,s=d.RED;return Object.entries(p).some((([e,{MIN:s,MAX:a}])=>!!D(t,s,a)&&(r=e,!0)))&&(s=d[r]),s};return(0,C.YP)(r,(()=>{s.value=A()}),{immediate:!0}),{orderBy:r,listOfApplicants:s,searchHandler:k,localeDate:u,toggleSort:O,setOrder:B,setSort:L,getColor:M,convert:a,percent:i,total:c}}var G=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span",{staticClass:"order__arrow",class:{offset:t.offset}},["asc"===t.order?e("svg",{staticClass:"order__arrow--asc",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",height:"8",width:"8"}},[e("path",{attrs:{d:"M4 8L7.5 4L0.5 4L4 8Z"}}),e("path",{attrs:{d:"M4 0L4 4","stroke-width":"2"}})]):e("svg",{staticClass:"order__arrow--desc",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8",height:"8",width:"8"}},[e("path",{attrs:{d:"M3.5 0.5L7 4.5L-1.74846e-07 4.5L3.5 0.5Z"}}),e("path",{attrs:{d:"M3.5 8.5L3.5 4.5","stroke-width":"2"}})])])},I=[],K={__name:"OrderArrow",props:{offset:{type:Boolean,default:!0},order:{type:String,required:!0}},setup(t){return{__sfc:!0}}},Y=K,q=(0,S.Z)(Y,G,I,!1,null,"515c3854",null),J=q.exports,W={__name:"LandscapeHeader",setup(t){const{orderBy:e,toggleSort:r,convert:s}=X();return{__sfc:!0,orderBy:e,toggleSort:r,convert:s,OrderArrow:J}}},U=W,z=(0,S.Z)(U,R,Z,!1,null,null,null),Q=z.exports,V=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("div",{staticClass:"list__wrapper"},t._l(r.listOfApplicants,(function(s){return e("list-item",{key:s.id,staticClass:"applicants__list-item",attrs:{set:r.totalScore=r.total(s)}},[e("item-cell",{staticClass:"cell cell__name"},[t._v(" "+t._s(s.name)+" ")]),e("item-cell",{staticClass:"cell cell__date"},[t._v(" "+t._s(r.localeDate(s.date))+" ")]),t._l(s.subjects,(function({score:a,mark:o},n){return[e("item-cell",{key:`${s.id}-${n}`,class:`cell cell__score cell__score--${o}`,style:{color:r.getColor(a,r.MAX_SCORE)}},[t._v(" "+t._s(a)+" ")])]})),e("item-cell",{staticClass:"cell cell__total",style:{color:r.getColor(r.totalScore,r.MAX_TOTAL)}},[t._v(" "+t._s(r.totalScore)+" ")]),e("item-cell",{staticClass:"cell cell__percent"},[e(r.CircularPercentageBar,{attrs:{progress:r.percent(s)}})],1)],2)})),1)},tt=[],et=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("svg",{staticClass:"circle-container",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"2 -2 28 36"}},[e("circle",{staticClass:"circle-container__background",attrs:{cx:"16",cy:"16",r:"16"}}),e("circle",{staticClass:"circle-container__progress",attrs:{cx:"16",cy:"16",r:"16"}}),e("text",{staticClass:"circle-container__text",attrs:{dy:"-13",dx:r.dx}},[t._v(" "+t._s(r.progress)+"% ")])])},rt=[],st={__name:"CircularPercentageBar",props:{progress:{type:Number,required:!0}},setup(t){const e=t;(0,C.sj)(((t,e)=>({b2691ba2:e.stroke,"0ef87e34":e.strokeDashoffset})));const{progress:r}=(0,C.BK)(e),s=(0,C.Fl)((()=>r.value>=100?3.5:6.5)),a=(0,C.Fl)((()=>100-r.value)),o=(0,C.Fl)((()=>r.value<=25?d.RED:r.value<=50?d.ORANGE:d.GREEN));return{__sfc:!0,props:e,progress:r,dx:s,strokeDashoffset:a,stroke:o}}},at=st,ot=(0,S.Z)(at,et,rt,!1,null,"130f42e0",null),nt=ot.exports,ct={__name:"LandscapeBody",setup(t){let e;const{listOfApplicants:r,localeDate:s,getColor:a,percent:o,total:n}=X();return{__sfc:!0,totalScore:e,listOfApplicants:r,localeDate:s,getColor:a,percent:o,total:n,CircularPercentageBar:nt,MAX_SCORE:y,MAX_TOTAL:g}}},lt=ct,it=(0,S.Z)(lt,V,tt,!1,null,"409d4a61",null),ut=it.exports,pt=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("section",{staticClass:"applicants__list-header applicants__list-header--portrait"},[e("div",{staticClass:"dropdown"},[e("button",{ref:"dropDownBtn",staticClass:"dropdown__button",attrs:{type:"button"},on:{click:r.toggleDropDown}},[e("sup",[t._v("Сортировать по")]),t._v(" "+t._s(r.convert(r.orderBy.by))+" ")]),e("ul",{ref:"dropDownList",staticClass:"dropdown__list",on:{click:r.closeDropDown}},t._l(r.list,(function({text:s,by:a}){return e("li",{key:a,staticClass:"dropdown__list-item",class:{"dropdown__list-item--active":a===r.orderBy.by},on:{click:function(t){return r.setSort(a)}}},[t._v(" "+t._s(s)+" ")])})),0)]),e("button",{class:{active:"asc"===r.orderBy[r.orderBy.by]},on:{click:function(t){return r.setOrder("asc")}}},[e(r.OrderArrow,{attrs:{order:"asc",offset:!1}})],1),e("button",{class:{active:"desc"===r.orderBy[r.orderBy.by]},on:{click:function(t){return r.setOrder("desc")}}},[e(r.OrderArrow,{attrs:{order:"desc",offset:!1}})],1)])},dt=[];function _t(t,e){const r=()=>{t.value?.classList.toggle("dropdown__list--visible"),e.value?.classList.toggle("dropdown__button--active")},s=()=>{t.value?.classList.remove("dropdown__list--visible"),e.value?.classList.remove("dropdown__button--active")};return(0,C.bv)((()=>{document.addEventListener("keydown",(t=>{"Escape"===t.key&&s()})),document.addEventListener("click",(t=>{t.target!==e.value&&s()}))})),{toggleDropDown:r,closeDropDown:s}}var mt={__name:"PortraitHeader",setup(t){const e=Object.entries(h).map((([t,e])=>({text:e,by:t}))),r=(0,C.iH)(null),s=(0,C.iH)(null),{orderBy:a,convert:o,setSort:n,setOrder:c}=X(),{toggleDropDown:l,closeDropDown:i}=_t(r,s);return{__sfc:!0,list:e,dropDownList:r,dropDownBtn:s,orderBy:a,convert:o,setSort:n,setOrder:c,toggleDropDown:l,closeDropDown:i,OrderArrow:J}}},ft=mt,vt=(0,S.Z)(ft,pt,dt,!1,null,null,null),gt=vt.exports,yt=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("div",{staticClass:"list__wrapper"},t._l(r.listOfApplicants,(function(s){return e("list-item",{key:s.id,staticClass:"applicants__list-item",attrs:{set:r.totalScore=r.total(s)}},[e("item-cell",{staticClass:"cell cell__name"},[e("summary",[t._v(t._s(r.convert("name")))]),t._v(" "+t._s(s.name)+" ")]),e("item-cell",{staticClass:"cell cell__date"},[e("summary",[t._v(t._s(r.convert("date")))]),t._v(" "+t._s(r.localeDate(s.date))+" ")]),t._l(s.subjects,(function({score:a,mark:o},n){return[e("item-cell",{key:`${s.id}-${n}`,class:`cell cell__score cell__score--${o}`,style:{color:r.getColor(a,r.MAX_SCORE)}},[e("summary",[t._v(t._s(r.convert(o)))]),t._v(" "+t._s(a)+" ")])]})),e("item-cell",{staticClass:"cell cell__total",style:{color:r.getColor(r.totalScore,r.MAX_TOTAL)}},[e("summary",[t._v(t._s(r.convert("total")))]),t._v(" "+t._s(r.totalScore)+" ")]),e("item-cell",{staticClass:"cell cell__percent"},[e("summary",[t._v(t._s(r.convert("percent")))]),e(r.LinearPercentageBar,{attrs:{progress:r.percent(s)}})],1)],2)})),1)},ht=[],wt=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("span",{staticClass:"linear-bar"},[t._v(" "+t._s(r.progress)+"% "),e("svg",{staticClass:"line-container",attrs:{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",viewBox:"0 0 100 14",height:"14px",width:"100%"}},[e("line",{staticClass:"line-container__background",attrs:{"stroke-linecap":"round","stroke-width":"4px",x1:"4px",x2:"97%",y2:"7px",y1:"7px"}}),e("line",{staticClass:"line-container__progress",attrs:{"stroke-linecap":"round","stroke-width":"4px",x2:.97*r.progress+"%",x1:"4px",y2:"7px",y1:"7px"}})])])},bt=[],xt={__name:"LinearPercentageBar",props:{progress:{type:Number,required:!0}},setup(t){const e=t;(0,C.sj)(((t,e)=>({"9d076208":e.stroke})));const{progress:r}=(0,C.BK)(e),s=(0,C.Fl)((()=>r.value<=25?d.RED:r.value<=50?d.ORANGE:d.GREEN));return{__sfc:!0,props:e,progress:r,stroke:s}}},Ct=xt,At=(0,S.Z)(Ct,wt,bt,!1,null,"e38357be",null),Ot=At.exports,Bt={__name:"PortraitBody",setup(t){let e;const{listOfApplicants:r,localeDate:s,getColor:a,percent:o,convert:n,total:c}=X();return{__sfc:!0,totalScore:e,listOfApplicants:r,localeDate:s,getColor:a,percent:o,convert:n,total:c,LinearPercentageBar:Ot,MAX_SCORE:y,MAX_TOTAL:g}}},Et=Bt,Lt=(0,S.Z)(Et,yt,ht,!1,null,"7e0a252a",null),kt=Lt.exports;class Dt{constructor(t){this.maxWidth=window.matchMedia(`(max-width: ${t}px)`)}setHandler(t){this.maxWidth.addEventListener("change",(e=>{t(e.matches)}))}}function Mt(t=v){const e=E(),r=new Dt(t),s=(0,C.Fl)({set(t){e.commit(c,t)},get(){return e.getters.isMobile}}),a=t=>s.value=t;return a(r.maxWidth.matches),r.setHandler(a),{mediaScreen:a,isMobile:s,media:r}}var St={__name:"AppBody",setup(t){const{searchHandler:e}=X(),{isMobile:r}=Mt();return{__sfc:!0,searchHandler:e,isMobile:r,LandscapeHeader:Q,LandscapeBody:ut,PortraitHeader:gt,PortraitBody:kt}}},Pt=St,jt=(0,S.Z)(Pt,T,H,!1,null,"4f25e8c6",null),Nt=jt.exports,Tt={__name:"App",setup(t){const{fetchApplicantsList:e}=k(),r=(0,C.iH)(!1);return(async()=>{await e(),r.value=!0})(),{__sfc:!0,fetchApplicantsList:e,show:r,AppHeader:N,AppBody:Nt}}},Ht=Tt,Rt=(0,S.Z)(Ht,s,a,!1,null,null,null),Zt=Rt.exports;class Ft extends HTMLFormElement{}class $t extends HTMLUListElement{}class Xt extends HTMLLIElement{}class Gt extends HTMLDetailsElement{}customElements.define("applicants-search",Ft,{extends:"form"}),customElements.define("applicants-list",$t,{extends:"ul"}),customElements.define("list-item",Xt,{extends:"li"}),customElements.define("item-cell",Gt,{extends:"div"}),C.ZP.config.ignoredElements=[/-\w*/],C.ZP.config.productionTip=!0,async function(){const t=new C.ZP({store:L,render:t=>t(Zt)});await Promise.all([customElements.whenDefined("applicants-search"),customElements.whenDefined("applicants-list"),customElements.whenDefined("list-item"),customElements.whenDefined("item-cell")]),t.$mount("#app")}()},9262:function(t,e,r){t.exports=r.p+"img/search.08ae940a.svg"},9574:function(t,e,r){t.exports=r.p+"img/logo.9db96fad.svg"},4937:function(t,e,r){t.exports=r.p+"img/avatar.2f22990a.jpg"}},e={};function r(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,s,a,o){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],a=t[u][1],o=t[u][2];for(var c=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(r.O).every((function(t){return r.O[t](s[l])}))?s.splice(l--,1):(c=!1,o<n&&(n=o));if(c){t.splice(u--,1);var i=a();void 0!==i&&(e=i)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,a,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.p="/applicants-list/"}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,n=s[0],c=s[1],l=s[2],i=0;if(n.some((function(e){return 0!==t[e]}))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var u=l(r)}for(e&&e(s);i<n.length;i++)o=n[i],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(u)},s=self["webpackChunkapplicants_list"]=self["webpackChunkapplicants_list"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(3917)}));s=r.O(s)})();
//# sourceMappingURL=app.dcb25e9d.js.map